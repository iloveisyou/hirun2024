/*
 * @(#) rui_ui-min.js
 * 
 * DevOn RUI
 * Build Version : 2.8
 * 
 * Copyright ⓒ LG CNS, Inc. All rights reserved.
 *
 * DevOn RUI의 모든 저작물은 LG CNS 의 지적재산입니다.
 * LG CNS로 부터 허가 받지 않은 경우 사용, 열람, 복사, 수정, 재배포 할 수 없으며 외부로의 유출을 금지합니다.
 * 특히 소스 코드를 수정하는 경우 기술 지원의 대상이 되지 않을 수 있습니다.
 * 자세한 사항은 계약사항에 따릅니다. 기타 사항은 devon@lgcns.com 으로 문의 하십시오.
 *
 * Do Not Erase This Comment!!! (이 주석문을 지우지 말것)
 *
 * rui/license.txt를 반드시 읽어보고 사용하시기 바랍니다. License.txt파일은 절대로 삭제하시면 안됩니다. 
 *
 * 1. 사내 사용시 KAMS를 통해 요청하여 사용허가를 받으셔야 소프트웨어 라이센스 계약서에 동의하는 것으로 간주됩니다.
 * 2. DevOn RUI가 포함된 제품을 판매하실 경우에도 KAMS를 통해 요청하여 사용허가를 받으셔야 합니다.
 * 3. KAMS를 통해 사용허가를 받지 않은 경우 소프트웨어 라이센스 계약을 위반한 것으로 간주됩니다.
 * 4. 별도로 판매될 경우는 LGCNS의 소프트웨어 판매정책을 따릅니다.
 */
Rui.namespace("Rui.ui"),Rui.ui.LUIComponent=function(e){e=e||{},Rui.isDebugCR&&Rui.log("otype : "+this.otype+"\r\nconfig : "+Rui.dump(e),"create",this.otype||"LUIComponent"),this._events=this._events||{},this.initConfig=e,Rui.ui.LUIComponent.superclass.constructor.call(this),Rui.applyObject(this,e,!0),this.createEvent("disable"),this.createEvent("enable"),this.createEvent("show"),this.createEvent("hide"),this.createEvent("focus"),this.createEvent("blur"),this.renderEvent=this.createEvent("render",{isCE:!0}),this.createEvent("destroy"),this.createEvent("resize"),this.createEvent("move"),this.init(e),this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)},Rui.extend(Rui.ui.LUIComponent,Rui.util.LEventProvider,{otype:"Rui.ui.LUIComponent",disabled:!1,defaultClass:null,checkContainBlur:!0,init:function(e){this.initDefaultConfig(),e&&this.cfg.applyConfig(e,!0),this.initComponent(e),this.initEvents(),Rui.ui.LConfig.alreadySubscribed(this.renderEvent,this.cfg.fireQueue,this.cfg)||this.renderEvent.on(this.cfg.fireQueue,this.cfg,!0)},initDefaultConfig:function(){this.cfg=new Rui.ui.LConfig(this),this.cfg.addProperty("width",{handler:this._setWidth,value:this.width,validator:Rui.isNumber}),this.cfg.addProperty("height",{handler:this._setHeight,value:this.height,validator:Rui.isNumber}),this.cfg.addProperty("left",{handler:this._setLeft,validator:Rui.isNumber}),this.cfg.addProperty("top",{handler:this._setTop,validator:Rui.isNumber}),this.cfg.addProperty("disabled",{handler:this._setDisabled,value:!1,validator:Rui.isBoolean})},initComponent:function(e){},initEvents:function(){},applyToMarkup:function(e){if(this.el=Rui.get(e),!this.el)throw new Error(" Can't find the dom object while calling applyToMarkup method. : "+e);this.id||(this.id=this.el.id),this.render(this.el.dom.parentNode)},renderAt:function(e){this.applyToMarkup(e)},render:function(e){if(this.el||e||(e=document.body),e)this.createContainer(e),this.appendTo(e),this.doRender(e);else if(!Rui.util.LDom.inDocument(this.el.dom))return!1;if(this.dom=this.el.dom,this.defaultClass&&this.el.addClass(this.defaultClass),this._rendered=!0,this.renderEvent.fire(),this.plugins)for(var t=0,i=this.plugins.length;t<i;t++)this.plugins[t].initPlugin(this);this.afterRender(e)},createContainer:function(e){var t;return this.el||((t=this.createElement().cloneNode(!1)).id=Rui.useFixedId()?Rui.id(this.el,"LUIComp-"+(this.id||this.name||e.id)):Rui.id(),this.el=Rui.get(t),this.id=this.id||this.el.id),this.el},createElement:function(){return document.createElement("div")},appendTo:function(e){"string"==typeof e&&(e=document.getElementById(e)),e&&this.el&&this.el.dom&&(e=e.dom||e)!=this.el.dom.parentNode&&this._addToParent(e,this.el.dom)},_addToParent:function(e,t){e===document.body&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},doRender:function(e){},initPlugin:function(){if(this.plugins)for(var e=0,t=this.plugins.length;e<t;e++)this.plugins[e].initPlugin(this)},afterRender:function(e){this.el&&(this.checkContainBlur?(this.el.on("focus",this.onCheckFocus,this,!0,{system:!0}),this.el.on("blur",this.deferOnBlur,this,!0,{system:!0})):(this.el.on("focus",this.onFocus,this,!0,{system:!0}),this.el.on("blur",this.onBlur,this,!0,{system:!0})))},onCheckFocus:function(e){this.isFocus||(this.onFocus.call(this,e),1==this.checkContainBlur&&(Rui.util.LEvent.addListener(Rui.browser.msie?document.body:document,"mousedown",this.deferOnBlur,this,!0),this.isFocus=!0))},reOnDeferOnBlur:function(){Rui.util.LEvent.removeListener(Rui.browser.msie?document.body:document,"mousedown",this.deferOnBlur),Rui.util.LEvent.addListener(Rui.browser.msie?document.body:document,"mousedown",this.deferOnBlur,this,!0)},deferOnBlur:function(e){Rui.util.LFunction.defer(this.checkBlur,10,this,[e])},checkBlur:function(e){if(1!=e.deferCancelBubble&&!0===this.isFocus){var t=e.target;if(this.el.isAncestor(t))e.deferCancelBubble=!0;else{if(!1===this.onCanBlur(e))return;Rui.util.LEvent.removeListener(Rui.browser.msie?document.body:document,"mousedown",this.deferOnBlur),this.onBlur.call(this,e),this.isFocus=null}}},onCanBlur:function(e){},onFocus:function(e){!0!==this.isFocus&&(this.isFocus=!0,this.fireEvent("focus",e))},onBlur:function(e){this.isFocus=null,this.fireEvent("blur",e)},setVisibilityMode:function(e){this.el.setVisibilityMode(e)},_setDisabled:function(e,t,i){!1===t[0]?(this.disabled=!1,this.el&&this.el.removeClass("L-disabled"),this.fireEvent("enable")):(this.disabled=!0,this.el&&this.el.addClass("L-disabled"),this.fireEvent("disable"))},_setWidth:function(e,t,i){var s=t[0];s<0||(this.el&&this.el.setWidth(s),this.width=s)},_setHeight:function(e,t,i){var s=t[0];s<0||(this.el&&this.el.setHeight(s),this.height=s)},_setLeft:function(e,t,i){var s=t[0];this.el.setLeft(s)},_setTop:function(e,t,i){var s=t[0];this.el.setTop(s)},enable:function(){this.cfg.setProperty("disabled",!1)},disable:function(){this.cfg.setProperty("disabled",!0)},isDisable:function(){return this.cfg.getProperty("disabled")},isShow:function(){return this.el.isShow()},show:function(e){this.el.show(e),this.fireEvent("show")},hide:function(e){this.el.hide(e),this.fireEvent("hide")},focus:function(){this.el.focus()},blur:function(){this.el.blur()},getHeight:function(e){return this.el?this.el.getHeight(e):this.height},setHeight:function(e){this.cfg.setProperty("height",e)},getWidth:function(e){return this.el?this.el.getWidth(e):this.width},setWidth:function(e){this.cfg.setProperty("width",e)},getLeft:function(){return this.el.getLeft()},setLeft:function(e){this.cfg.setProperty("left",e)},getTop:function(){return this.el.getTop()},setTop:function(e){this.cfg.setProperty("top",e)},parent:function(e,t){return this.el.parent(e,t)},select:function(e,t){return this.el.select(e,t)},query:function(e,t){return this.el.query(e,t)},filter:function(e){return this.el.query(e)},getContainer:function(){return this.el},updateView:function(){this.enableMaskEl=null},availableHeight:function(e,t){this.el.availableHeight(e,t)},isRender:function(){return this._rendered},isRendered:function(){return this._rendered},destroy:function(){if(this.fireEvent("destroy"),this.plugins)for(var e=0,t=this.plugins.length;e<t;e++)this.plugins[e].destroy(this);this.renderEvent&&(this.renderEvent.unOnAll(),this.renderEvent=null),this.unOnAll(),this.el&&(this.el.unOnAll(),this.el.remove(),this.el=null),this.deferOnBlur&&Rui.util.LEvent.removeListener(Rui.browser.msie?document.body:document,"mousedown",this.deferOnBlur),this.cfg&&(this.cfg.destroy(),this.cfg=null)},toString:function(){return this.otype+" "+(this.id||"Unknown")}}),Rui.namespace("Rui.ui"),Rui.ui.LButton=function(e){"string"==typeof(e=e||{})&&(e={applyTo:e}),e=Rui.applyIf(e,Rui.getConfig().getFirst("$.base.button.defaultProperties")),Rui.ui.LButton.superclass.constructor.call(this,e)},Rui.extend(Rui.ui.LButton,Rui.ui.LUIComponent,{otype:"Rui.ui.LButton",CSS_BASE:"L-button",label:null,type:"button",disableDbClick:!0,disableDbClickInterval:500,initEvents:function(){Rui.ui.LButton.superclass.initEvents.call(this),this.createEvent("click")},initDefaultConfig:function(){Rui.ui.LButton.superclass.initDefaultConfig.call(this),this.cfg.addProperty("label",{handler:this._setLabel,value:this.label,validator:Rui.isString})},createElement:function(){return document.createElement("span")},createContainer:function(e){var t,i,s=Rui.ui.LButton.superclass.createContainer.call(this,e),n=s.dom.tagName;if("SPAN"!=n){switch(n){case"INPUT":t=s.getValue();break;case"A":case"BUTTON":case"DIV":default:t=s.getHtml()}this.el=this.createElement(),this.el.id=this.id||this.el.id||Rui.useFixedId()?Rui.id(this.el,"LButton-"+this.id):Rui.id(),this.el=Rui.get(this.el),Rui.util.LDom.replaceChild(this.el.dom,s.dom),Rui.util.LDom.removeNode(s.dom),(i=s.dom.className)&&this.el.addClass(i)}else t=s.getHtml();return this.label=t,this.el.addClass(this.CSS_BASE),this.el},doRender:function(){this.createTemplate(this.el);var e=this.template.apply({id:this.id+"-button",type:this.type||"button",label:this.label});this.el.html(e),this.on("click",this.onClick,this,!0,{system:!0}),this.buttonEl=this.el.select("button").getAt(0),this.buttonEl.on("click",this.onButtonClick,this,!0,{system:!0})},createTemplate:function(e){this.template=new Rui.LTemplate('<span class="first-child">','<button id="{id}" type="{type}">{label}</button>',"</span>")},_setLabel:function(e,t,i){var s=t[0];this.label=s,this.buttonEl.html(s)},_setDisabled:function(e,t,i){t[0]!==this.disabled&&(Rui.ui.LButton.superclass._setDisabled.call(this,e,t,i),this.buttonEl&&(this.buttonEl.dom.disabled=t[0]))},submitForm:function(){var e,t=this.getForm(),i=!1;return t&&(i=Rui.browser.msie?t.fireEvent("onsubmit"):((e=document.createEvent("HTMLEvents")).initEvent("submit",!0,!0),t.dispatchEvent(e)),(Rui.browser.msie||Rui.browser.webkit)&&i&&t.submit()),i},setLabel:function(e){this.cfg.setProperty("label",e)},getLabel:function(){return this.label},getForm:function(){return this.buttonEl?this.buttonEl.dom.form:null},focus:function(){this.el&&!this.el.hasClass("L-disabled")&&this.buttonEl&&this.buttonEl.focus()},blur:function(){this.el&&!this.el.hasClass("L-disabled")&&this.buttonEl&&this.buttonEl.blur()},click:function(){return this.onButtonClick()},onButtonClick:function(e){if(this.disableDbClick){if(0==this.disableDbClick)return;this.disable(),Rui.useAccessibility()&&this.el.setAttribute("aria-pressed",!0);var t=this;this._timeout=setTimeout(function(){t.enable(),Rui.useAccessibility()&&this.el.setAttribute("aria-pressed",!1)},this.disableDbClickInterval)}this.fireEvent("click",e)},onClick:function(e){switch(this.type){case"submit":!1!==e.returnValue&&this.submitForm();break;case"reset":var t=this.getForm();t&&t.reset()}},destroy:function(){this.buttonEl&&(this.buttonEl.unOnAll(),this.buttonEl.remove(),delete this.buttonEl),this._timeout&&clearTimeout(this._timeout),Rui.ui.LButton.superclass.destroy.call(this)},toString:function(){return(this.otype||"Rui.ui.LButton ")+" "+this.id}}),function(){Rui.ui.LConfig=function(e){e&&this.init(e)};var i=Rui.util.LCustomEvent,r=Rui.ui.LConfig;r.prototype={owner:null,queueInProgress:!1,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(e){this.owner=e,this.configChangedEvent=this.createEvent("configChanged",{isCE:!0}),this.configChangedEvent.signature=i.LIST,this.queueInProgress=!1,this.config={},this.initialConfig={},this.eventQueue=[]},checkBoolean:function(e){return"boolean"==typeof e},checkNumber:function(e){return!isNaN(e)},fireEvent:function(e,t){var i=this.config[e];i&&i.event&&i.event.fire(t)},addProperty:function(e,t){e=e.toLowerCase(),(this.config[e]=t).event=this.createEvent(e,{scope:this.owner,isCE:!0}),t.event.signature=i.LIST,t.key=e,t.handler&&t.event.on(t.handler,this.owner),this.setProperty(e,t.value,!0),t.suppressEvent||this.queueProperty(e,t.value)},getConfig:function(){var e,t,i={},s=this.config;for(e in s)Rui.hasOwnProperty(s,e)&&(t=s[e])&&t.event&&(i[e]=t.value);return i},getProperty:function(e){var t=this.config[e.toLowerCase()];return t&&t.event?t.value:void 0},resetProperty:function(e){e=e.toLowerCase();var t=this.config[e];return!(!t||!t.event)&&(this.initialConfig[e]&&!Rui.isUndefined(this.initialConfig[e])?(this.setProperty(e,this.initialConfig[e]),!0):void 0)},setProperty:function(e,t,i){var s;return e=e.toLowerCase(),this.queueInProgress&&!i?(this.queueProperty(e,t),!0):!(!(s=this.config[e])||!s.event)&&(!(s.validator&&!s.validator(t))&&(s.oldValue=s.value,s.value=t,i||(this.fireEvent(e,t),this.configChangedEvent.fire([e,t])),!0))},queueProperty:function(e,t){e=e.toLowerCase();var i,s,n,r,o,a,l,h,u,c,d,f,E,g=this.config[e],p=!1;if(g&&g.event){if(!Rui.isUndefined(t)&&g.validator&&!g.validator(t))return!1;for(Rui.isUndefined(t)?t=g.value:g.value=t,p=!1,i=this.eventQueue.length,d=0;d<i;d++)if((s=this.eventQueue[d])&&(n=s[0],r=s[1],n==e)){this.eventQueue[d]=null,this.eventQueue.push([e,Rui.isUndefined(t)?r:t]),p=!0;break}if(p||Rui.isUndefined(t)||this.eventQueue.push([e,t]),g.supercedes)for(o=g.supercedes.length,f=0;f<o;f++)for(a=g.supercedes[f],l=this.eventQueue.length,E=0;E<l;E++)if((h=this.eventQueue[E])&&(u=h[0],c=h[1],u==a.toLowerCase())){this.eventQueue.push([u,c]),this.eventQueue[E]=null;break}return!0}return!1},refireEvent:function(e){e=e.toLowerCase();var t=this.config[e];t&&t.event&&!Rui.isUndefined(t.value)&&(this.queueInProgress?this.queueProperty(e):this.fireEvent(e,t.value))},applyConfig:function(e,t){var i,s;if(t){for(i in s={},e)Rui.hasOwnProperty(e,i)&&(s[i.toLowerCase()]=e[i]);this.initialConfig=s}for(i in e)Rui.hasOwnProperty(e,i)&&this.queueProperty(i,e[i])},fireQueue:function(){var e,t,i,s;for(this.queueInProgress=!0,e=0;e<this.eventQueue.length;e++)(t=this.eventQueue[e])&&(i=t[0],s=t[1],this.config[i].value=s,this.eventQueue[e]=null,this.fireEvent(i,s));this.queueInProgress=!1,this.eventQueue=[]},subscribeToConfigEvent:function(e,t,i,s){var n=this.config[e.toLowerCase()];return!(!n||!n.event)&&(r.alreadySubscribed(n.event,t,i)||n.event.on(t,i,s),!0)},unsubscribeFromConfigEvent:function(e,t,i){var s=this.config[e.toLowerCase()];return!(!s||!s.event)&&s.event.unOn(t,i)},toString:function(){var e="Config";return this.owner&&(e+=" ["+this.owner.toString()+"]"),e},destroy:function(){var e,t,i=this.config;for(e in i)Rui.hasOwnProperty(i,e)&&((t=i[e]).event.unOnAll(),t.event=null);this.configChangedEvent.unOnAll(),this.configChangedEvent=null,this.owner=null,this.config=null,this.initialConfig=null,this.eventQueue=null}},r.alreadySubscribed=function(e,t,i){var s,n,r=e.subscribers.length;if(0<r){n=r-1;do{if((s=e.subscribers[n])&&s.obj==i&&s.fn==t)return!0}while(n--)}return!1},Rui.applyPrototype(r,Rui.util.LEventProvider)}(),Rui.namespace("Rui.ui"),function(){Rui.ui.LPanel=function(e){var t=e||{},t=Rui.applyIf(t,Rui.getConfig().getFirst("$.ext.panel"));Rui.applyObject(this,t,!0),Rui.ui.LPanel.superclass.constructor.call(this,t)};var i=null,e=Rui.util,_=e.LDom,a=e.LEvent,s=e.LCustomEvent,n=Rui.util.LKeyListener,y=Rui.ui.LConfig,L=Rui.ui.LPanel,r=6==Rui.browser.msie||7==Rui.browser.msie&&"BackCompat"==document.compatMode;L.IMG_ROOT=null,L.IMG_ROOT_SSL=null,L.CSS_HEADER="hd",L.CSS_BODY="bd",L.CSS_FOOTER="ft",L.RESIZE_MONITOR_SECURE_URL="javascript:false;",L.STD_MOD_RE=/^\s*?(body|footer|header)\s*?$/i,L.textResizeEvent=new s("textResize",{isCE:!0}),L.VIEWPORT_OFFSET=10,L.windowScrollEvent=new s("windowScroll",{isCE:!0}),L.windowResizeEvent=new s("windowResize",{isCE:!0}),L.windowScrollHandler=function(e){var t=a.getTarget(e);t&&t!==window&&t!==window.document||(Rui.browser.msie?(window.scrollEnd||(window.scrollEnd=-1),clearTimeout(window.scrollEnd),window.scrollEnd=setTimeout(function(){L.windowScrollEvent.fire()},1)):L.windowScrollEvent.fire())},L.windowResizeHandler=function(e){Rui.browser.msie?(window.resizeEnd||(window.resizeEnd=-1),clearTimeout(window.resizeEnd),window.resizeEnd=setTimeout(function(){L.windowResizeEvent.fire()},100)):L.windowResizeEvent.fire()},(L._initialized=null)===L._initialized&&(a.on(window,"scroll",L.windowScrollHandler),a.on(window,"resize",L.windowResizeHandler),L._initialized=!0),L._TRIGGER_MAP={windowScroll:L.windowScrollEvent,windowResize:L.windowResizeEvent,textResize:L.textResizeEvent},DEFAULT_CONFIG={VISIBLE:{key:"visible",value:!1,validator:Rui.isBoolean},EFFECT:{key:"effect",suppressEvent:!0,supercedes:["visible"]},MONITOR_RESIZE:{key:"monitorresize",value:!0},X:{key:"x",validator:Rui.isNumber,suppressEvent:!0,supercedes:["iframe"]},Y:{key:"y",validator:Rui.isNumber,suppressEvent:!0,supercedes:["iframe"]},XY:{key:"xy",suppressEvent:!0,supercedes:["iframe"]},CONTEXT:{key:"context",suppressEvent:!0,supercedes:["iframe"]},FIXED_CENTER:{key:"fixedcenter",value:!1,validator:Rui.isBoolean,supercedes:["iframe","visible"]},AUTO_FILL_HEIGHT:{key:"autofillheight",supressEvent:!0,supercedes:["height"],value:"body"},ZINDEX:{key:"zindex",value:null},IFRAME:{key:"iframe",value:6==Rui.browser.msie,validator:Rui.isBoolean,supercedes:["zindex"]},PREVENT_CONTEXT_OVERLAP:{key:"preventcontextoverlap",value:!1,validator:Rui.isBoolean,supercedes:["constraintoviewport"]},CLOSE:{key:"close",value:!0,validator:Rui.isBoolean,supercedes:["visible"]},DRAGGABLE:{key:"draggable",value:!!Rui.dd.LDD,validator:Rui.isBoolean,supercedes:["visible"]},DRAG_ONLY:{key:"dragonly",value:!1,validator:Rui.isBoolean,supercedes:["draggable"]},UNDERLAY:{key:"underlay",value:"shadow",supercedes:["visible"]},MODAL:{key:"modal",value:!1,validator:Rui.isBoolean,supercedes:["visible","zindex"]},KEY_LISTENERS:{key:"keylisteners",suppressEvent:!0,supercedes:["visible"]},STRINGS:{key:"strings",supercedes:["close"],validator:Rui.isObject,value:{close:"Close"}}},Rui.extend(Rui.ui.LPanel,Rui.ui.LUIComponent,{otype:"Rui.ui.LPanel",m_oModuleTemplate:null,m_oHeaderTemplate:null,m_oBodyTemplate:null,m_oFooterTemplate:null,m_oMaskTemplate:null,m_oUnderlayTemplate:null,m_oCloseIconTemplate:null,m_oIFrameTemplate:null,element:null,header:null,body:null,footer:null,id:null,imageRoot:L.IMG_ROOT,CONTEXT_TRIGGERS:[],createContainer:function(e){return this.el=Rui.ui.LPanel.superclass.createContainer.call(this,e),this.el||(this.el=Rui.get(this.createElement().cloneNode(!1)),this.id=this.id||this.el.id,this.element=this.el.dom),this.el&&(this.element=this.el.dom,_.setStyle(this.element,"visibility",""),null!=this.header&&this.cfg.setProperty("header",this.header),null!=this.footer&&this.cfg.setProperty("footer",this.footer),null!=this.body&&this.cfg.setProperty("body",this.body),this._renderHeader(this.el.dom),this._renderBody(this.el.dom),this._renderFooter(this.el.dom),this.initModuleOverlay(this.element)),this.el},initModuleOverlay:function(e){this.initModule(e),_.addClass(this.element,"L-overlay")},createElement:function(){return this.createModuleTemplate()},createModuleTemplate:function(){return this.m_oModuleTemplate||(this.m_oModuleTemplate=document.createElement("div"),this.m_oModuleTemplate.innerHTML='<div class="'+L.CSS_HEADER+'"></div><div class="'+L.CSS_BODY+'"></div><div class="'+L.CSS_FOOTER+'"></div>',this.m_oHeaderTemplate=this.m_oModuleTemplate.firstChild,this.m_oBodyTemplate=this.m_oHeaderTemplate.nextSibling,this.m_oFooterTemplate=this.m_oBodyTemplate.nextSibling),this.m_oModuleTemplate},createModuleHeader:function(){return this.m_oHeaderTemplate||this.createModuleTemplate(),this.m_oHeaderTemplate.cloneNode(!1)},createBody:function(){return this.m_oBodyTemplate||this.createModuleTemplate(),this.m_oBodyTemplate.cloneNode(!1)},createFooter:function(){return this.m_oFooterTemplate||this.createModuleTemplate(),this.m_oFooterTemplate.cloneNode(!1)},createEmptyElement:function(e){var t=document.getElementById(e);t||((t=document.createElement("div")).id=e,document.body.appendChild(t))},initModule:function(e,t){var i,s;if(null==this.cfg&&(this.cfg=new y(this)),this.isSecure&&(this.imageRoot=L.IMG_ROOT_SSL),"string"==typeof e&&(i=e,(e=document.getElementById(e))||((e=this.createModuleTemplate().cloneNode(!1)).id=i)),(this.element=e).id&&"undefined"===this.id&&(this.id=e.id),s=this.element.firstChild||this.m_oHeaderTemplate)for(var n=!1,r=!1,o=!1;1==s.nodeType&&(!n&&_.hasClass(s,L.CSS_HEADER)?(this.header=s,n=!0):!r&&_.hasClass(s,L.CSS_BODY)?(this.body=s,r=!0):!o&&_.hasClass(s,L.CSS_FOOTER)&&(this.footer=s,o=!0)),s=s.nextSibling;);},initResizeMonitor:function(){var e;Rui.browser.gecko&&Rui.platform.window?(e=this,setTimeout(function(){e._initResizeMonitor()},0)):this._initResizeMonitor()},_initResizeMonitor:function(){var e,t,i,s,n,r;function o(){L.textResizeEvent.fire()}Rui.browser.opera||(t=_.get("_ruiResizeMonitor"),s=this._supportsCWResize(),t||(t=document.createElement("iframe"),this.isSecure&&this.RESIZE_MONITOR_SECURE_URL&&Rui.browser.ie&&(t.src=this.RESIZE_MONITOR_SECURE_URL),s||(i=["<html><head><script ",'type="text/javascript">',"window.onresize=function(){window.parent.","Rui.ui.LPanel.textResizeEvent.","fire();};<","/script></head>","<body></body></html>"].join(""),t.src="data:text/html;charset=utf-8,"+encodeURIComponent(i)),t.id="_ruiResizeMonitor",t.title="Text Resize Monitor",t.style.position="absolute",t.style.visibility="hidden",(r=(n=document.body).firstChild)?n.insertBefore(t,r):n.appendChild(t),t.style.width="10em",t.style.height="10em",t.style.top=-1*t.offsetHeight+"px",t.style.left=-1*t.offsetWidth+"px",t.style.borderWidth="0",t.style.visibility="visible",Rui.useAccessibility()&&t.setAttribute("aria-hidden","false"),Rui.browser.webkit&&((e=t.contentWindow.document).open(),e.close())),t&&t.contentWindow&&(L.textResizeEvent.on(this.onDomResize,this,!0,{isCE:!0}),L.textResizeInitialized||(s&&(a.on(t.contentWindow,"resize",o,{isCE:!0})||a.on(t,"resize",o,{isCE:!0})),L.textResizeInitialized=!0),this.resizeMonitor=t))},_supportsCWResize:function(){var e=!0;return Rui.browser.gecko&&Rui.browser.gecko<=1.8&&!Rui.browser.msie&&(e=!1),e},_renderHeader:function(e){var t;e=this.el.dom||e,this.header&&!_.inDocument(this.header)&&((t=e.firstChild)?e.insertBefore(this.header,t):e.appendChild(this.header))},_renderBody:function(e){var t;e=this.el.dom||e,Rui.isNull(this.body)||_.inDocument(this.body)||(this.footer&&_.isAncestor(e,this.footer)?_.insertBefore(this.body,this.footer):("string"==typeof this.body&&(t=this.createBody(),this.body.nodeName?(t.innerHTML="",t.appendChild(this.body)):t.innerHTML=this.body,this.body=t),e.appendChild(this.body)))},_renderFooter:function(e){e=this.el.dom||e,this.footer&&!_.inDocument(this.footer)&&e.appendChild(this.footer)},getHeader:function(){return Rui.get(this.header)},getBody:function(){return Rui.get(this.body)},getFooter:function(){return Rui.get(this.footer)},setHeader:function(e){var t=this.header||(this.header=this.createModuleHeader());e.nodeName?(t.innerHTML="",t.appendChild(e)):t.innerHTML=e,Rui.useAccessibility()&&t.setAttribute("role","region"),this._rendered&&this._renderHeader(),this._applyContent("changeHeader",e)},appendToHeader:function(e){(this.header||(this.header=this.createModuleHeader())).appendChild(e),this._applyContent("changeHeader",e)},setBody:function(e){this._appendToBodyContent(e),this._rendered&&this._renderBody(),this._applyContent("changeBody",e)},_insertBody:function(e){this._appendToBodyContent(e),("undefinded"!=typeof e&&""==e||this._rendered)&&this._renderBody(),this._applyContent("changeBody",e)},_appendToBodyContent:function(e){var t=this.body||(this.body=this.createBody());e&&e.nodeName?(t.innerHTML="",t.appendChild(e)):t.innerHTML=e,Rui.useAccessibility()&&t.setAttribute("role","region")},_applyContent:function(e,t){this.fireEvent(e,{target:this,content:t}),this.fireEvent("changeContent",{target:this})},appendToBody:function(e){(this.body||(this.body=this.createBody())).appendChild(e),this._applyContent("changeBody",e)},setFooter:function(e){var t=this.footer||(this.footer=this.createFooter());e.nodeName?(t.innerHTML="",t.appendChild(e)):t.innerHTML=e,Rui.useAccessibility()&&t.setAttribute("role","region"),this._rendered&&this._renderFooter(),this._applyContent("changeFooter",e)},appendToFooter:function(e){(this.footer||(this.footer=this.createFooter())).appendChild(e),this._applyContent("changeFooter",e)},show:function(e){var t;this.cfg.setProperty("visible",!0),Rui.useAccessibility()&&this.el.setAttribute("aria-hidden","false"),Rui.platform.isMobile&&(e=!1),!0===e&&(t=Rui.util.LDom.getX(this.element),Rui.util.LDom.setX(this.element,0),e=new Rui.fx.LAnim({el:this.element.id,attributes:{left:{from:0,to:t}},duration:.2})),Rui.ui.LPanel.superclass.show.call(this,e)},hideAnim:function(e){this.hide(e)},hide:function(e){var t,i;Rui.platform.isMobile&&(e=!1),e?!0===e?(t=Rui.util.LDom.getX(this.element),e=new Rui.fx.LAnim({el:this.element.id,attributes:{left:{from:t,to:0}},duration:.2}),i=this,e.on("complete",function(){i.cfg.setProperty("visible",!1),Rui.util.LDom.setX(i.element,t),Rui.useAccessibility()&&i.element.setAttribute("aria-hidden","true")}),e.animate()):Rui.ui.LPanel.superclass.hide.call(this,e):this.cfg&&(this.cfg.setProperty("visible",!1),Rui.useAccessibility()&&this.el.setAttribute("aria-hidden","true"))},isShow:function(){return Rui.get(this.element).isShow()},moveTo:function(e,t){this.cfg.setProperty("xy",[e,t])},doCenterOnDOMEvent:function(){this.cfg&&this.cfg.getProperty("visible")&&this.onCenter()},configAutoFillHeight:function(e,t,i){var s=t[0],n=this.cfg.getProperty("autofillheight");this.cfg.unsubscribeFromConfigEvent("height",this._autoFillOnHeightChange),L.textResizeEvent.unOn("height",this._autoFillOnHeightChange),n&&s!==n&&this[n]&&_.setStyle(this[n],"height",""),s&&(s=Rui.trim(s.toLowerCase()),this.cfg.subscribeToConfigEvent("height",this._autoFillOnHeightChange,this[s],this),L.textResizeEvent.on(this._autoFillOnHeightChange,this[s],this,{isCE:!0}),this.cfg.setProperty("autofillheight",s,!0))},configXY:function(e,t,i){var s=t[0],n=s[0],r=s[1];Rui._tabletData&&200<r&&(r=200),this.cfg.setProperty("x",n),this.cfg.setProperty("y",r),this.fireEvent("beforeMove",[n,r]),n=this.cfg.getProperty("x"),r=this.cfg.getProperty("y"),this.cfg.refireEvent("iframe"),this.fireEvent("move",[n,r])},configX:function(e,t,i){var s=t[0],n=this.cfg.getProperty("y");this.cfg.setProperty("x",s,!0),this.cfg.setProperty("y",n,!0),this.fireEvent("beforeMove",[s,n]),s=this.cfg.getProperty("x"),n=this.cfg.getProperty("y"),_.setX(this.element,s,!0),this.cfg.setProperty("xy",[s,n],!0),this.cfg.refireEvent("iframe"),this.fireEvent("move",[s,n])},configY:function(e,t,i){var s=this.cfg.getProperty("x"),n=t[0];Rui._tabletData&&200<n&&(n=200),this.cfg.setProperty("x",s,!0),this.cfg.setProperty("y",n,!0),this.fireEvent("beforeMove",[s,n]),s=this.cfg.getProperty("x"),n=this.cfg.getProperty("y"),_.setY(this.element,n,!0),this.cfg.setProperty("xy",[s,n],!0),this.cfg.refireEvent("iframe"),this.fireEvent("move",[s,n])},showIframe:function(){var e,t=this.iframe;t&&((e=this.element.parentNode)!=t.parentNode&&this._addToParent(e,t),t.style.display="block")},hideIframe:function(){this.iframe&&(this.iframe.style.display="none")},syncIframe:function(){var e,t=this.iframe,i=this.element;t&&(t.style.width=i.offsetWidth+6+"px",t.style.height=i.offsetHeight+6+"px",e=this.cfg.getProperty("xy"),Rui.isArray(e)&&!isNaN(e[0])&&!isNaN(e[1])||(this.syncPosition(),e=this.cfg.getProperty("xy")),_.setXY(t,[e[0]-3,e[1]-3]))},stackIframe:function(){var e;this.iframe&&(e=_.getStyle(this.element,"zIndex"),Rui.isUndefined(e)||isNaN(e)||_.setStyle(this.iframe,"zIndex",e-1))},configIframe:function(e,t,i){function s(){var e,t=this.iframe,i=this.element;t||(this.m_oIFrameTemplate||(this.m_oIFrameTemplate=document.createElement("iframe"),this.isSecure&&(this.m_oIFrameTemplate.src="javascript:false;"),Rui.browser.msie?(this.m_oIFrameTemplate.style.filter="alpha(opacity=0)",this.m_oIFrameTemplate.frameBorder=0):m_oIFrameTemplate.style.opacity="0",this.m_oIFrameTemplate.style.position="absolute",this.m_oIFrameTemplate.style.border="none",this.m_oIFrameTemplate.style.margin="0",this.m_oIFrameTemplate.style.padding="0",this.m_oIFrameTemplate.style.display="none"),t=this.m_oIFrameTemplate.cloneNode(!1),e=i.parentNode||document.body,this._addToParent(e,t),this.iframe=t),this.showIframe(),this.syncIframe(),this.stackIframe(),this._hasIframeEventListeners||(this.on("show",this.showIframe,this,!0),this.on("hide",this.hideIframe,this,!0),this.on("changeContent",this.syncIframe,this,!0),this._hasIframeEventListeners=!0)}t[0]?this.cfg.getProperty("visible")?s.call(this):this._iframeDeferred||(this.on("beforeShow",function(){s.call(this),this._iframeDeferred=!1},this,!0),this._iframeDeferred=!0):(this.hideIframe(),this._hasIframeEventListeners&&(this.unOn("show",this.showIframe,this),this.unOn("hide",this.hideIframe,this),this.unOn("changeContent",this.syncIframe,this),this._hasIframeEventListeners=!1))},configContext:function(e,t,i){var s,n,r,o,a=t[0],l=this.CONTEXT_TRIGGERS;a&&(s=a[0],n=a[1],r=a[2],o=a[3],l&&0<l.length&&(o=(o||[]).concat(l)),s&&("string"==typeof s&&this.cfg.setProperty("context",[document.getElementById(s),n,r,o],!0),n&&r&&this.align(n,r),this._contextTriggers&&this._processTriggers(this._contextTriggers,"unOn",this._alignOnTrigger),o&&(this._processTriggers(o,"on",this._alignOnTrigger),this._contextTriggers=o)))},_alignOnTrigger:function(e,t){this.align()},_findTriggerCE:function(e){var t=null;return e instanceof s?t=e:L._TRIGGER_MAP[e]&&(t=L._TRIGGER_MAP[e]),t},_processTriggers:function(e,t,i){for(var s,n,r=0,o=e.length;r<o;++r)s=e[r],(n=this._findTriggerCE(s))?n[t](i,this,!0):this[t](s,i)},align:function(i,e){var t,s,n,r=this.cfg.getProperty("context"),o=this,a="tl",l="tr",h="bl",u="br";function c(e,t){switch(i){case a:o.moveTo(t,e);break;case l:o.moveTo(t-s.offsetWidth,e);break;case h:o.moveTo(t,e-s.offsetHeight);break;case u:o.moveTo(t-s.offsetWidth,e-s.offsetHeight)}}if(r&&(t=r[0],s=this.element,o=this,i=i||r[1],e=e||r[2],s&&t))switch(n=_.getRegion(t),e){case a:c(n.top,n.left);break;case l:c(n.top,n.right);break;case h:c(n.bottom,n.left);break;case u:c(n.bottom,n.right)}},getConstrainedX:function(e){function t(){var e=h.cfg.getProperty("x")-f>s?s-u:s+n;return h.cfg.setProperty("x",e+f,!0),e}var i,s,n,r,o,a,l,h=this,u=h.element.offsetWidth,c=L.VIEWPORT_OFFSET,d=_.getViewportWidth(),f=_.getDocumentScrollLeft(),E=u+c<d,g=this.cfg.getProperty("context"),p=!1,v=e,y=function(){var e;return(h.cfg.getProperty("x")-f>s?o-c:r-c)<u&&(p?t():(t(),p=!0,e=y())),e};return this.cfg.getProperty("preventcontextoverlap")&&g&&{tltr:!0,blbr:!0,brbl:!0,trtl:!0}[g[1]+g[2]]?(E&&(i=g[0],s=_.getX(i)-f,n=i.offsetWidth,o=d-((r=s)+n),y()),v=this.cfg.getProperty("x")):E?(l=f+d-u-c,e<(a=f+c)?v=a:l<e&&(v=l)):v=c+f,v},getConstrainedY:function(e){function t(){var e=h.cfg.getProperty("y")-f>s?s-u:s+n;return h.cfg.setProperty("y",e+f,!0),e}var i,s,n,r,o,a,l,h=this,u=h.element.offsetHeight,c=L.VIEWPORT_OFFSET,d=_.getViewportHeight(),f=_.getDocumentScrollTop(),E=u+c<d,g=this.cfg.getProperty("context"),p=!1,v=e,y=function(){var e;return(h.cfg.getProperty("y")-f>s?o-c:r-c)<u&&(p?t():(t(),p=!0,e=y())),e};return this.cfg.getProperty("preventcontextoverlap")&&g&&{trbr:!0,tlbl:!0,bltl:!0,brtr:!0}[g[1]+g[2]]?(E&&(i=g[0],n=i.offsetHeight,s=_.getY(i)-f,o=d-((r=s)+n),y()),v=h.cfg.getProperty("y")):E?(l=f+d-u-c,e<(a=f+c)?v=a:l<e&&(v=l)):v=c+f,v},getConstrainedXY:function(e,t){return[this.getConstrainedX(e),this.getConstrainedY(t)]},onCenter:function(){this.centerCnt=this.centerCnt||0,this.centerLimitCnt=Rui.platform.isMobile?3:1e5,this.centerCnt<this.centerLimitCnt&&this.center(),this.centerCnt++},center:function(e){var t=Rui.get(this.element);1==this.cfg.getProperty("visible")&&t.removeClass("L-hidden");var i=t.getAlignToXY(e||document,"c-c");Rui.platform.isMobile&&i&&i[1]<0&&(i[1]=0),this.cfg.setProperty("xy",i),this.cfg.refireEvent("iframe")},syncPosition:function(){var e=_.getXY(this.element);this.cfg.setProperty("x",e[0],!0),this.cfg.setProperty("y",e[1],!0),this.cfg.setProperty("xy",e,!0)},onDomResize:function(e,t){var i=this,s=-1*i.resizeMonitor.offsetWidth,n=-1*i.resizeMonitor.offsetHeight;i.resizeMonitor.style.top=n+"px",i.resizeMonitor.style.left=s+"px",setTimeout(function(){i.syncPosition(),i.cfg.refireEvent("iframe"),i.cfg.refireEvent("context")},0)},_getComputedHeight:document.defaultView&&document.defaultView.getComputedStyle?function(e){var t,i=null;return e.ownerDocument&&e.ownerDocument.defaultView&&(t=e.ownerDocument.defaultView.getComputedStyle(e,""))&&(i=parseInt(t.height,10)),Rui.isNumber(i)?i:null}:function(e){var t=null;return e.style.pixelHeight&&(t=e.style.pixelHeight),Rui.isNumber(t)?t:null},_getPreciseHeight:function(e){var t,i=e.offsetHeight;return e.getBoundingClientRect&&(i=(t=e.getBoundingClientRect()).bottom-t.top),i},fillHeight:function(e){if(e){for(var t,i=this.innerElement||this.element,s=[this.header,this.body,this.footer],n=0,r=0,o=0,a=!1,l=0,h=s.length;l<h;l++)(t=s[l])&&(e!==t?r+=this._getPreciseHeight(t):a=!0);a&&((Rui.browser.msie||Rui.browser.opera)&&_.setStyle(e,"height","0px"),null===(n=this._getComputedHeight(i))&&(_.addClass(i,"L-override-padding"),n=i.clientHeight,_.removeClass(i,"L-override-padding")),o=n-r,_.setStyle(e,"height",o+"px"),0!=e.offsetHeight&&e.offsetHeight!=o&&(o-=e.offsetHeight-o,_.setStyle(e,"height",o+"px")))}},bringToTop:function(){var s=[],n=this.element;_.getElementsBy(function(e){var t=_.hasClass(e,"L-overlay"),i=Rui.ui.LPanel;t&&!_.isAncestor(n,e)&&(i&&_.hasClass(e,"L-panel")?s[s.length]=e:s[s.length]=e.parentNode)},"DIV",document.body),s.sort(function(e,t){var i=_.getStyle(e,"zIndex"),s=_.getStyle(t,"zIndex"),n=!i||isNaN(i)?0:parseInt(i,10),r=!s||isNaN(s)?0:parseInt(s,10);return r<n?-1:n<r?1:0});var e,t,i,r=s[0];r==document.body&&(r=s[1]),r&&(i=_.getStyle(r,"zIndex"),isNaN(i)||(e=!1,r!=n?e=!0:1<s.length&&(t=_.getStyle(s[1],"zIndex"),isNaN(t)||i!=t||(e=!0)),e&&this.cfg.setProperty("zindex",parseInt(i,10)+2)))},doRender:function(e){Rui.ui.LPanel.superclass.doRender.call(this,e),_.addClass(this.element,"L-panel"),this.buildWrapper(),"string"==typeof this.id&&_.addClass(this.element,this.id),this.defaultCss&&_.addClass(this.element,this.defaultCss),this.fireEvent("init",{target:this})},afterRender:function(e){Rui.ui.LPanel.superclass.afterRender.call(this,e)},createHeader:function(e,t){!this.header&&this.cfg.getProperty("draggable")&&this.setHeader("&#160;")},restoreOriginalWidth:function(e,t,i){var s=i[0],n=i[1],r=this.cfg;r.getProperty("width")==n&&r.setProperty("width",s),this.unOn("hide",this.restoreOriginalWidth,i)},_onElementFocus:function(e){var t=a.getTarget(e);if(t!==this.element&&!_.isAncestor(this.element,t)&&i==this)try{this.firstElement?Rui.later(100,this,function(){try{this.firstElement.focus()}catch(e){}}):this._modalFocus?this._modalFocus.focus():this.innerElement.focus()}catch(e){try{t!==document&&t!==document.body&&t!==window&&t.blur()}catch(e){}}},_addFocusHandlers:function(e,t){this.firstElement||(Rui.browser.webkit||Rui.browser.opera?this._modalFocus||this._createHiddenFocusElement():this.innerElement.tabIndex=0),this.setTabLoop(this.firstElement,this.lastElement),a.onFocus(document.documentElement,this._onElementFocus,this,!0),i=this},_createHiddenFocusElement:function(){var e=document.createElement("button");e.style.height="1px",e.style.width="1px",e.style.position="absolute",e.style.left="-10000em",e.style.opacity=0,e.tabIndex="-1",this.innerElement.appendChild(e),this._modalFocus=e},_removeFocusHandlers:function(e,t){a.removeFocusListener(document.documentElement,this._onElementFocus,this),i==this&&(i=null)},focusFirst:function(e,t,i){var s=this.firstElement;if(t&&t[1]&&a.stopEvent(t[1]),s)try{s.focus()}catch(e){}},focusLast:function(e,t,i){var s=this.lastElement;if(t&&t[1]&&a.stopEvent(t[1]),s)try{s.focus()}catch(e){}},setTabLoop:function(e,t){var i=this.preventBackTab,s=this.preventTabOut;i&&(i.disable(),this.unOn("show",i.enable,i),this.unOn("hide",i.disable,i),i=this.preventBackTab=null),s&&(s.disable(),this.unOn("show",s.enable,s),this.unOn("hide",s.disable,s),s=this.preventTabOut=null),e&&(this.preventBackTab=new n(e,{shift:!0,keys:9},{fn:this.focusLast,scope:this,correctScope:!0}),i=this.preventBackTab,this.on("show",i.enable,i,!0),this.on("hide",i.disable,i,!0)),t&&(this.preventTabOut=new n(t,{shift:!1,keys:9},{fn:this.focusFirst,scope:this,correctScope:!0}),s=this.preventTabOut,this.on("show",s.enable,s,!0),this.on("hide",s.disable,s,!0))},getFocusableElements:function(e){e=e||this.innerElement;for(var t=["a","button","select","textarea","input","iframe"],i={},s=0;s<t.length;s++)i[t[s]]=!0;return _.getElementsBy(function(e){return!(!e.focus||"hidden"===e.type||e.disabled||!i[e.tagName.toLowerCase()])},null,e)},setFirstLastFocusable:function(){this.firstElement=null,this.lastElement=null;var e=this.getFocusableElements();0<(this.focusableElements=e).length&&(this.firstElement=e[0],this.lastElement=e[e.length-1]),this.cfg.getProperty("modal")&&this.setTabLoop(this.firstElement,this.lastElement)},initComponent:function(e){Rui.ui.LPanel.superclass.initComponent.call(this),this.isSecure&&(this.imageRoot=L.IMG_ROOT_SSL),this.id||(this.id=Rui.useFixedId()?Rui.id(this.el,"LPanel-"+this.id):Rui.id())},initEvents:function(){Rui.ui.LPanel.superclass.initEvents.call(this);var e=s.LIST;this.createEvent("beforeInit"),this.createEvent("init"),this.createEvent("beforeRender"),this.renderEvent.signature=e,this.createEvent("changeHeader"),this.createEvent("changeBody"),this.createEvent("changeFooter"),this.createEvent("changeContent"),this.createEvent("beforeShow"),this.createEvent("beforeHide"),this.createEvent("showMask"),this.createEvent("hideMask"),this.dragEvent=this.createEvent("drag",{isCE:!0}),this.dragEvent.signature=e,this.createEvent("beforeMove"),this.on("showMask",this._addFocusHandlers,this,!0),this.on("hideMask",this._removeFocusHandlers,this,!0),this.on("beforeRender",this.createHeader,this,!0),this.renderEvent.on(function(){this.setFirstLastFocusable(),this.on("changeContent",this.setFirstLastFocusable,this,!0)},this,!0,{isCE:!0}),this.on("show",this.focusFirst,this,!0)},_initConfig:function(){this.cfg.addProperty(DEFAULT_CONFIG.VISIBLE.key,{handler:this.configVisible,value:DEFAULT_CONFIG.VISIBLE.value,validator:DEFAULT_CONFIG.VISIBLE.validator}),this.cfg.addProperty(DEFAULT_CONFIG.EFFECT.key,{suppressEvent:DEFAULT_CONFIG.EFFECT.suppressEvent,supercedes:DEFAULT_CONFIG.EFFECT.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.MONITOR_RESIZE.key,{handler:this.configMonitorResize,value:DEFAULT_CONFIG.MONITOR_RESIZE.value}),this.cfg.addProperty(DEFAULT_CONFIG.X.key,{handler:this.configX,validator:DEFAULT_CONFIG.X.validator,suppressEvent:DEFAULT_CONFIG.X.suppressEvent,supercedes:DEFAULT_CONFIG.X.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.Y.key,{handler:this.configY,validator:DEFAULT_CONFIG.Y.validator,suppressEvent:DEFAULT_CONFIG.Y.suppressEvent,supercedes:DEFAULT_CONFIG.Y.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.XY.key,{handler:this.configXY,suppressEvent:DEFAULT_CONFIG.XY.suppressEvent,supercedes:DEFAULT_CONFIG.XY.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.CONTEXT.key,{handler:this.configContext,suppressEvent:DEFAULT_CONFIG.CONTEXT.suppressEvent,supercedes:DEFAULT_CONFIG.CONTEXT.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.FIXED_CENTER.key,{handler:this.configFixedCenter,value:DEFAULT_CONFIG.FIXED_CENTER.value,validator:DEFAULT_CONFIG.FIXED_CENTER.validator,supercedes:DEFAULT_CONFIG.FIXED_CENTER.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.AUTO_FILL_HEIGHT.key,{handler:this.configAutoFillHeight,value:DEFAULT_CONFIG.AUTO_FILL_HEIGHT.value,validator:this._validateAutoFill,suppressEvent:DEFAULT_CONFIG.AUTO_FILL_HEIGHT.suppressEvent,supercedes:DEFAULT_CONFIG.AUTO_FILL_HEIGHT.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.ZINDEX.key,{handler:this.configzIndex,value:DEFAULT_CONFIG.ZINDEX.value}),this.cfg.addProperty(DEFAULT_CONFIG.IFRAME.key,{handler:this.configIframe,value:DEFAULT_CONFIG.IFRAME.value,validator:DEFAULT_CONFIG.IFRAME.validator,supercedes:DEFAULT_CONFIG.IFRAME.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.key,{value:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.value,validator:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.validator,supercedes:DEFAULT_CONFIG.PREVENT_CONTEXT_OVERLAP.supercedes})},initDefaultConfig:function(){Rui.ui.LPanel.superclass.initDefaultConfig.call(this),this._initConfig(),this.cfg.addProperty("header",{handler:this.configHeader,value:this.header}),this.cfg.addProperty("footer",{handler:this.configFooter,value:this.footer}),this.cfg.addProperty(DEFAULT_CONFIG.CLOSE.key,{handler:this.configClose,value:DEFAULT_CONFIG.CLOSE.value,validator:DEFAULT_CONFIG.CLOSE.validator,supercedes:DEFAULT_CONFIG.CLOSE.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.DRAGGABLE.key,{handler:this.configDraggable,value:!!Rui.dd.LDD,validator:DEFAULT_CONFIG.DRAGGABLE.validator,supercedes:DEFAULT_CONFIG.DRAGGABLE.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.DRAG_ONLY.key,{value:DEFAULT_CONFIG.DRAG_ONLY.value,validator:DEFAULT_CONFIG.DRAG_ONLY.validator,supercedes:DEFAULT_CONFIG.DRAG_ONLY.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.UNDERLAY.key,{handler:this.configUnderlay,value:DEFAULT_CONFIG.UNDERLAY.value,supercedes:DEFAULT_CONFIG.UNDERLAY.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.MODAL.key,{handler:this.configModal,value:DEFAULT_CONFIG.MODAL.value,validator:DEFAULT_CONFIG.MODAL.validator,supercedes:DEFAULT_CONFIG.MODAL.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.KEY_LISTENERS.key,{handler:this.configKeyListeners,suppressEvent:DEFAULT_CONFIG.KEY_LISTENERS.suppressEvent,supercedes:DEFAULT_CONFIG.KEY_LISTENERS.supercedes}),this.cfg.addProperty(DEFAULT_CONFIG.STRINGS.key,{value:DEFAULT_CONFIG.STRINGS.value,handler:this.configStrings,validator:DEFAULT_CONFIG.STRINGS.validator,supercedes:DEFAULT_CONFIG.STRINGS.supercedes})},_validateAutoFillHeight:function(e){return!e||Rui.isString(e)&&L.STD_MOD_RE.test(e)},configHeader:function(e,t,i){var s,n,r;this.header&&"string"==typeof this.header?((s=this.createModuleHeader()).innerHTML=this.header,this.header=s):null==this.header||_.hasClass(this.header,L.CSS_HEADER)||(n=this.header,r=this.header=this.createModuleHeader(),n.nodeName?(r.innerHTML="",r.appendChild(n)):r.innerHTML=n,this._rendered&&this._renderHeader(),this._applyContent("changeHeader",n))},configFooter:function(e,t,i){var s,n,r;this.footer&&"string"==typeof this.footer?((s=this.createFooter()).innerHTML=this.footer,this.footer=s):null==this.footer||_.hasClass(this.footer,L.CSS_FOOTER)||(n=this.footer,r=this.footer=this.createFooter(),n.nodeName?(r.innerHTML="",r.appendChild(n)):r.innerHTML=n,this._rendered&&this._renderFooter(),this._applyContent("changeFooter",n))},configClose:function(e,t,i){var s=t[0],n=this.close,r=this.cfg.getProperty("strings");s?!n||this.close?(this.m_oCloseIconTemplate||(this.m_oCloseIconTemplate=document.createElement("a"),this.m_oCloseIconTemplate.className="container-close",this.m_oCloseIconTemplate.href="#"),n=this.m_oCloseIconTemplate.cloneNode(!0),this.innerElement.appendChild(n),n.innerHTML=r&&r.close?r.close:"&#160;",a.on(n,"click",this._doClose,this,!0),this.close=n,Rui.useAccessibility()&&this.close.setAttribute("aria-controls",this.el.id)):n.style.display="block":n&&(n.style.display="none")},_doClose:function(e){a.preventDefault(e),this.hide(!1)},configDraggable:function(e,t,i){if(t[0]){if(!Rui.dd.LDD)return void this.cfg.setProperty("draggable",!1);this.header&&(_.setStyle(this.header,"cursor","move"),this.registerDragDrop())}else this.dd&&this.dd.unreg(),this.header&&_.setStyle(this.header,"cursor","auto")},configUnderlay:function(e,t,i){return},configModal:function(e,t,i){t[0]?this._hasModalityEventListeners||(this.on("beforeShow",this.buildMask,this,!0),this.on("beforeShow",this.bringToTop,this,!0),this.on("beforeShow",this.showMask,this,!0),this.on("hide",this.hideMask,this,!0),L.windowResizeEvent.on(this.sizeMask,this,!0,{isCE:!0}),this._hasModalityEventListeners=!0):this._hasModalityEventListeners&&(this.cfg.getProperty("visible")&&(this.hideMask(),this.removeMask()),this.unOn("beforeShow",this.buildMask,this),this.unOn("beforeShow",this.bringToTop,this),this.unOn("beforeShow",this.showMask,this),this.unOn("hide",this.hideMask,this),L.windowResizeEvent.unOn(this.sizeMask,this),this._hasModalityEventListeners=!1)},removeMask:function(){var e,t=this.mask;t&&(this.hideMask(),(e=t.parentNode)&&e.removeChild(t),this.mask=null)},configKeyListeners:function(e,t,i){var s,n,r,o=t[0];if(o)if(o instanceof Array)for(n=o.length,r=0;r<n;r++)s=o[r],this.hasEvent("show",s.enable,s)||this.on("show",s.enable,s,!0),this.hasEvent("hide",s.disable,s)||(this.on("hide",s.disable,s,!0),this.on("destroy",s.disable,s,!0));else!0===o&&(o=new Rui.util.LKeyListener(this.element,{keys:[Rui.util.LKey.KEY.ESCAPE]},{fn:function(e){this.hide()},scope:this,correctScope:!0})),this.hasEvent("show",o.enable,o)||this.on("show",o.enable,o,!0),this.hasEvent("hide",o.disable,o)||(this.on("hide",o.disable,o,!0),this.on("destroy",o.disable,o,!0))},configStrings:function(e,t,i){var s=Rui.merge(DEFAULT_CONFIG.STRINGS.value,t[0]);this.cfg.setProperty(DEFAULT_CONFIG.STRINGS.key,s,!0)},_setHeight:function(e,t,i){Rui.ui.LPanel.superclass._setHeight.apply(this,arguments),this.cfg.refireEvent("iframe")},_setWidth:function(e,t,i){Rui.ui.LPanel.superclass._setWidth.apply(this,arguments),this.cfg.refireEvent("iframe")},_autoFillOnHeightChange:function(e,t,i){this.delayfillHeight||(this.delayfillHeight=new Rui.util.LDelayedTask(function(){this.fillHeight(i),this.delayfillHeight=null},this),this.delayfillHeight.delay(100)),r&&this.sizeUnderlay()},_setTop:function(e,t,i){var s=t[0];this.element.style.top=s+"px"},_setLeft:function(e,t,i){var s=t[0];this.element.style.left=s+"px"},configFixedCenter:function(e,t,i){var s=t[0],n=y.alreadySubscribed,r=L.windowResizeEvent,o=L.windowScrollEvent;s?(this.onCenter(),this.hasEvent("beforeShow",this.onCenter,this)||this.on("beforeShow",this.onCenter,this,!0),n(r,this.doCenterOnDOMEvent,this)||r.on(this.doCenterOnDOMEvent,this,!0,{isCE:!0}),n(o,this.doCenterOnDOMEvent,this)||o.on(this.doCenterOnDOMEvent,this,!0,{isCE:!0})):(this.unOn("beforeShow",this.onCenter,this),r.unOn(this.doCenterOnDOMEvent,this),o.unOn(this.doCenterOnDOMEvent,this))},configzIndex:function(e,t,i){var s;this.configzIndexOverlay(e,t,i),!this.mask&&!0!==this.cfg.getProperty("modal")||((s=_.getStyle(this.element,"zIndex"))&&!isNaN(s)||(s=0),0===s?this.cfg.setProperty("zIndex",1):this.stackMask())},configzIndexOverlay:function(e,t,i){var s=t[0],n=this.element;s||(s=_.getStyle(n,"zIndex"))&&!isNaN(s)||(s=0),(this.iframe||!0===this.cfg.getProperty("iframe"))&&s<=0&&(s=1),Rui._tabletViewerEl&&(s+=10),_.setStyle(n,"zIndex",s),this.cfg.setProperty("zIndex",s,!0),this.iframe&&this.stackIframe()},buildWrapper:function(){this.innerElement=this.element;var e="L-panel-container";_.addClass(this.element,e)},setTop:function(e){this.cfg.setProperty("top",e)},setLeft:function(e){this.cfg.setProperty("left",e)},sizeUnderlay:function(){var e,t=this.underlay;t&&(e=this.element,t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px")},registerDragDrop:function(){var a=this;if(this.header){if(!Rui.dd.LDD)return;var e=!0===this.cfg.getProperty("dragonly");this.dd=new Rui.dd.LDD({id:this.element.id,group:this.id,attributes:{dragOnly:e}}),this.header.id||(this.header.id=this.id+"_h"),this.dd.startDrag=function(){var e,t,i,s,n,r,o;6==Rui.browser.msie&&_.addClass(a.element,"drag"),a.cfg.getProperty("constraintoviewport")?(e=L.VIEWPORT_OFFSET,t=a.element.offsetHeight,i=a.element.offsetWidth,s=_.getViewportWidth(),n=_.getViewportHeight(),r=_.getDocumentScrollLeft(),o=_.getDocumentScrollTop(),t+e<n?(this.minY=o+e,this.maxY=o+n-t-e):(this.minY=o+e,this.maxY=o+e),i+e<s?(this.minX=r+e,this.maxX=r+s-i-e):(this.minX=r+e,this.maxX=r+e),this.constrainX=!0,this.constrainY=!0):(this.constrainX=!1,this.constrainY=!1),a.dragEvent.fire("startDrag",arguments)},this.dd.onDrag=function(){a.syncPosition(),a.cfg.refireEvent("iframe"),Rui.platform.mac&&Rui.browser.gecko&&a.showMacGeckoScrollbars(),a.dragEvent.fire("onDrag",arguments)},this.dd.endDrag=function(){6==Rui.browser.msie&&_.removeClass(a.element,"drag"),a.dragEvent.fire("endDrag",arguments),a.fireEvent("move",a.cfg.getProperty("xy"))},this.dd.setHandleElId(this.header.id),this.dd.addInvalidHandleType("INPUT"),this.dd.addInvalidHandleType("SELECT"),this.dd.addInvalidHandleType("TEXTAREA")}},buildMask:function(){var e=this.mask;e||(this.m_oMaskTemplate||(this.m_oMaskTemplate=document.createElement("div"),this.m_oMaskTemplate.className="mask",this.m_oMaskTemplate.innerHTML="&#160;"),(e=this.m_oMaskTemplate.cloneNode(!0)).id=this.id+"_mask",document.body.insertBefore(e,document.body.firstChild),this.mask=e,Rui.browser.gecko&&Rui.platform.mac&&_.addClass(this.mask,"block-scrollbars"),this.stackMask())},hideMask:function(){this.cfg.getProperty("modal")&&this.mask&&(this.mask.style.display="none",_.removeClass(document.body,"masked"),this.fireEvent("hideMask",{target:this}))},showMask:function(){this.cfg.getProperty("modal")&&this.mask&&(_.addClass(document.body,"masked"),this.sizeMask(),this.mask.style.display="block",this.fireEvent("showMask",{target:this}))},sizeMask:function(){var e,t;this.mask&&(e=_.getViewportWidth(),t=_.getViewportHeight(),this.mask.style.width="100%",this.mask.offsetWidth>e&&(this.mask.style.width=e+"px"),this.mask.style.height="100%",this.mask.offsetHeight>t&&(this.mask.style.height=t+"px"),Rui._tabletData&&(this.mask.style.height="110%"))},stackMask:function(){var e;this.mask&&(e=_.getStyle(this.element,"zIndex"),Rui.isUndefined(e)||isNaN(e)||_.setStyle(this.mask,"zIndex",e-1))},configVisible:function(e,t,i){var s,n,r,o,a,l,h,u,c,d=t[0],f=_.getStyle(this.element,"visibility"),E=this.cfg.getProperty("effect"),g=[],p=Rui.platform.mac&&Rui.browser.gecko,v=y.alreadySubscribed;if("inherit"==f){for(r=this.element.parentNode;9!=r.nodeType&&11!=r.nodeType&&"inherit"==(f=_.getStyle(r,"visibility"));)r=r.parentNode;"inherit"==f&&(f="visible")}if(E)if(E instanceof Array)for(u=E.length,o=0;o<u;o++)s=E[o],g[g.length]=s.effect(this,s.duration);else g[g.length]=E.effect(this,E.duration);if(d)if(p&&this.showMacGeckoScrollbars(),E){if(d&&("visible"!=f||""===f))for(this.fireEvent("beforeShow",{target:this}),c=g.length,a=0;a<c;a++)n=g[a],0!==a||v(n.animateInCompleteEvent,this.fireEvent("show",{target:this}),this)||n.animateInCompleteEvent.on(this.fireEvent("show",{target:this}),this,!0),n.animateIn()}else _.removeClass(this.element,"L-hidden"),"visible"!=f||""===f?(this.fireEvent("beforeShow",{target:this}),this.cfg.refireEvent("iframe")):this.fireEvent("beforeShow",{target:this});else if(p&&this.hideMacGeckoScrollbars(),E)if("visible"==f)for(this.fireEvent("beforeHide",{target:this}),c=g.length,l=0;l<c;l++)h=g[l],0!==l||v(h.animateOutCompleteEvent,this.fireEvent("hide",{target:this}),this)||h.animateOutCompleteEvent.on(this.fireEvent("hide",{target:this}),this,!0,{isCE:!0}),h.animateOut();else""===f&&_.addClass(this.element,"L-hidden");else _.addClass(this.element,"L-hidden"),"visible"!=f&&""!==f||(this.fireEvent("beforeHide",{target:this}),this.fireEvent("hide",{target:this}))},configMonitorResize:function(e,t,i){t[0]?this.initResizeMonitor():(L.textResizeEvent.unOn(this.onDomResize,this),this.resizeMonitor=null)},_onSetBody:function(e){this.body||this.setBody("")},toast:function(e,t){_.toast(e,document.body,t)},destroy:function(){this.iframe&&this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,L.windowResizeEvent.unOn(this.sizeMask,this),L.windowScrollEvent.unOn(this.doCenterOnDOMEvent,this),L.textResizeEvent.unOn(this._autoFillOnHeightChange,this),this.removeMask(),this.close&&a.purgeElement(this.close);var e=null;for(m in this.element&&(a.purgeElement(this.element,!0),e=this.element.parentNode),e&&e.removeChild(this.element),this.element&&Rui.get(this.element).removeNode(),this.header&&Rui.get(this.header).removeNode(),this.body&&Rui.get(this.body).removeNode(),this.footer&&Rui.get(this.footer).removeNode(),L.textResizeEvent.unOn(this.onDomResize,this),this.cfg.destroy(),this.cfg=null,this.fireEvent("destroy",{target:this}),this.unOnAll(),delete this.__DU_events,delete this.__DU_subscribers,this)this[m]=null,delete this[m];Rui.ui.LPanel.superclass.destroy.call(this)},toString:function(){return"LPanel "+this.id}})}(),Rui.namespace("Rui.ui"),function(){Rui.ui.LDialog=function(e){e=e||{},e=Rui.applyIf(e,Rui.getConfig().getFirst("$.ext.dialog.defaultProperties")),this.simpleForm=null,Rui.ui.LDialog.superclass.constructor.call(this,e),this.validators=e?e.validators:validators,this.callback=e?e.callback:this.callback};var c=Rui.util.LEvent,y=Rui.util.LDom,n=Rui.ui.LDialog,d=Rui.ui.LButton,t="beforeSubmit",i="submit",l="manualSubmit",h="asyncSubmit",u="formSubmit",e="cancel",s="validate",r={POST_METHOD:{key:"postmethod",value:"none"},BUTTONS:{key:"buttons",value:"none",supercedes:["visible"]},HIDEAFTERSUBMIT:{key:"hideaftersubmit",value:!0}};function f(){var e,t,i,s=this._buttons;if(Rui.isArray(s)&&0<(e=s.length))for(i=e-1;t=s[i],d&&t instanceof d?t.destroy():"BUTTON"==t.tagName.toUpperCase()&&(c.purgeElement(t),c.purgeElement(t,!1)),i--;);}n.CSS_DIALOG="L-dialog",Rui.extend(Rui.ui.LDialog,Rui.ui.LPanel,{otype:"Rui.ui.LDialog",form:null,initDefaultConfig:function(){Rui.ui.LDialog.superclass.initDefaultConfig.call(this),this.callback={success:null,failure:null,argument:null},this.cfg.addProperty(r.POST_METHOD.key,{handler:this.configPostMethod,value:r.POST_METHOD.value,validator:function(e){return"form"==e||"async"==e||"none"==e||"manual"==e}}),this.cfg.addProperty(r.HIDEAFTERSUBMIT.key,{value:r.HIDEAFTERSUBMIT.value}),this.cfg.addProperty(r.BUTTONS.key,{handler:this.configButtons,value:r.BUTTONS.value,supercedes:r.BUTTONS.supercedes})},initEvents:function(){Rui.ui.LDialog.superclass.initEvents.call(this),this.createEvent(t),this.createEvent(i),this.createEvent(l),this.createEvent(h),this.createEvent(u),this.createEvent(e),this.createEvent(s),this.cfg.setProperty("visible",!1),this.on("beforeHide",this.blurButtons,this,!0),this.on("changeBody",this.registerForm,this,!0)},createContainer:function(e){return this.el=Rui.ui.LDialog.superclass.createContainer.call(this,e),this._createDialog(),this.el},_createDialog:function(){y.addClass(this.element,n.CSS_DIALOG),Rui.useAccessibility()&&this.el.setAttribute("role","dialog"),this.fireEvent("beforeRender",{target:this})},initComponent:function(e){this.id=Rui.useFixedId()?"LDialog-"+(e.id||e.applyTo):Rui.id(),Rui.ui.LDialog.superclass.initComponent.call(this,e),e&&this.cfg.applyConfig(e,!0)},doSubmit:function(){var e,t,i,s,n=Rui.LConnect,r=this.form,o=!1,a=!1;switch(this.cfg.getProperty("postmethod")){case"async":if(0<(t=(e=r.elements).length)){i=t-1;do{if("file"==e[i].type){o=!0;break}}while(i--)}o&&Rui.browser.msie&&this.isSecure&&(a=!0),s=this._getFormAttributes(r),n.setForm(r,o,a),n.asyncRequest(s.method,s.action,this.callback,null,{isFileUpload:o}),this.fireEvent(h,{target:this});break;case"form":r.submit(),this.fireEvent(u,{target:this});break;case"none":case"manual":this.fireEvent(l,{target:this})}},_getFormAttributes:function(e){var t,i,s={method:null,action:null};return e&&(e.getAttributeNode?(t=e.getAttributeNode("action"),i=e.getAttributeNode("method"),t&&(s.action=t.value),i&&(s.method=i.value)):(s.action=e.getAttribute("action"),s.method=e.getAttribute("method"))),s.method=(Rui.isString(s.method)?s.method:"POST").toUpperCase(),s.action=Rui.isString(s.action)?s.action:"",s},registerForm:function(){var e=this.element.getElementsByTagName("form")[0];if(this.form){if(this.form==e&&y.isAncestor(this.element,this.form))return;c.purgeElement(this.form),this.form=null}!e&&this.body&&((e=document.createElement("form")).name="frm_"+this.id,this.body.appendChild(e)),e&&(this.form=e,c.on(e,"submit",this._submitHandler,this,!0));var t=this.form?this.form.name||this.form.id:this.validatorManager?this.validatorManager.id:null;null!=t&&(this.simpleForm=new Rui.ui.form.LForm(t,{validators:this.validators,validatorManager:this.validatorManager}),null==this.validatorManager&&(this.validatorManager=this.simpleForm.validatorManager))},_submitHandler:function(e){c.stopEvent(e),this.submit(),this.form.blur()},setTabLoop:function(e,t){e=e||this.firstButton,t=this.lastButton||t,n.superclass.setTabLoop.call(this,e,t)},setFirstLastFocusable:function(){n.superclass.setFirstLastFocusable.call(this);var e,t,i,s=this.focusableElements;if(this.firstFormElement=null,this.lastFormElement=null,this.form&&s&&0<s.length){for(t=s.length,e=0;e<t;++e)if(i=s[e],this.form===i.form){this.firstFormElement=i;break}for(e=t-1;0<=e;--e)if(i=s[e],this.form===i.form){this.lastFormElement=i;break}}},configButtons:function(e,t,i){var s,n,r,o=t[0];if(f.call(this),this._buttons=null,Rui.isArray(o)){(r=document.createElement("span")).id=Rui.useFixedId()?"LDialog-btnGrp-"+this.id:Rui.id(),r.className="button-group",n=o.length,this._buttons=[],this.defaultButton=null;for(var a=0;a<n;a++){var l,h,u=o[a];d?(l=r.id+(u.id||u.text),!(h={label:u.text,id:l,renderTo:r})===u.disableDbClick&&(h.disableDbClick=!1),(s=new d(h)).appendTo(r),u.isDefault&&(s.el.addClass("default"),this.defaultButton=s),Rui.isFunction(u.handler)?s.on("click",u.handler,this,!0):Rui.isObject(u.handler)&&Rui.isFunction(u.handler.fn)&&s.on("click",u.handler.fn,u.handler.scope||this,!0)):((s=document.createElement("button")).setAttribute("type","button"),u.isDefault&&(s.className="default",this.defaultButton=s),s.innerHTML=u.text,Rui.isFunction(u.handler)?c.on(s,"click",u.handler,this,!0):Rui.isObject(u.handler)&&Rui.isFunction(u.handler.fn)&&c.on(s,"click",u.handler.fn,Rui.isUndefined(u.handler.obj)?this:u.handler.obj,u.handler.scope||this),r.appendChild(s)),this._buttons.push(s),0===a&&(this.firstButton=s),a==n-1&&(this.lastButton=s)}this.setFooter(r),y.inDocument(this.element)&&!y.isAncestor(this.innerElement,this.footer)&&this.innerElement.appendChild(this.footer),this.buttonSpan=r}else(r=this.buttonSpan)&&this.footer&&(this.footer.removeChild(r),this.buttonSpan=null,this.firstButton=null,this.lastButton=null,this.defaultButton=null);this.setFirstLastFocusable(),this.cfg.refireEvent("iframe"),this.cfg.refireEvent("underlay")},getButtons:function(){return this._buttons||null},setButtons:function(e){f.call(this),this.cfg.setProperty(r.BUTTONS.key,e)},focusFirst:function(e,t,i){var s=this.firstFormElement;if(t&&t[1]&&c.stopEvent(t[1]),s)try{s.focus()}catch(e){}else this.focusFirstButton()},focusLast:function(e,t,i){var s=this.cfg.getProperty("buttons"),n=this.lastFormElement;if(t&&t[1]&&c.stopEvent(t[1]),s&&Rui.isArray(s))this.focusLastButton();else if(n)try{n.focus()}catch(e){}},focusDefaultButton:function(){try{this.defaultButton.focus()}catch(e){}},blurButtons:function(){var e,t,i,s=this.cfg.getProperty("buttons");if(s&&Rui.isArray(s)&&0<(e=s.length)){i=e-1;do{if(t=s[i])try{t.blur()}catch(e){}}while(i--)}},focusFirstButton:function(){var e,t=this._buttons;if(t&&Rui.isArray(t)&&(e=t[0]))try{e.focus()}catch(e){}},focusLastButton:function(){var e,t,i=this._buttons;if(i&&Rui.isArray(i)&&0<(e=i.length)){t=i[e-1];try{t.focus()}catch(e){}}},configPostMethod:function(e,t,i){this.registerForm()},validate:function(){var e=!0;return null!=this.validatorManager&&null!=this.simpleForm&&(e=this.simpleForm.validate()),e=1==e?this.fireEvent(s,{target:this}):e},submit:function(e){return!!this.validate()&&(this.fireEvent(t,{target:this}),this.doSubmit(),this.fireEvent(i,{target:this}),this.cfg.getProperty("hideaftersubmit")&&this.hide(e),!0)},clearInvalid:function(){this.simpleForm&&this.simpleForm.clearInvalid()},cancel:function(e){this.hideAnim(e),this.fireEvent("cancel",{type:"cancel",target:this,isAnim:e})},_doClose:function(e){this.cancel(!1)},getData:function(){var e,t,i,s,n,r,o,a,l,h,u,c,d,f,E,g,p=this.form;function v(e){var t=e.tagName.toUpperCase();return("INPUT"==t||"TEXTAREA"==t||"SELECT"==t)&&e.name==s}if(p)for(t=(e=p.elements).length,i={},E=0;E<t;E++)if(s=e[E].name,0<(r=(n=y.getElementsBy(v,"*",p)).length))if(1==r)switch(o=(n=n[0]).type,n.tagName.toUpperCase()){case"INPUT":"checkbox"==o?i[s]=n.checked:"radio"!=o&&(i[s]=n.value);break;case"TEXTAREA":i[s]=n.value;break;case"SELECT":for(l=(a=n.options).length,h=[],g=0;g<l;g++)(u=a[g]).selected&&((c=u.value)&&""!==c||(c=u.text),h[h.length]=c);i[s]=h}else switch(o=n[0].type){case"radio":for(g=0;g<r;g++)if((d=n[g]).checked){i[s]=d.value;break}break;case"checkbox":for(h=[],g=0;g<r;g++)(f=n[g]).checked&&(h[h.length]=f.value);i[s]=h}return i},destroy:function(){f.call(this);for(var e=0;null!=this._buttons&&e<this._buttons.length;e++)this._buttons[e].destroy();this._buttons=null;var t,i=this.element.getElementsByTagName("form");0<i.length&&(t=i[0])&&(c.purgeElement(t),t.parentNode&&t.parentNode.removeChild(t),this.form=null),n.superclass.destroy.call(this)},toString:function(){return"LDialog "+this.id}})}(),Rui.namespace("Rui.ui"),function(){Rui.ui.LSimpleDialog=function(e){e=e||{},Rui.ui.LSimpleDialog.superclass.constructor.call(this,e)};var l=Rui.util.LDom,h=Rui.ui.LSimpleDialog,e={ICON:{key:"icon",value:"none",suppressEvent:!0},TEXT:{key:"text",value:"",suppressEvent:!0,supercedes:["icon"]}};h.ICON_BLOCK="blckicon",h.ICON_ALARM="alrticon",h.ICON_HELP="hlpicon",h.ICON_INFO="infoicon",h.ICON_WARN="warnicon",h.ICON_TIP="tipicon",h.ICON_CSS_CLASSNAME="L-icon",h.CSS_SIMPLEDIALOG="L-simple-dialog",Rui.extend(h,Rui.ui.LDialog,{otype:"Rui.ui.LSimpleDialog",text:null,icon:null,initDefaultConfig:function(){h.superclass.initDefaultConfig.call(this),this.cfg.addProperty(e.ICON.key,{handler:this.configIcon,value:e.ICON.value,suppressEvent:e.ICON.suppressEvent}),this.cfg.addProperty(e.TEXT.key,{handler:this.configText,value:e.TEXT.value,suppressEvent:e.TEXT.suppressEvent,supercedes:e.TEXT.supercedes})},initComponent:function(e){h.superclass.initComponent.call(this,e),e&&this.cfg.applyConfig(e,!0)},initEvents:function(){h.superclass.initEvents.call(this),this.on("beforeRender",this._onSetBody,this,!0)},createContainer:function(){return this.el=h.superclass.createContainer.call(this),l.addClass(this.element,h.CSS_SIMPLEDIALOG),this.cfg.queueProperty("postmethod","manual"),this.el},afterRender:function(e){Rui.ui.LSimpleDialog.superclass.afterRender.call(this,e),this.setBody(this.text)},_onSetBody:function(e){this.body||this.setBody("")},registerForm:function(){h.superclass.registerForm.call(this),this.form.innerHTML+='<input type="hidden" name=\''+this.id+'" value=""/>'},configIcon:function(e,t,i){var s,n,r=t[0],o=this.body,a=h.ICON_CSS_CLASSNAME;r&&"none"!=r&&((s=l.getElementsByClassName(a,"*",o))&&(n=s.parentNode)&&(n.removeChild(s),s=null),-1==r.indexOf(".")?((s=document.createElement("span")).className=a+" "+r,s.innerHTML="&#160;"):((s=document.createElement("img")).src=this.imageRoot+r,s.className=a),s&&o.insertBefore(s,o.firstChild))},configText:function(e,t,i){var s=t[0];s&&(this.setBody(s),this.cfg.refireEvent("icon"))},destroy:function(){h.superclass.destroy.call(this)},toString:function(){return"LSimpleDialog "+this.id}})}(),function(){Rui.namespace("Rui.ui.LMessageBox");var o=Rui.ui.LMessageBox,r=Rui.util.LEvent;o.alert=function(e){e&&e.text||(e={text:e});var t=(e.buttons=e.buttons||[])[0]||{};e.buttons[0]=Rui.applyIf(t,{text:"OK",id:"LMsgBox-alert-ok",isDefault:!0,handler:function(){this.hideMask(),e.handler&&e.handler.call(this),this.destroy()}});var i=o.createMessageBox(e);return i.show(),i},o.confirm=function(e){e&&e.text||(e={text:e});var t=(e=Rui.applyIf(e,{title:"Question",icon:Rui.ui.LSimpleDialog.ICON_HELP})).buttons=e.buttons||[],i=t[0]||{},s=t[1]||{};e.buttons[0]=Rui.applyIf(i,{text:"Yes",id:"LMsgBox-confirm-yes",isDefault:!0,handler:function(){this.hideMask(),e.handlerYes&&e.handlerYes.call(this),this.destroy()}}),e.buttons[1]=Rui.applyIf(s,{text:"No",id:"LMsgBox-confirm-no",isDefault:!1,handler:function(){this.hideMask(),e.handlerNo&&e.handlerNo.call(this),this.destroy()}});var n=o.createMessageBox(e);return n.show(),n},o.prompt=function(e){e&&e.text||(e={text:e}),console.log(e);var t=e.buttons=e.buttons||[],i=t[0]||{},s=t[1]||{},n=Rui.useFixedId()?"LMsgBox-prompt":Rui.id();e.buttons[0]=Rui.applyIf(i,{text:"OK",id:"LMsgBox-prompt-ok",isDefault:!0,handler:function(){this.hideMask(),e.handler&&e.handler.call(this,Rui.get(n).getValue()),this.destroy()}}),e.buttons[1]=Rui.applyIf(s,{text:"Cancel",id:"LMsgBox-prompt-cancel",isDefault:!1,handler:function(){this.destroy()}}),e.text+='<input type="text" id="'+n+'" style="width:200px">';var r=o.createMessageBox(e);return r.show(),r},o.createMessageBox=function(e){e=Rui.applyIf(e,{id:"messagebox",renderTo:document.body,title:"Information",width:300,fixedcenter:!0,draggable:!0,visible:!1,close:!1,modal:!0,constraintoviewport:!0,isDefaultCSS:!0,buttons:[{text:"OK",id:"LMsgBox-messagebox-ok",handler:function(){this.hideMask(),this.destroy()},isDefault:!0}]});var t=new Rui.ui.LSimpleDialog(e);t.setHeader(e.title),Rui.useAccessibility()&&t.el.setAttribute("role","alert");for(var i=t.getButtons(),s=0;s<i.length;s++){var n=i[s];if(Rui.get(n.dom).hasClass("default")){try{n.on("keydown",function(e){if(13==e.keyCode)try{this.click(),r.stopEvent(e)}catch(e){}}),n.select("button").focus()}catch(e){}break}}return t},Rui.alert=o.alert,Rui.confirm=o.confirm,Rui.prompt=o.prompt}(),Rui.ui.LWaitPanel=function(e,t){var i=t||{};0==arguments.length?e=Rui.browser.msie?document.body:document:"object"==typeof e&&(i=e,e=Rui.browser.msie?document.body:document),this.el=e==document.body||e==document?Rui.getBody():Rui.get(e),this.isDocumentBody=this.el.dom==document.body||this.el.dom==document,this.el.addClass("L-wait-panel"),Rui.applyObject(this,i),this.iId=Rui.id()},Rui.ui.LWaitPanel.prototype={isDocumentBody:!1,maskMsg:null,show:function(){var e;this.isDocumentBody?(e=Rui.ui.LWaitPanel,Rui.util.LArray.indexOf(e._SHOW_COUNT,this.iId)<0&&e._SHOW_COUNT.push(this.iId),e._SHOW_COUNT.length<2&&(e._MASK_DOCUMENT_EL=e._MASK_DOCUMENT_EL||this.el,e._MASK_DOCUMENT_EL.mask(this.maskMsg),e._MASK_DOCUMENT_EL.waitMaskEl&&this.css&&e._MASK_DOCUMENT_EL.waitMaskEl.addClass(this.css))):(this.el.mask(this.maskMsg),this.el.waitMaskEl&&this.css&&this.el.waitMaskEl.addClass(this.css))},hide:function(){var e,t;this.isDocumentBody?((e=Rui.ui.LWaitPanel)._MASK_DOCUMENT_EL=e._MASK_DOCUMENT_EL||this.el,-1<(t=Rui.util.LArray.indexOf(e._SHOW_COUNT,this.iId))&&(e._SHOW_COUNT[t]=null,e._SHOW_COUNT.splice(t,1)),e._SHOW_COUNT.length<1&&e._MASK_DOCUMENT_EL.unmask()):this.el.unmask()},getRegion:function(e){return this.el.getRegion()},setRegion:function(e){this.el.setRegion(e)}},Rui.ui.LWaitPanel._SHOW_COUNT=[],Rui.ui.LWaitPanel._MASK_DOCUMENT_EL=null,Rui.ui.LScroller=function(e){e=e||{},e=Rui.applyIf(e,Rui.getConfig().getFirst("$.ext.scroller.defaultProperties")),Rui.ui.LScroller.superclass.constructor.call(this,e),this.scrollbarSize=Rui.ui.LScroller.SCROLLBAR_SIZE,this.createEvent("scrollY"),this.createEvent("scrollX")},Rui.ui.LScroller.SCROLLBAR_SIZE=Rui.platform.isMobile||Rui.platform.mac?0:17,Rui.extend(Rui.ui.LScroller,Rui.ui.LUIComponent,{otype:"Rui.ui.LScroller",content:null,marginSafe:!1,useVirtual:!1,scrollbar:"auto",virtualScrollRate:1,xScrollStep:40,yScrollStep:50,xWheelStep:60,yWheelStep:150,space:null,scrollbarSize:Rui.ui.LScroller.SCROLLBAR_SIZE,position:null,initComponent:function(e){this.space={top:0,right:0,bottom:0,left:0},this.position={}},createContainer:function(e){return Rui.ui.LScroller.superclass.createContainer.call(this,e),this.el.addClass("L-scroller"),this.el.addClass("L-ignore-event"),this.content?this.contentEl=Rui.get(this.content):this.contentEl=Rui.get(this.el.dom.children[0]),this.contentEl.addClass("L-scroll-content"),this.el},doRender:function(){this.scrollEl&&(this.width&&this.setWidth(this.width),this.height&&this.setHeight(this.height));var e=this.el;if(!0!==this.useVirtual)return this.el.appendChild(this.contentEl),void e.setStyle("overflow","auto");this.scrollEl=Rui.get(this.createElement()),this.scrollEl.addClass("L-scroll"),0<this.el.dom.children.length?Rui.get(this.el.dom.children[0]).insertBefore(this.scrollEl):e.appendChild(this.scrollEl),!0===this.marginSafe?(this.wrapperEl=Rui.get(this.createElement()),this.wrapperEl.addClass("L-scroll-wrapper"),this.scrollEl.appendChild(this.wrapperEl),this.wrapperEl.appendChild(this.contentEl)):this.scrollEl.appendChild(this.contentEl),this.setupSizes()},afterRender:function(){var e=Rui.util.LEvent;Rui.browser.mozilla?e.addListener(this.el.dom,"DOMMouseScroll",this.onWheel,this,!0):e.addListener(this.el.dom,"mousewheel",this.onWheel,this,!0),Rui.platform.isMobile&&(Rui.browser.touch?(e.addListener(document.body,"touchstart",this.onTouchStart,this,!0),e.addListener(document.body,"touchmove",this.onTouchMove,this,!0),e.addListener(document.body,"touchend",this.onTouchEnd,this,!0)):(e.addListener(document.body,"mousedown",this.onTouchStart,this,!0),e.addListener(document.body,"mousemove",this.onTouchMove,this,!0),e.addListener(document.body,"mouseup",this.onTouchEnd,this,!0))),e.addListener(window,"resize",this.onResize,this,!0)},setupScrollbars:function(){this.isNeedScrollbar(),this.needScroll.Y||"both"==this.scrollbar||"y"==this.scrollbar?(this.yScrollbarEl||(this.yScrollbarEl=Rui.get(this.createElement()),this.scrollEl.insertAfter(this.yScrollbarEl.dom),this.yScrollbarEl.addClass("L-scrollbar-y"),this.yScrollbarEl.addClass("L-ignore-event"),Rui.util.LEvent.addListener(this.yScrollbarEl.dom,"scroll",this.onScrollY,this,!0)),this.yVirtualContentEl||(this.yVirtualContentEl=Rui.get(this.createElement()),this.yScrollbarEl.appendChild(this.yVirtualContentEl),this.yVirtualContentEl.addClass("L-scrollbar-y-content"),this.yVirtualContentEl.html("&nbsp;"))):(this.yVirtualContentEl&&(this.yVirtualContentEl.remove(),this.yVirtualContentEl=null),this.yScrollbarEl&&(Rui.util.LEvent.removeListener(this.yScrollbarEl.dom,"scroll",this.onScrollY),this.yScrollbarEl.remove(),this.yScrollbarEl=null)),this.needScroll.X||"both"==this.scrollbar||"x"==this.scrollbar?(this.xScrollbarEl||(this.xScrollbarEl=Rui.get(this.createElement()),this.yScrollbarEl?this.yScrollbarEl.insertAfter(this.xScrollbarEl.dom):this.scrollEl.insertAfter(this.xScrollbarEl.dom),this.xScrollbarEl.addClass("L-scrollbar-x"),this.xScrollbarEl.addClass("L-ignore-event"),Rui.util.LEvent.addListener(this.xScrollbarEl.dom,"scroll",this.onScrollX,this,!0)),this.xVirtualContentEl||(this.xVirtualContentEl=Rui.get(this.createElement()),this.xScrollbarEl.appendChild(this.xVirtualContentEl),this.xVirtualContentEl.addClass("L-scrollbar-x-content"),this.xVirtualContentEl.html("&nbsp;"))):(this.xVirtualContentEl&&(this.xVirtualContentEl.remove(),this.xVirtualContentEl=null),this.xScrollbarEl&&(Rui.util.LEvent.removeListener(this.xScrollbarEl.dom,"scroll",this.onScrollX),this.xScrollbarEl.remove(),this.xScrollbarEl=null))},setupSizes:function(){if(this.isWidthZero())return!1;var e=this.el.getWidth(!0),t=this.el.getHeight(!0),i=this.space,s=i.top,n=i.right,r=i.bottom,o=i.left,a=e-o-n-(this.yScrollbarEl?this.scrollbarSize:0),l=t-s-r-(this.xScrollbarEl?this.scrollbarSize:0);this.scrollEl&&(this.scrollEl.setWidth(a),this.scrollEl.setHeight(l)),this.setupScrollbars(),a=e-o-n-(this.yScrollbarEl?this.scrollbarSize:0),l=t-s-r-(this.xScrollbarEl?this.scrollbarSize:0),this.scrollEl.setWidth(a),this.scrollEl.setHeight(l),this.xScrollbarEl&&(Rui.browser.msie&&this.xScrollbarEl.setHeight(this.scrollbarSize+1),this.xScrollbarEl.setWidth(a)),this.yScrollbarEl&&(Rui.browser.msie&&this.yScrollbarEl.setWidth(this.scrollbarSize+1),this.yScrollbarEl.setHeight(l)),this.setupVirtualContent()},isNeedScrollbar:function(){if(this.needScroll=this.needScroll?this.needScroll:{X:!1,Y:!1},this.isWidthZero())return!1;var e=this.el.getWidth(!0),t=this.el.getHeight(!0),i=this.getContentWidth(),s=this.getContentHeight(),n=this.space,r=n.top,o=n.right,a=n.bottom,l=n.left,h=t-r-a<s,u=e-l-o<i;u!==h&&(u?h=t-r-a-this.scrollbarSize<s:h&&(u=e-l-o-this.scrollbarSize<i)),this.needScroll={X:u,Y:h}},isWidthZero:function(){return!this.el.getWidth()},getContentWidth:function(){return this.wrapperEl?this.wrapperEl.getWidth():this.contentEl.getWidth()},getContentHeight:function(){return this.wrapperEl?this.wrapperEl.getHeight():this.contentEl.getHeight()},setupVirtualContent:function(){!0!==this.useVirtual&&(this.useVirtual=!0,this.doRender());var e=this.getContentHeight();if(Rui.browser.msie&&1193046<e)for(;!((e/=10)<1193046););this.setVirtualContentHeight(e),this.setVirtualContentWidth(this.getContentWidth())},setVirtualContentHeight:function(e){this.yVirtualContentEl&&(this.virtualScrollRate=this.getMaxScrollTop()/(e-this.scrollEl.getHeight(!0))||1,this.yVirtualContentEl.setHeight(e))},setVirtualContentWidth:function(e){this.xVirtualContentEl&&this.xVirtualContentEl.setWidth(e)},getStep:function(e,t){return t?(!0===e?this.xWheelStep:this.xScrollStep)/this.virtualScrollRate:(!0===e?this.yWheelStep:this.yScrollStep)/this.virtualScrollRate},setStep:function(e,t,i){i?!0===t?this.xWheelStep=e:this.xScrollStep=e:!0===t?this.yWheelStep=e:this.yScrollStep=e},getSpace:function(e){return e?this.space[e]:this.space},setSpace:function(e,t,i){i?this.space[i]=e:this.space=e,!0!==t&&this.refresh()},getMaxScrollTop:function(e){return this.wrapperEl?this.wrapperEl.getHeight()-this.scrollEl.getHeight(!0):this.contentEl.getHeight()-this.el.getHeight(!0)+(e||0)},getMaxScrollLeft:function(e){return this.wrapperEl?this.wrapperEl.getWidth()-this.scrollEl.getWidth(!0):this.contentEl.getWidth()-this.el.getWidth(!0)+(e||0)},getScrollWidth:function(){return this.scrollEl?this.scrollEl.getWidth():0},getScrollHeight:function(){if(!this.scrollEl)return 0;var e=this.scrollEl.getHeight();return 0===e?Rui.util.LDom.toPixelNumber(this.scrollEl.getStyle("height")):e},getScrollTop:function(){return this.yScrollbarEl?this.yScrollbarEl.dom.scrollTop:0},setScrollTop:function(e,t){Rui.isNumber(e)&&(this.ignoreEvent=t,!0===this.useVirtual?this.yScrollbarEl&&(this.yScrollbarEl.dom.scrollTop=e):this.el.dom.scrollTop=e,this.setPosition(null,!1))},getScrollLeft:function(){return this.xScrollbarEl?this.xScrollbarEl.dom.scrollLeft:0},setScrollLeft:function(e){Rui.isNumber(e)&&(!0===this.useVirtual?this.xScrollbarEl&&(this.xScrollbarEl.dom.scrollLeft=e):this.el.dom.scrollLeft=e,this.setPosition(null,!0))},syncScrollLeft:function(){this.scrollEl&&this.xScrollbarEl&&(this.scrollEl.dom.scrollLeft=this.xScrollbarEl.dom.scrollLeft)},getPrevious:function(e){return e?this.getScrollLeft()-this.getStep(!1,!0):this.getScrollTop()-this.getStep(!1)},getNext:function(e){return e?this.getScrollLeft()+this.getStep(!1,!0):this.getScrollTop()+this.getStep(!1)},getScroll:function(){return{top:this.getScrollTop(),left:this.getScrollLeft()}},setScroll:function(e){this.go(e.top),this.go(e.left,!0)},existScrollbar:function(e){return e?!!this.xScrollbarEl:!!this.yScrollbarEl},getScrollbarSize:function(e){return e?this.xScrollbarEl?this.scrollbarSize:0:this.yScrollbarEl?this.scrollbarSize:0},isStart:function(e){return e?0==this.getScrollLeft():0==this.getScrollTop()},isEnd:function(e){return e?!this.xScrollbarEl||this.getScrollLeft()>=this.getMaxScrollLeft():!this.yScrollbarEl||this.getScrollTop()>=this.getMaxScrollTop()},go:function(e,t){if(!Rui.isEmpty(e)&&Rui.isNumber(e))return t?(this.setScrollLeft(e),this.setPosition(e,!0)):(this.setScrollTop(e),this.setPosition(e,!1)),e},goStart:function(e){return e?(this.setScrollLeft(0),this.setPosition(0,!0)):(this.setScrollTop(0),this.setPosition(0,!1)),0},goPrevious:function(e){var t=this.getPrevious(e);e?(this.setScrollLeft(t),this.setPosition(t,!0)):(this.setScrollTop(t),this.setPosition(t,!1))},goNext:function(e){var t=this.getNext(e);return e?(this.setScrollLeft(t),this.setPosition(t,!0)):(this.setScrollTop(t),this.setPosition(t,!1)),t},goEnd:function(e){var t;return e?(t=this.getMaxScrollLeft(),this.setScrollLeft(t),this.setPosition(t,!0)):(t=this.getMaxScrollTop(),this.setScrollTop(t),this.setPosition(t,!1)),t},setWidth:function(e,t){Rui.ui.LScroller.superclass.setWidth.call(this,e),!0!==t&&this.refresh()},setHeight:function(e,t){Rui.ui.LScroller.superclass.setHeight.call(this,e),!0!==t&&this.refresh()},setPosition:function(e,t){t?this.position.x=e:this.position.y=e},getPosition:function(e){return e?this.position.x:this.position.y},onWheel:function(e){var t,i,s,n,r,o=e.target;o&&3==o.nodeType&&o.parentNode&&(o=o.parentNode),o=Rui.util.LDom.findParent(o,"#"+this.el.id,20),(this.yScrollbarEl||this.xScrollbarEl)&&o&&(i=t=0,(e=e||window.event).wheelDelta?(t=e.wheelDelta/120,e.wheelDeltaX&&(i=e.wheelDeltaX/120,t=0),window.opera&&(t=-t)):e.detail&&(t=-e.detail/3),t&&(s=this.getScrollTop(),r=this.getStep(!0),0<t?s=s<=r?0:s-r:s+=r,this.setScrollTop(s)),i&&(n=this.getScrollLeft(),r=this.getStep(!0,!0),0<i?n=n<=r?0:n-r:n+=r,this.setScrollLeft(n)),Rui.util.LEvent.preventDefault(e))},onScrollY:function(e){var t,i;this.yScrollbarEl&&(!0!==this.ignoreEvent?(t=e&&e.target?e.target.scrollTop:this.getScrollTop())!==(i=this.scrollTop)&&(this.scrollEl.dom.scrollTop=t*this.virtualScrollRate,this.scrollTop=t,(i||t)&&this.fireEvent("scrollY",{target:this,beforeScrollTop:i,scrollTop:t,isFirst:0===t,isEnd:t>=this.getMaxScrollTop(),isUp:!(i<t)})):delete this.ignoreEvent)},onScrollX:function(e){var t;this.xScrollbarEl&&(t=e&&e.target?e.target.scrollLeft:this.getScrollLeft(),beforeScrollLeft=this.scrollLeft,(beforeScrollLeft!==t||e&&e.isForce)&&(this.scrollEl.dom.scrollLeft=t,this.scrollLeft=t,(beforeScrollLeft||t)&&this.fireEvent("scrollX",{target:this,beforeScrollLeft:beforeScrollLeft,scrollLeft:t})))},onTouchStart:function(e){if(!0===this.useVirtual&&Rui.util.LDom.isAncestor(this.el.dom,e.target)){if(e.touches&&1<e.touches.length)return void this.onTouchEnd(e);var t=e.targetTouches?e.targetTouches[0]:e;this.touchStart=!0,this.touchStartXY={x:t.pageX,y:t.pageY}}},onTouchMove:function(e){if(!0===this.useVirtual&&!0===this.touchStart){if(e.touches&&1<e.touches.length)return void this.onTouchEnd(e);var t=e.targetTouches?e.targetTouches[0]:e,i=this.touchStartXY.x-t.pageX,s=this.touchStartXY.y-t.pageY,n=0,r=0;0!=s&&(n=this.getScrollTop()+s,this.setScrollTop(n)),0!=i&&(r=this.getScrollLeft()+i,this.setScrollLeft(r)),this.touchStartXY={x:t.pageX,y:t.pageY},Rui.util.LEvent.preventDefault(e)}},onTouchEnd:function(e){!0===this.useVirtual&&(this.touchStart=null,this.touchStartXY=null)},refresh:function(e){var t,i;!0===this.useVirtual&&this.setupSizes(),!0===e?(this.goStart(),this.goStart(!0),this.position={}):(t=this.getPosition(!1),i=this.getPosition(!0),Rui.isEmpty(t)||this.setScrollTop(t),Rui.isEmpty(i)||this.setScrollLeft(i))},onResize:function(e){this.refresh()},destroy:function(){var e=Rui.util.LEvent;e.removeListener(window,"resize",this.onResize),this.yVirtualContentEl&&(this.yVirtualContentEl.remove(),this.yVirtualContentEl=null,delete this.yVirtualContentEl),this.xVirtualContentEl&&(this.xVirtualContentEl.remove(),this.xVirtualContentEl=null,delete this.xVirtualContentEl),this.xScrollbarEl&&(this.xScrollbarEl.dom&&e.removeListener(this.xScrollbarEl.dom,"scroll",this.onScrollX),this.xScrollbarEl.remove(),this.xScrollbarEl=null,delete this.xScrollbarEl),this.yScrollbarEl&&(this.yScrollbarEl.dom&&e.removeListener(this.yScrollbarEl.dom,"scroll",this.onScrollY),this.yScrollbarEl.remove(),this.yScrollbarEl=null,delete this.yScrollbarEl),this.contentEl&&(this.contentEl.removeClass("L-scroll-content"),this.el&&this.el.appendChild(this.contentEl)),this.wrapperEl&&(this.wrapperEl.remove(),this.wrapperEl=null,delete this.wrapperEl),this.scrollEl&&(this.scrollEl.remove(),this.scrollEl=null,delete this.scrollEl),this.el&&(Rui.browser.mozilla?e.removeListener(this.el.dom,"DOMMouseScroll",this.onWheel):e.removeListener(this.el.dom,"mousewheel",this.onWheel),this.el.removeClass("L-scroller"),this.el.setStyle("width",""),this.el.setStyle("height","")),this.fireEvent("destroy"),this.unOnAll(),this.cfg&&(this.cfg.destroy(),this.cfg=null)},toString:function(){return this.otype+" "+this.id}}),Rui.namespace("Rui.ui.calendar"),function(){var X=Rui.util.LDom,E=Rui.util.LEvent,g=Rui;function z(e,t,i){1==arguments.length&&"object"==typeof e&&(e=t=(i=e).applyTo||e.renderTo||e.id||Rui.id()),this.init.call(this,e,t,i),(i=i||{})&&(i.applyTo||i.renderTo)&&this.render()}z.IMG_ROOT=null,z.DATE="D",z.MONTH_DAY="MD",z.WEEKDAY="WD",z.RANGE="R",z.MONTH="M",z.DISPLAY_DAYS=42,z.STOP_RENDER="S",z.SHORT="short",z.LONG="long",z.MEDIUM="medium",z.ONE_CHAR="1char";var e,$=z._DEFAULT_CONFIG={PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:null},TITLE:{key:"title",value:null},CLOSE:{key:"close",value:!1},IFRAME:{key:"iframe",value:!!(Rui.browser.msie&&Rui.browser.msie<=6)},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:!1},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",value:!0},SHOW_WEEK_HEADER:{key:"show_week_header",value:!1},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:!1},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:!1},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September","October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"~"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null},STRINGS:{key:"strings",value:{previousMonth:"Previous Month",nextMonth:"Next Month",previousYear:"Previous Year",nextYear:"Next Year",close:"Close"},supercedes:["close","title"]}};z._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",BEFORE_CHANGE_PAGE:"beforeChangePage",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",RENDER_CELL:"renderCell",BEFORE_DESTROY:"beforeDestroy",DESTROY:"destroy",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav",CURSOR_IN:"cursorIn",CURSOR_OUT:"cursorOut"},z._STYLES={CSS_ROW_HEADER:"L-calrowhead",CSS_ROW_FOOTER:"L-calrowfoot",CSS_CELL:"L-calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"oob",CSS_HEADER:"L-calheader",CSS_HEADER_TEXT:"L-calhead",CSS_BODY:"L-calbody",CSS_WEEKDAY_CELL:"L-calweekdaycell",CSS_WEEKDAY_ROW:"L-calweekdayrow",CSS_FOOTER:"L-calfoot",CSS_CALENDAR:"L-calendar",CSS_SINGLE:"L-single",CSS_CONTAINER:"L-calcontainer",CSS_NAV_YEAR_LEFT:"L-calnavyearleft",CSS_NAV_YEAR_RIGHT:"L-calnavyearright",CSS_NAV_LEFT:"L-calnavleft",CSS_NAV_RIGHT:"L-calnavright",CSS_NAV:"L-calnav",CSS_CLOSE:"L-calclose",CSS_CELL_TOP:"L-calcelltop",CSS_CELL_LEFT:"L-calcellleft",CSS_CELL_RIGHT:"L-calcellright",CSS_CELL_BOTTOM:"L-calcellbottom",CSS_CELL_HOVER:"L-calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4"},z.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,containerId:null,oDomContainer:null,today:null,titleCode:"$.base.msg118",renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(e){var t={id:null,container:null,config:null};if(e&&e.length&&0<e.length)switch(e.length){case 1:t.id=e[0].id?e[0].id:null,t.container=e[0].applyTo?e[0].applyTo:e[0],t.config="object"==typeof e[0]?e[0]:null;break;case 2:!Rui.isObject(e[1])||e[1].tagName||e[1]instanceof String?(t.id=e[0],t.container=e[1],t.config=null):(t.id=null,t.container=e[0],t.config=e[1]);break;default:t.id=e[0],t.container=e[1],t.config=e[2]}return t},init:function(e,t,i){var s,n=this._parseArgs(arguments);e=n.id,t=n.container,i=n.config,(i=Rui.applyIf(i,Rui.getConfig().getFirst("$.ext.calendar.defaultProperties"))).titleCode&&(s=Rui.getMessageManager(),i.title=s.get(i.titleCode));var r=Rui.get(t).dom;r.id||(r.id=X.generateId()),e=e||r.id+"_t",this.id=e,this.containerId=r.id,this.initEvents(),!this.today&&i&&i.today?this.today=i.today:this.today=new Date,Rui.util.LDate.clearTime(this.today),this.cfg=new Rui.ui.LConfig(this),this.Options={},this.Locale={},this.initStyles(),X.addClass(r,this.Style.CSS_CONTAINER),X.addClass(r,this.Style.CSS_SINGLE),X.addClass(r,"L-fixed"),this.oDomContainer=r,this.cellDates=[],this.cells=[],this.renderStack=[],this._renderStack=[],this.setupConfig(),i&&this.cfg.applyConfig(i,!0),this.cfg.fireQueue(),this._setDefaultLocale()},setProperty:function(e,t){this.cfg.setProperty(e,t)},getProperty:function(e){return this.cfg.getProperty(e)},_setDefaultLocale:function(e){for(var t=Rui.getConfig().getFirst("$.core.defaultLocale"),i=Rui.getMessageManager(),s=i.get(this.titleCode),n=Rui.util.LDate.getLocale(t),r=n.x,o=r.split("%"),a=1,l=2,h=3,u=1;u<o.length;u++)switch(o[u].toLowerCase().charAt(0)){case"y":a=u;break;case"m":l=u;break;case"d":h=u}var c="%"==r.charAt(2)?"":r.charAt(2);null==this.cfg.getProperty("TITLE")&&this.cfg.setProperty("TITLE",s),this.cfg.setProperty("START_WEEKDAY",i.get("$.core.startWeekDay")),this.cfg.setProperty("MONTHS_SHORT",n.b),this.cfg.setProperty("MONTHS_LONG",n.B),this.cfg.setProperty("WEEKDAYS_1CHAR",i.get("$.core.weekdays1Char")),this.cfg.setProperty("WEEKDAYS_SHORT",i.get("$.core.shortDayInWeek")),this.cfg.setProperty("WEEKDAYS_MEDIUM",n.a),this.cfg.setProperty("WEEKDAYS_LONG",n.A),this.cfg.setProperty("LOCALE_MONTHS",i.get("$.core.localeMonths")),this.cfg.setProperty("LOCALE_WEEKDAYS",i.get("$.core.localeWeekdays")),this.cfg.setProperty("DATE_DELIMITER",i.get("$.core.dateDelimiter")),this.cfg.setProperty("DATE_FIELD_DELIMITER",c),this.cfg.setProperty("DATE_RANGE_DELIMITER",i.get("$.core.dateRangeDelimiter")),this.cfg.setProperty("MY_MONTH_POSITION",l),this.cfg.setProperty("MY_YEAR_POSITION",a),this.cfg.setProperty("MD_MONTH_POSITION",l),this.cfg.setProperty("MD_DAY_POSITION",h),this.cfg.setProperty("MDY_MONTH_POSITION",l),this.cfg.setProperty("MDY_DAY_POSITION",h),this.cfg.setProperty("MDY_YEAR_POSITION",a),this.cfg.setProperty("MY_LABEL_MONTH_POSITION",l),this.cfg.setProperty("MY_LABEL_YEAR_POSITION",a),this.cfg.setProperty("MY_LABEL_MONTH_SUFFIX",i.get("$.core.myLabelMonthSuffix")),this.cfg.setProperty("MY_LABEL_YEAR_SUFFIX",i.get("$.core.myLabelYearSuffix"))},configIframe:function(e,t,i){var s,n=t[0];this.parent||X.inDocument(this.oDomContainer)&&(n?"absolute"!=(s=X.getStyle(this.oDomContainer,"position"))&&"relative"!=s||X.inDocument(this.iframe)||(this.iframe=document.createElement("iframe"),this.iframe.width=this.oDomContainer.style.width,this.iframe.height=this.oDomContainer.style.height,X.setStyle(this.iframe,"opacity","0"),Rui.browser.msie&&Rui.browser.msie<=6&&X.addClass(this.iframe,"fixedsize"),this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild)):this.iframe&&(this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe),this.iframe=null))},configTitle:function(e,t,i){var s=t[0];s?this.createTitleBar(s):this.cfg.getProperty($.CLOSE.key)?this.createTitleBar("&#160;"):this.removeTitleBar()},configClose:function(e,t,i){var s=t[0],n=this.cfg.getProperty($.TITLE.key);s?(n||this.createTitleBar("&#160;"),this.createCloseButton()):(this.removeCloseButton(),n||this.removeTitleBar())},initEvents:function(){var e=z._EVENT_TYPES,t=Rui.util.LCustomEvent,i=this;i.beforeSelectEvent=new t(e.BEFORE_SELECT,this,!1,Rui.util.LCustomEvent.FLAT),i.selectEvent=new t(e.SELECT,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeDeselectEvent=new t(e.BEFORE_DESELECT),i.deselectEvent=new t(e.DESELECT,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeChangePageEvent=new t(e.BEFORE_CHANGE_PAGE,this,!1,Rui.util.LCustomEvent.FLAT),i.changePageEvent=new t(e.CHANGE_PAGE,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeRenderEvent=new t(e.BEFORE_RENDER,this,!1,Rui.util.LCustomEvent.FLAT),i.renderEvent=new t(e.RENDER,this,!1,Rui.util.LCustomEvent.FLAT),i.renderCellEvent=new t(e.RENDER_CELL,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeDestroyEvent=new t(e.BEFORE_DESTROY,this,!1,Rui.util.LCustomEvent.FLAT),i.destroyEvent=new t(e.DESTROY,this,!1,Rui.util.LCustomEvent.FLAT),i.resetEvent=new t(e.RESET,this,!1,Rui.util.LCustomEvent.FLAT),i.clearEvent=new t(e.CLEAR,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeShowEvent=new t(e.BEFORE_SHOW,this,!1,Rui.util.LCustomEvent.FLAT),i.showEvent=new t(e.SHOW,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeHideEvent=new t(e.BEFORE_HIDE,this,!1,Rui.util.LCustomEvent.FLAT),i.hideEvent=new t(e.HIDE,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeShowNavEvent=new t(e.BEFORE_SHOW_NAV,this,!1,Rui.util.LCustomEvent.FLAT),i.showNavEvent=new t(e.SHOW_NAV,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeHideNavEvent=new t(e.BEFORE_HIDE_NAV,this,!1,Rui.util.LCustomEvent.FLAT),i.hideNavEvent=new t(e.HIDE_NAV,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeRenderNavEvent=new t(e.BEFORE_RENDER_NAV,this,!1,Rui.util.LCustomEvent.FLAT),i.renderNavEvent=new t(e.RENDER_NAV,this,!1,Rui.util.LCustomEvent.FLAT),i.cursorInEvent=new t(e.CURSOR_IN,this,!1,Rui.util.LCustomEvent.FLAT),i.cursorOutEvent=new t(e.CURSOR_OUT,this,!1,Rui.util.LCustomEvent.FLAT),i.beforeSelectEvent.on(i.onBeforeSelect,this,!0),i.selectEvent.on(i.onSelect,this,!0),i.beforeDeselectEvent.on(i.onBeforeDeselect,this,!0),i.deselectEvent.on(i.onDeselect,this,!0),i.changePageEvent.on(i.onChangePage,this,!0),i.renderEvent.on(i.onRender,this,!0),i.resetEvent.on(i.onReset,this,!0),i.clearEvent.on(i.onClear,this,!0)},doPreviousMonthNav:function(t,i){E.preventDefault(t),setTimeout(function(){if(0!=i.beforeChangePageEvent.fire(this,t)){i.previousMonth();var e=X.getElementsByClassName(i.Style.CSS_NAV_LEFT,"a",i.oDomContainer);if(e&&e[0])try{e[0].focus()}catch(e){}}},Rui.platform.isMobile?10:0)},doNextMonthNav:function(t,i){E.preventDefault(t),setTimeout(function(){if(0!=i.beforeChangePageEvent.fire(this,t)){i.nextMonth();var e=X.getElementsByClassName(i.Style.CSS_NAV_RIGHT,"a",i.oDomContainer);if(e&&e[0])try{e[0].focus()}catch(e){}}},Rui.platform.isMobile?10:0)},doPreviousYearNav:function(t,i){E.preventDefault(t),setTimeout(function(){if(0!=i.beforeChangePageEvent.fire(this,t)){i.previousYear();var e=X.getElementsByClassName(i.Style.CSS_NAV_YEAR_LEFT,"a",i.oDomContainer);if(e&&e[0])try{e[0].focus()}catch(e){}}},Rui.platform.isMobile?10:0)},doNextYearNav:function(t,i){E.preventDefault(t),setTimeout(function(){if(0!=i.beforeChangePageEvent.fire(this,t)){i.nextYear();var e=X.getElementsByClassName(i.Style.CSS_NAV_YEAR_RIGHT,"a",i.oDomContainer);if(e&&e[0])try{e[0].focus()}catch(e){}}},Rui.platform.isMobile?10:0)},doSelectCell:function(e,t){for(var i,s,n,r,o=E.getTarget(e),a=o.tagName.toLowerCase(),l=!1;"td"!=a&&!X.hasClass(o,t.Style.CSS_CELL_SELECTABLE);)if(!l&&"a"==a&&X.hasClass(o,t.Style.CSS_CELL_SELECTOR)&&(l=!0),a=(o=o.parentNode).tagName.toLowerCase(),o==this.oDomContainer||"html"==a)return;l&&E.preventDefault(e),i=o,X.hasClass(i,t.Style.CSS_CELL_SELECTABLE)&&-1<(r=t.getIndexFromId(i.id))&&t.cellDates[r]&&(t.Options.MULTI_SELECT?((s=i.getElementsByTagName("a")[0])&&s.blur(),n=t.cellDates[r],-1<t._indexOfSelectedFieldArray(n)?t.deselectCell(r):t.selectCell(r)):((s=i.getElementsByTagName("a")[0])&&s.blur(),t.selectCell(r)))},doCellMouseOver:function(e,t){for(var i,s,n=e?E.getTarget(e):this;n.tagName&&"td"!=n.tagName.toLowerCase();)if(!(n=n.parentNode).tagName||"html"==n.tagName.toLowerCase())return;n.id&&(X.hasClass(n,t.Style.CSS_CELL_SELECTABLE)&&X.addClass(n,t.Style.CSS_CELL_HOVER),i=t.getIndexFromId(n.id),s=t.cellDates[i],t.cursorInEvent.fire({cellDate:s,date:t._toDate(s)}))},doCellMouseOut:function(e,t){for(var i,s,n=e?E.getTarget(e):this;n.tagName&&"td"!=n.tagName.toLowerCase();)if(!(n=n.parentNode).tagName||"html"==n.tagName.toLowerCase())return;n.id&&(X.hasClass(n,t.Style.CSS_CELL_SELECTABLE)&&X.removeClass(n,t.Style.CSS_CELL_HOVER),i=t.getIndexFromId(n.id),s=t.cellDates[i],t.cursorOutEvent.fire({cellDate:s,date:t._toDate(s)}))},setupConfig:function(){var e=this.cfg;e.addProperty($.PAGEDATE.key,{value:new Date,handler:this.configPageDate}),e.addProperty($.SELECTED.key,{value:[],handler:this.configSelected}),e.addProperty($.TITLE.key,{value:$.TITLE.value,handler:this.configTitle}),e.addProperty($.CLOSE.key,{value:$.CLOSE.value,handler:this.configClose}),e.addProperty($.IFRAME.key,{value:$.IFRAME.value,handler:this.configIframe,validator:e.checkBoolean}),e.addProperty($.MINDATE.key,{value:$.MINDATE.value,handler:this.configMinDate}),e.addProperty($.MAXDATE.key,{value:$.MAXDATE.value,handler:this.configMaxDate}),e.addProperty($.MULTI_SELECT.key,{value:$.MULTI_SELECT.value,handler:this.configOptions,validator:e.checkBoolean}),e.addProperty($.START_WEEKDAY.key,{value:$.START_WEEKDAY.value,handler:this.configOptions,validator:e.checkNumber}),e.addProperty($.SHOW_WEEKDAYS.key,{value:$.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:e.checkBoolean}),e.addProperty($.SHOW_WEEK_HEADER.key,{value:$.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:e.checkBoolean}),e.addProperty($.SHOW_WEEK_FOOTER.key,{value:$.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:e.checkBoolean}),e.addProperty($.HIDE_BLANK_WEEKS.key,{value:$.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:e.checkBoolean}),e.addProperty($.NAV_ARROW_LEFT.key,{value:$.NAV_ARROW_LEFT.value,handler:this.configOptions}),e.addProperty($.NAV_ARROW_RIGHT.key,{value:$.NAV_ARROW_RIGHT.value,handler:this.configOptions}),e.addProperty($.MONTHS_SHORT.key,{value:$.MONTHS_SHORT.value,handler:this.configLocale}),e.addProperty($.MONTHS_LONG.key,{value:$.MONTHS_LONG.value,handler:this.configLocale}),e.addProperty($.WEEKDAYS_1CHAR.key,{value:$.WEEKDAYS_1CHAR.value,handler:this.configLocale}),e.addProperty($.WEEKDAYS_SHORT.key,{value:$.WEEKDAYS_SHORT.value,handler:this.configLocale}),e.addProperty($.WEEKDAYS_MEDIUM.key,{value:$.WEEKDAYS_MEDIUM.value,handler:this.configLocale}),e.addProperty($.WEEKDAYS_LONG.key,{value:$.WEEKDAYS_LONG.value,handler:this.configLocale});function t(){e.refireEvent($.LOCALE_MONTHS.key),e.refireEvent($.LOCALE_WEEKDAYS.key)}e.subscribeToConfigEvent($.START_WEEKDAY.key,t,this,!0),e.subscribeToConfigEvent($.MONTHS_SHORT.key,t,this,!0),e.subscribeToConfigEvent($.MONTHS_LONG.key,t,this,!0),e.subscribeToConfigEvent($.WEEKDAYS_1CHAR.key,t,this,!0),e.subscribeToConfigEvent($.WEEKDAYS_SHORT.key,t,this,!0),e.subscribeToConfigEvent($.WEEKDAYS_MEDIUM.key,t,this,!0),e.subscribeToConfigEvent($.WEEKDAYS_LONG.key,t,this,!0),e.addProperty($.LOCALE_MONTHS.key,{value:$.LOCALE_MONTHS.value,handler:this.configLocaleValues}),e.addProperty($.LOCALE_WEEKDAYS.key,{value:$.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues}),e.addProperty($.DATE_DELIMITER.key,{value:$.DATE_DELIMITER.value,handler:this.configLocale}),e.addProperty($.DATE_FIELD_DELIMITER.key,{value:$.DATE_FIELD_DELIMITER.value,handler:this.configLocale}),e.addProperty($.DATE_RANGE_DELIMITER.key,{value:$.DATE_RANGE_DELIMITER.value,handler:this.configLocale}),e.addProperty($.MY_MONTH_POSITION.key,{value:$.MY_MONTH_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MY_YEAR_POSITION.key,{value:$.MY_YEAR_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MD_MONTH_POSITION.key,{value:$.MD_MONTH_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MD_DAY_POSITION.key,{value:$.MD_DAY_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MDY_MONTH_POSITION.key,{value:$.MDY_MONTH_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MDY_DAY_POSITION.key,{value:$.MDY_DAY_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MDY_YEAR_POSITION.key,{value:$.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MY_LABEL_MONTH_POSITION.key,{value:$.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MY_LABEL_YEAR_POSITION.key,{value:$.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:e.checkNumber}),e.addProperty($.MY_LABEL_MONTH_SUFFIX.key,{value:$.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale}),e.addProperty($.MY_LABEL_YEAR_SUFFIX.key,{value:$.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale}),e.addProperty($.NAV.key,{value:$.NAV.value,handler:this.configNavigator}),e.addProperty($.STRINGS.key,{value:$.STRINGS.value,handler:this.configStrings,validator:function(e){return Rui.isObject(e)},supercedes:$.STRINGS.supercedes})},configStrings:function(e,t,i){var s=g.merge($.STRINGS.value,t[0]);this.cfg.setProperty($.STRINGS.key,s,!0)},configPageDate:function(e,t,i){this.cfg.setProperty($.PAGEDATE.key,this._parsePageDate(t[0]),!0)},configMinDate:function(e,t,i){var s=t[0];Rui.isString(s)&&(s=this._parseDate(s),this.cfg.setProperty($.MINDATE.key,Rui.util.LDate.getDate(s[0],s[1]-1,s[2])))},configMaxDate:function(e,t,i){var s=t[0];Rui.isString(s)&&(s=this._parseDate(s),this.cfg.setProperty($.MAXDATE.key,Rui.util.LDate.getDate(s[0],s[1]-1,s[2])))},configSelected:function(e,t,i){var s=t[0],n=$.SELECTED.key;s&&Rui.isString(s)&&this.cfg.setProperty(n,this._parseDates(s),!0),this._selectedDates||(this._selectedDates=this.cfg.getProperty(n))},configOptions:function(e,t,i){this.Options[e.toUpperCase()]=t[0]},configLocale:function(e,t,i){this.Locale[e.toUpperCase()]=t[0],this.cfg.refireEvent($.LOCALE_MONTHS.key),this.cfg.refireEvent($.LOCALE_WEEKDAYS.key)},configLocaleValues:function(e,t,i){e=e.toLowerCase();var s=t[0],n=this.cfg,r=this.Locale;switch(e){case $.LOCALE_MONTHS.key:switch(s){case z.SHORT:r.LOCALE_MONTHS=n.getProperty($.MONTHS_SHORT.key).concat();break;case z.LONG:r.LOCALE_MONTHS=n.getProperty($.MONTHS_LONG.key).concat()}break;case $.LOCALE_WEEKDAYS.key:switch(s){case z.ONE_CHAR:r.LOCALE_WEEKDAYS=n.getProperty($.WEEKDAYS_1CHAR.key).concat();break;case z.SHORT:r.LOCALE_WEEKDAYS=n.getProperty($.WEEKDAYS_SHORT.key).concat();break;case z.MEDIUM:r.LOCALE_WEEKDAYS=n.getProperty($.WEEKDAYS_MEDIUM.key).concat();break;case z.LONG:r.LOCALE_WEEKDAYS=n.getProperty($.WEEKDAYS_LONG.key).concat()}var o=n.getProperty($.START_WEEKDAY.key);if(0<o)for(var a=0;a<o;++a)r.LOCALE_WEEKDAYS.push(r.LOCALE_WEEKDAYS.shift())}},configNavigator:function(e,t,i){var s=t[0];Rui.ui.calendar.LCalendarNavigator&&(!0===s||Rui.isObject(s))?this.oNavigator||(this.oNavigator=new Rui.ui.calendar.LCalendarNavigator(this),this.beforeRenderEvent.on(function(){this.pages||this.oNavigator.erase()},this,!0)):this.oNavigator&&(this.oNavigator.destroy(),this.oNavigator=null)},initStyles:function(){var e=z._STYLES;this.Style={CSS_ROW_HEADER:e.CSS_ROW_HEADER,CSS_ROW_FOOTER:e.CSS_ROW_FOOTER,CSS_CELL:e.CSS_CELL,CSS_CELL_SELECTOR:e.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:e.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:e.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:e.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:e.CSS_CELL_TODAY,CSS_CELL_OOM:e.CSS_CELL_OOM,CSS_CELL_OOB:e.CSS_CELL_OOB,CSS_HEADER:e.CSS_HEADER,CSS_HEADER_TEXT:e.CSS_HEADER_TEXT,CSS_BODY:e.CSS_BODY,CSS_WEEKDAY_CELL:e.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:e.CSS_WEEKDAY_ROW,CSS_FOOTER:e.CSS_FOOTER,CSS_CALENDAR:e.CSS_CALENDAR,CSS_SINGLE:e.CSS_SINGLE,CSS_CONTAINER:e.CSS_CONTAINER,CSS_NAV_YEAR_LEFT:e.CSS_NAV_YEAR_LEFT,CSS_NAV_YEAR_RIGHT:e.CSS_NAV_YEAR_RIGHT,CSS_NAV_LEFT:e.CSS_NAV_LEFT,CSS_NAV_RIGHT:e.CSS_NAV_RIGHT,CSS_NAV:e.CSS_NAV,CSS_CLOSE:e.CSS_CLOSE,CSS_CELL_TOP:e.CSS_CELL_TOP,CSS_CELL_LEFT:e.CSS_CELL_LEFT,CSS_CELL_RIGHT:e.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:e.CSS_CELL_BOTTOM,CSS_CELL_HOVER:e.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:e.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:e.CSS_CELL_HIGHLIGHT2,CSS_CELL_HIGHLIGHT3:e.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:e.CSS_CELL_HIGHLIGHT4}},buildMonthLabel:function(){return this._buildMonthLabel(this.cfg.getProperty($.PAGEDATE.key))},_buildMonthLabel:function(e){var t=this.Locale.LOCALE_MONTHS[e.getMonth()],i=this.Locale.MY_LABEL_MONTH_SUFFIX,s=e.getFullYear(),n=this.Locale.MY_LABEL_YEAR_SUFFIX;return 2==this.Locale.MY_LABEL_MONTH_POSITION||1==this.Locale.MY_LABEL_YEAR_POSITION?'<span class="year">'+s+'</span><span class="year-suffix">'+n+'</span><span class="month">'+t+'</span><span class="month-suffix">'+i+"</span>":'<span class="month">'+t+'</span><span class="month-suffix">'+i+'</span><span class="year">'+s+'</span><span class="year-suffix">'+n+"</span>"},_buildYearLabel:function(e){var t=this.Locale.LOCALE_MONTHS[e.getMonth()],i=this.Locale.MY_LABEL_MONTH_SUFFIX,s=e.getFullYear(),n=this.Locale.MY_LABEL_YEAR_SUFFIX;return 2==this.Locale.MY_LABEL_MONTH_POSITION||1==this.Locale.MY_LABEL_YEAR_POSITION?'<span class="year">'+s+'</span><span class="year-suffix">'+n+'</span><span class="month">'+t+'</span><span class="month-suffix">'+i+"</span>":'<span class="month">'+t+'</span><span class="month-suffix">'+i+'</span><span class="year">'+s+'</span><span class="year-suffix">'+n+"</span>"},buildDayLabel:function(e){return e.getDate()},createTitleBar:function(e){var t=X.getElementsByClassName(Rui.ui.calendar.LCalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");return t.className=Rui.ui.calendar.LCalendarGroup.CSS_2UPTITLE,t.innerHTML=e,this.oDomContainer.insertBefore(t,this.oDomContainer.firstChild),X.addClass(this.oDomContainer,"withtitle"),t},removeTitleBar:function(){var e=X.getElementsByClassName(Rui.ui.calendar.LCalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;e&&(E.purgeElement(e),this.oDomContainer.removeChild(e)),X.removeClass(this.oDomContainer,"withtitle")},createCloseButton:function(){var e,t=Rui.ui.calendar.LCalendarGroup.CSS_2UPCLOSE,i=X.getElementsByClassName("link-close","a",this.oDomContainer)[0],s=this.cfg.getProperty($.STRINGS.key),n=s&&s.close?s.close:"";return i||(i=document.createElement("a"),E.addListener(i,"click",function(e,t){t.hide(),E.preventDefault(e)},this)),i.href="#",i.className="link-close",null!==z.IMG_ROOT?((e=X.getElementsByClassName(t,"img",i)[0]||document.createElement("img")).src=z.IMG_ROOT+"us/my/bn/x_d.gif",e.className=t,i.appendChild(e)):i.innerHTML='<span class="'+t+" "+this.Style.CSS_CLOSE+'">'+n+"</span>",this.oDomContainer.appendChild(i),i},removeCloseButton:function(){var e=X.getElementsByClassName("link-close","a",this.oDomContainer)[0]||null;e&&(E.purgeElement(e),this.oDomContainer.removeChild(e))},renderHeader:function(e){var t,i,s=7,n=this.cfg,r=n.getProperty($.PAGEDATE.key),o=n.getProperty($.STRINGS.key),a=o&&o.previousMonth?o.previousMonth:"",l=o&&o.nextMonth?o.nextMonth:"",h=o&&o.previousYear?o.previousYear:"",u=o&&o.nextYear?o.nextYear:"";n.getProperty($.SHOW_WEEK_HEADER.key)&&(s+=1),n.getProperty($.SHOW_WEEK_FOOTER.key)&&(s+=1),e[e.length]="<thead>",e[e.length]="<tr>",e[e.length]='<th colspan="'+s+'" class="'+this.Style.CSS_HEADER_TEXT+'">',e[e.length]='<div class="'+this.Style.CSS_HEADER+'">';var c,d,f,E,g=!1;this.parent?(0===this.index&&(c=!0),this.index==this.parent.cfg.getProperty("pages")-1&&(g=!0)):g=c=!0,c&&(t=this._buildMonthLabel(Rui.util.LDate.subtract(r,Rui.util.LDate.MONTH,1)),i=this._buildYearLabel(Rui.util.LDate.subtract(r,Rui.util.LDate.YEAR,1)),null===(d=n.getProperty($.NAV_ARROW_LEFT.key))&&null!==z.IMG_ROOT&&(d=z.IMG_ROOT+"us/tr/callt.gif"),f=null===d?"":' style="background-image:url('+d+')"',E='<a class="'+this.Style.CSS_NAV_YEAR_LEFT+'"'+f+' href="#" id="'+this.id+'_calnavyearleft"'+(Rui.useAccessibility()?'role="button"':"")+">"+h+" ("+i+")</a>",E+='<a class="'+this.Style.CSS_NAV_LEFT+'"'+f+' href="#" id="'+this.id+'_calnavleft"'+(Rui.useAccessibility()?'role="button"':"")+">"+a+" ("+t+")</a>",e[e.length]=E);var p,v,y,_=this.buildMonthLabel();return(this.parent||this).cfg.getProperty("navigator")&&(_='<a class="'+this.Style.CSS_NAV+'" href="#" id="'+this.id+'_calnav"'+(Rui.useAccessibility()?'role="heading"':"")+">"+_+"</a>"),e[e.length]=_,g&&(t=this._buildMonthLabel(Rui.util.LDate.add(r,Rui.util.LDate.MONTH,1)),i=this._buildYearLabel(Rui.util.LDate.add(r,Rui.util.LDate.YEAR,1)),null===(p=n.getProperty($.NAV_ARROW_RIGHT.key))&&null!==z.IMG_ROOT&&(p=z.IMG_ROOT+"us/tr/calrt.gif"),v=null===p?"":' style="background-image:url('+p+')"',y='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+v+' href="#" id="'+this.id+'_calnavright"'+(Rui.useAccessibility()?'role="button"':"")+">"+l+" ("+t+")</a>",y+='<a class="'+this.Style.CSS_NAV_YEAR_RIGHT+'"'+v+' href="#" id="'+this.id+'_calnavryearight"'+(Rui.useAccessibility()?'role="button"':"")+">"+u+" ("+i+")</a>",e[e.length]=y),e[e.length]="</div>\n</th>\n</tr>",n.getProperty($.SHOW_WEEKDAYS.key)&&(e=this.buildWeekdays(e)),e[e.length]="</thead>",e},buildWeekdays:function(e){e[e.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">',this.cfg.getProperty($.SHOW_WEEK_HEADER.key)&&(e[e.length]="<th>&#160;</th>");for(var t=0;t<this.Locale.LOCALE_WEEKDAYS.length;++t)e[e.length]='<th class="L-calweekdaycell">'+this.Locale.LOCALE_WEEKDAYS[t]+"</th>";return this.cfg.getProperty($.SHOW_WEEK_FOOTER.key)&&(e[e.length]="<th>&#160;</th>"),e[e.length]="</tr>",e},renderBody:function(e,t){var i=this.cfg.getProperty($.START_WEEKDAY.key);this.preMonthDays=e.getDay(),0<i&&(this.preMonthDays-=i),this.preMonthDays<0&&(this.preMonthDays+=7),this.monthDays=Rui.util.LDate.getLastDayOfMonth(e).getDate(),this.postMonthDays=z.DISPLAY_DAYS-this.preMonthDays-this.monthDays,e=Rui.util.LDate.subtract(e,Rui.util.LDate.DAY,this.preMonthDays);var s,n,r,o,a=this.today,l=this.cfg,h=a.getFullYear(),u=a.getMonth(),c=a.getDate(),d=l.getProperty($.PAGEDATE.key),f=l.getProperty($.HIDE_BLANK_WEEKS.key),E=l.getProperty($.SHOW_WEEK_FOOTER.key),g=l.getProperty($.SHOW_WEEK_HEADER.key),p=l.getProperty($.MINDATE.key),v=l.getProperty($.MAXDATE.key),p=p&&Rui.util.LDate.clearTime(p),v=v&&Rui.util.LDate.clearTime(v);t[t.length]='<tbody class="m'+(d.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var y=0,_=document.createElement("div"),m=document.createElement("td");_.appendChild(m);for(var L=this.parent||this,S=0;S<6&&(n="w"+(s=Rui.util.LDate.getWeekNumber(e,i)),0===S||!0!==f||e.getMonth()==d.getMonth());S++){t[t.length]='<tr class="'+n+'">',g&&(t=this.renderRowHeader(s,t));for(var C=0;C<7;C++){r=[],this.clearElement(m),m.className=this.Style.CSS_CELL,m.id=this.id+"_cell"+y,e.getDate()==c&&e.getMonth()==u&&e.getFullYear()==h&&(r[r.length]=L.renderCellStyleToday);var R=[e.getFullYear(),e.getMonth()+1,e.getDate()];if(this.cellDates[this.cellDates.length]=R,e.getMonth()!=d.getMonth())r[r.length]=L.renderCellNotThisMonth;else{X.addClass(m,"wd"+e.getDay()),X.addClass(m,"d"+e.getDate());for(var T=0;T<this.renderStack.length;++T){o=null;var b,D,O,A=this.renderStack[T];switch(A[0]){case z.DATE:b=A[1][1],D=A[1][2],O=A[1][0],e.getMonth()+1==b&&e.getDate()==D&&e.getFullYear()==O&&(o=A[2],this.renderStack.splice(T,1));break;case z.MONTH_DAY:b=A[1][0],D=A[1][1],e.getMonth()+1==b&&e.getDate()==D&&(o=A[2],this.renderStack.splice(T,1));break;case z.RANGE:var N=A[1][0],I=A[1][1],M=N[1],P=N[2],k=N[0],F=Rui.util.LDate.getDate(k,M-1,P),w=I[1],H=I[2],Y=I[0],B=Rui.util.LDate.getDate(Y,w-1,H);e.getTime()>=F.getTime()&&e.getTime()<=B.getTime()&&(o=A[2],e.getTime()==B.getTime()&&this.renderStack.splice(T,1));break;case z.WEEKDAY:var x=A[1][0];e.getDay()+1==x&&(o=A[2]);break;case z.MONTH:b=A[1][0],e.getMonth()+1==b&&(o=A[2])}o&&(r[r.length]=o)}}-1<this._indexOfSelectedFieldArray(R)&&(r[r.length]=L.renderCellStyleSelected),p&&e.getTime()<p.getTime()||v&&e.getTime()>v.getTime()?r[r.length]=L.renderOutOfBoundsDate:(r[r.length]=L.styleCellDefault,r[r.length]=L.renderCellDefault);var G={date:e,pageDate:d,cell:m,stop:!1};if(this.renderCellEvent.fire(G),!0!==G.stop)for(var U=0;U<r.length&&r[U].call(L,e,m)!=z.STOP_RENDER;++U);e.setTime(e.getTime()+Rui.util.LDate.ONE_DAY_MS),e=Rui.util.LDate.clearTime(e),0<=y&&y<=6&&X.addClass(m,this.Style.CSS_CELL_TOP),y%7==0&&X.addClass(m,this.Style.CSS_CELL_LEFT),(y+1)%7==0&&X.addClass(m,this.Style.CSS_CELL_RIGHT);var W=this.postMonthDays;if(f&&7<=W)for(var V=Math.floor(W/7),K=0;K<V;++K)W-=7;y>=this.preMonthDays+W+this.monthDays-7&&X.addClass(m,this.Style.CSS_CELL_BOTTOM),Rui.useAccessibility()&&m.setAttribute("role","gridcell"),t[t.length]=_.innerHTML,y++}E&&(t=this.renderRowFooter(s,t)),t[t.length]="</tr>"}return t[t.length]="</tbody>",t},renderFooter:function(e){return e},render:function(){this.beforeRenderEvent.fire();var e=Rui.util.LDate.getFirstDayOfMonth(this.cfg.getProperty($.PAGEDATE.key));this.resetRenderers(),this.cellDates.length=0,E.purgeElement(this.oDomContainer,!0);var t=[];t[t.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+e.getFullYear()+'" id="'+this.id+'-table" '+(Rui.useAccessibility()?'role="grid"':"")+">",t=this.renderHeader(t),t=this.renderBody(e,t),(t=this.renderFooter(t))[t.length]="</table>",this.oDomContainer.innerHTML=t.join("\n"),this.applyListeners(),this.cells=this.oDomContainer.getElementsByTagName("td"),this.cfg.refireEvent($.TITLE.key),this.cfg.refireEvent($.CLOSE.key),this.cfg.refireEvent($.IFRAME.key),this.renderEvent.fire()},applyListeners:function(){var e,t=this.oDomContainer,i=this.parent||this,s="click",n=X.getElementsByClassName(this.Style.CSS_NAV_LEFT,"a",t),r=X.getElementsByClassName(this.Style.CSS_NAV_RIGHT,"a",t),o=X.getElementsByClassName(this.Style.CSS_NAV_YEAR_LEFT,"a",t),a=X.getElementsByClassName(this.Style.CSS_NAV_YEAR_RIGHT,"a",t);if(n&&0<n.length&&(this.linkLeft=n[0],E.addListener(this.linkLeft,s,this.doPreviousMonthNav,i,!0)),r&&0<r.length&&(this.linkRight=r[0],E.addListener(this.linkRight,s,this.doNextMonthNav,i,!0)),o&&0<o.length&&(this.yearLinkLeft=o[0],E.addListener(this.yearLinkLeft,s,this.doPreviousYearNav,i,!0)),a&&0<a.length&&(this.yearLinkRight=a[0],E.addListener(this.yearLinkRight,s,this.doNextYearNav,i,!0)),null!==i.cfg.getProperty("navigator")&&this.applyNavListeners(),this.domEventMap)for(var l in this.domEventMap)if(g.hasOwnProperty(this.domEventMap,l)){var h=this.domEventMap[l];h instanceof Array||(h=[h]);for(var u=0;u<h.length;u++)for(var c=h[u],d=X.getElementsByClassName(l,c.tag,this.oDomContainer),f=0;f<d.length;f++)e=d[f],E.addListener(e,c.event,c.handler,c.scope,c.correct)}E.addListener(this.oDomContainer,"click",this.doSelectCell,this),E.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this),E.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this)},applyNavListeners:function(){var r=this.parent||this,o=this,e=X.getElementsByClassName(this.Style.CSS_NAV,"a",this.oDomContainer);0<e.length&&E.addListener(e,"click",function(e,t){var i,s,n;0!=o.beforeChangePageEvent.fire(this,e)&&(this!==(i=E.getTarget(e))&&!X.isAncestor(this,i)||E.preventDefault(e),(s=r.oNavigator)&&(n=o.cfg.getProperty("pagedate"),s.setYear(n.getFullYear()),s.setMonth(n.getMonth()),s.show()))})},getDateByCellId:function(e){var t=this.getDateFieldsByCellId(e);return t?Rui.util.LDate.getDate(t[0],t[1]-1,t[2]):null},getDateFieldsByCellId:function(e){return-1<(e=this.getIndexFromId(e))?this.cellDates[e]:null},getCellIndex:function(e){var t=-1;if(e)for(var i=e.getMonth(),s=e.getFullYear(),n=e.getDate(),r=this.cellDates,o=0;o<r.length;++o){var a=r[o];if(a[0]===s&&a[1]===i+1&&a[2]===n){t=o;break}}return t},getIndexFromId:function(e){var t=-1,i=e.lastIndexOf("_cell");return-1<i&&(t=parseInt(e.substring(i+5),10)),t},renderOutOfBoundsDate:function(e,t){return X.addClass(t,this.Style.CSS_CELL_OOB),t.innerHTML=e.getDate(),z.STOP_RENDER},renderRowHeader:function(e,t){return t[t.length]='<th class="L-calrowhead">'+e+"</th>",t},renderRowFooter:function(e,t){return t[t.length]='<th class="L-calrowfoot">'+e+"</th>",t},renderCellDefault:function(e,t){t.innerHTML='<a href="#" class="'+this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(e)+"</a>"},styleCellDefault:function(e,t){X.addClass(t,this.Style.CSS_CELL_SELECTABLE)},renderCellStyleHighlight1:function(e,t){X.addClass(t,this.Style.CSS_CELL_HIGHLIGHT1)},renderCellStyleHighlight2:function(e,t){X.addClass(t,this.Style.CSS_CELL_HIGHLIGHT2)},renderCellStyleHighlight3:function(e,t){X.addClass(t,this.Style.CSS_CELL_HIGHLIGHT3)},renderCellStyleHighlight4:function(e,t){X.addClass(t,this.Style.CSS_CELL_HIGHLIGHT4)},renderCellStyleToday:function(e,t){X.addClass(t,this.Style.CSS_CELL_TODAY)},renderCellStyleSelected:function(e,t){X.addClass(t,this.Style.CSS_CELL_SELECTED),Rui.useAccessibility()&&t.setAttribute("aria-selected","true")},renderCellNotThisMonth:function(e,t){return X.addClass(t,this.Style.CSS_CELL_OOM),t.innerHTML=e.getDate(),z.STOP_RENDER},renderBodyCellRestricted:function(e,t){return X.addClass(t,this.Style.CSS_CELL),X.addClass(t,this.Style.CSS_CELL_RESTRICTED),t.innerHTML=e.getDate(),z.STOP_RENDER},addMonths:function(e){var t=$.PAGEDATE.key;this.cfg.setProperty(t,Rui.util.LDate.add(this.cfg.getProperty(t),Rui.util.LDate.MONTH,e)),this.resetRenderers(),this.changePageEvent.fire()},subtractMonths:function(e){var t=$.PAGEDATE.key;this.cfg.setProperty(t,Rui.util.LDate.subtract(this.cfg.getProperty(t),Rui.util.LDate.MONTH,e)),this.resetRenderers(),this.changePageEvent.fire()},addYears:function(e){var t=$.PAGEDATE.key;this.cfg.setProperty(t,Rui.util.LDate.add(this.cfg.getProperty(t),Rui.util.LDate.YEAR,e)),this.resetRenderers(),this.changePageEvent.fire()},subtractYears:function(e){var t=$.PAGEDATE.key;this.cfg.setProperty(t,Rui.util.LDate.subtract(this.cfg.getProperty(t),Rui.util.LDate.YEAR,e)),this.resetRenderers(),this.changePageEvent.fire()},nextMonth:function(){this.addMonths(1)},previousMonth:function(){this.subtractMonths(1)},nextYear:function(){this.addYears(1)},previousYear:function(){this.subtractYears(1)},reset:function(){this.cfg.resetProperty($.SELECTED.key),this.cfg.resetProperty($.PAGEDATE.key),this.resetEvent.fire()},clear:function(){this.cfg.setProperty($.SELECTED.key,[]),this.cfg.setProperty($.PAGEDATE.key,new Date(this.today.getTime())),this.clearEvent.fire()},select:function(e,t){t=null==t||t;for(var i=this._toFieldArray(e),s=[],n=[],r=$.SELECTED.key,o=0;o<i.length;++o){var a=i[o],e=this._toDate(a);this.isDateOOB(e)||(0===s.length&&(t&&this.beforeSelectEvent.fire(),n=this.cfg.getProperty(r)),s.push(e),-1==this._indexOfSelectedFieldArray(a)&&(n[n.length]=a))}return 0<s.length&&(this.parent?this.parent.cfg.setProperty(r,n):this.cfg.setProperty(r,n),t&&this.selectEvent.fire({target:this,date:this.MULTI_SELECT?s:s[0]})),this.getSelectedDates()},selectCell:function(e){var t,i,s,n,r=this.cells[e],o=this.cellDates[e],a=this._toDate(o);return X.hasClass(r,this.Style.CSS_CELL_SELECTABLE)&&(this.beforeSelectEvent.fire(),t=$.SELECTED.key,i=this.cfg.getProperty(t),s=o.concat(),-1==this._indexOfSelectedFieldArray(s)&&(i[i.length]=s),this.parent?this.parent.cfg.setProperty(t,i):this.cfg.setProperty(t,i),this.renderCellStyleSelected(a,r),n=this.toDate(s),this.selectEvent.fire({target:this,date:this.MULTI_SELECT?[n]:n}),this.doCellMouseOut.call(r,null,this)),this.getSelectedDates()},deselect:function(e){for(var t=this._toFieldArray(e),i=[],s=[],n=$.SELECTED.key,r=0;r<t.length;++r){var o,a=t[r],e=this._toDate(a);this.isDateOOB(e)||(0===i.length&&(this.beforeDeselectEvent.fire(),s=this.cfg.getProperty(n)),i.push(e),-1!=(o=this._indexOfSelectedFieldArray(a))&&s.splice(o,1))}return 0<i.length&&(this.parent?this.parent.cfg.setProperty(n,s):this.cfg.setProperty(n,s),this.deselectEvent.fire({target:this,date:this.MULTI_SELECT?i:i[0]})),this.getSelectedDates()},deselectCell:function(e){var t,i,s,n,r=this.cells[e],o=this.cellDates[e],a=this._indexOfSelectedFieldArray(o);return X.hasClass(r,this.Style.CSS_CELL_SELECTABLE)&&(this.beforeDeselectEvent.fire(),t=this.cfg.getProperty($.SELECTED.key),i=this._toDate(o),s=o.concat(),-1<a&&(this.cfg.getProperty($.PAGEDATE.key).getMonth()==i.getMonth()&&this.cfg.getProperty($.PAGEDATE.key).getFullYear()==i.getFullYear()&&(X.removeClass(r,this.Style.CSS_CELL_SELECTED),Rui.useAccessibility()&&r.removeAttribute("aria-selected")),t.splice(a,1)),this.parent?this.parent.cfg.setProperty($.SELECTED.key,t):this.cfg.setProperty($.SELECTED.key,t),n=this.toDate(s),this.deselectEvent.fire({target:this,date:this.MULTI_SELECT?[n]:n})),this.getSelectedDates()},deselectAll:function(){this.beforeDeselectEvent.fire();var e=$.SELECTED.key,t=this.cfg.getProperty(e),i=t.length,s=t.concat();this.parent?this.parent.cfg.setProperty(e,[]):this.cfg.setProperty(e,[]);for(var n=[],r=0;r<s.length;r++)n.push(this.toDate(s[r]));return 0<i&&this.deselectEvent.fire({target:this,date:this.MULTI_SELECT?n:n[0]}),this.getSelectedDates()},_toFieldArray:function(e){var t=[];if(e instanceof Date)t=[[e.getFullYear(),e.getMonth()+1,e.getDate()]];else if(Rui.isString(e))t=this._parseDates(e);else if(g.isArray(e))for(var i=0;i<e.length;++i){var s=e[i];t[t.length]=[s.getFullYear(),s.getMonth()+1,s.getDate()]}return t},toDate:function(e){return this._toDate(e)},_toDate:function(e){return e instanceof Date?e:Rui.util.LDate.getDate(e[0],e[1]-1,e[2])},_fieldArraysAreEqual:function(e,t){var i=!1;return e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&(i=!0),i},_indexOfSelectedFieldArray:function(e){for(var t=-1,i=this.cfg.getProperty($.SELECTED.key),s=0;s<i.length;++s){var n=i[s];if(e[0]==n[0]&&e[1]==n[1]&&e[2]==n[2]){t=s;break}}return t},isDateOOM:function(e){return e.getMonth()!=this.cfg.getProperty($.PAGEDATE.key).getMonth()},isDateOOB:function(e){var t=this.cfg.getProperty($.MINDATE.key),i=this.cfg.getProperty($.MAXDATE.key),s=Rui.util.LDate,t=t&&s.clearTime(t),i=i&&s.clearTime(i),n=new Date(e.getTime()),n=s.clearTime(n);return t&&n.getTime()<t.getTime()||i&&n.getTime()>i.getTime()},_parsePageDate:function(e){var t,i,s;return e?e instanceof Date?Rui.util.LDate.getFirstDayOfMonth(e):(t=e.split(this.cfg.getProperty($.DATE_FIELD_DELIMITER.key)),i=parseInt(t[this.cfg.getProperty($.MY_MONTH_POSITION.key)-1],10)-1,s=parseInt(t[this.cfg.getProperty($.MY_YEAR_POSITION.key)-1],10),Rui.util.LDate.getDate(s,i,1)):Rui.util.LDate.getDate(this.today.getFullYear(),this.today.getMonth(),1)},onBeforeSelect:function(){!1===this.cfg.getProperty($.MULTI_SELECT.key)&&(this.parent?(this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED),this.parent.deselectAll()):(this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED),this.deselectAll()))},onSelect:function(e){},onBeforeDeselect:function(){},onDeselect:function(e){},onChangePage:function(){this.render()},onRender:function(){},onReset:function(){this.render()},onClear:function(){this.render()},validate:function(){return!0},_parseDate:function(e){var t,i=e.split(this.Locale.DATE_FIELD_DELIMITER);2==i.length?(t=[i[this.Locale.MD_MONTH_POSITION-1],i[this.Locale.MD_DAY_POSITION-1]]).type=z.MONTH_DAY:(t=[i[this.Locale.MDY_YEAR_POSITION-1],i[this.Locale.MDY_MONTH_POSITION-1],i[this.Locale.MDY_DAY_POSITION-1]]).type=z.DATE;for(var s=0;s<t.length;s++)t[s]=parseInt(t[s],10);return t},_parseDates:function(e){for(var t=[],i=e.split(this.Locale.DATE_DELIMITER),s=0;s<i.length;++s){var n,r,o,a,l,h=i[s];-1!=h.indexOf(this.Locale.DATE_RANGE_DELIMITER)?(n=h.split(this.Locale.DATE_RANGE_DELIMITER),r=this._parseDate(n[0]),o=this._parseDate(n[1]),a=this._parseRange(r,o),t=t.concat(a)):(l=this._parseDate(h),t.push(l))}return t},_parseRange:function(e,t){var i=Rui.util.LDate.add(Rui.util.LDate.getDate(e[0],e[1]-1,e[2]),Rui.util.LDate.DAY,1),s=Rui.util.LDate.getDate(t[0],t[1]-1,t[2]),n=[];for(n.push(e);i.getTime()<=s.getTime();)n.push([i.getFullYear(),i.getMonth()+1,i.getDate()]),i=Rui.util.LDate.add(i,Rui.util.LDate.DAY,1);return n},resetRenderers:function(){this.renderStack=this._renderStack.concat()},removeRenderers:function(){this._renderStack=[],this.renderStack=[]},clearElement:function(e){e.innerHTML="&#160;",e.className=""},addRenderer:function(e,t){for(var i=this._parseDates(e),s=0;s<i.length;++s){var n=i[s];2==n.length?n[0]instanceof Array?this._addRenderer(z.RANGE,n,t):this._addRenderer(z.MONTH_DAY,n,t):3==n.length&&this._addRenderer(z.DATE,n,t)}},_addRenderer:function(e,t,i){var s=[e,t,i];this.renderStack.unshift(s),this._renderStack=this.renderStack.concat()},addMonthRenderer:function(e,t){this._addRenderer(z.MONTH,[e],t)},addWeekdayRenderer:function(e,t){this._addRenderer(z.WEEKDAY,[e],t)},clearAllBodyCellStyles:function(e){for(var t=0;t<this.cells.length;++t)X.removeClass(this.cells[t],e),Rui.useAccessibility()&&e==this.Style.CSS_CELL_SELECTED&&this.cells[t].removeAttribute("aria-selected")},setMonth:function(e){var t=$.PAGEDATE.key,i=this.cfg.getProperty(t);i.setMonth(parseInt(e,10)),this.cfg.setProperty(t,i)},setYear:function(e){var t=$.PAGEDATE.key,i=this.cfg.getProperty(t);i.setFullYear(parseInt(e,10)),this.cfg.setProperty(t,i)},getSelectedDates:function(){for(var e=[],t=this.cfg.getProperty($.SELECTED.key),i=0;i<t.length;++i){var s=t[i],n=Rui.util.LDate.getDate(s[0],s[1]-1,s[2]);e.push(n)}return e.sort(function(e,t){return e-t}),e},hide:function(){this.beforeHideEvent.fire()&&(Rui.useAccessibility()&&this.oDomContainer.setAttribute("aria-hidden","true"),this.oDomContainer.style.display="none",this.hideEvent.fire())},show:function(){this.beforeShowEvent.fire()&&(this.oDomContainer.style.display="block",Rui.useAccessibility()&&this.oDomContainer.setAttribute("aria-hidden","false"),this.isSyncIframeSize||this._syncIframeSize(),this.showEvent.fire())},_syncIframeSize:function(){var e;this.iframe&&this.oDomContainer&&(e=Rui.get(this.oDomContainer),this.iframe.style.width=e.getWidth()+"px",this.iframe.style.height=e.getHeight()+"px",this.isSyncIframeSize=!0)},browser:-1!=(e=navigator.userAgent.toLowerCase()).indexOf("opera")?"opera":-1!=e.indexOf("msie 7")?"ie7":-1!=e.indexOf("msie")?"ie":-1!=e.indexOf("safari")?"safari":-1!=e.indexOf("gecko")&&"gecko",toString:function(){return"LCalendar "+this.id},destroy:function(){var e;this.beforeDestroyEvent.fire()&&((e=this).navigator&&e.navigator.destroy(),e.cfg&&e.cfg.destroy(),E.purgeElement(e.oDomContainer,!0),X.removeClass(e.oDomContainer,"withtitle"),X.removeClass(e.oDomContainer,e.Style.CSS_CONTAINER),X.removeClass(e.oDomContainer,e.Style.CSS_SINGLE),e.oDomContainer.innerHTML="",e.oDomContainer.parentNode&&e.oDomContainer.parentNode.removeChild(e.oDomContainer),e.oDomContainer=null,e.cells=null,this.destroyEvent.fire())},on:function(e,t,i,s){var n=this[e+"Event"];n&&n.on(t,i||this,!!Rui.isUndefined(s)||s)}},Rui.ui.calendar.LCalendar=z}(),function(){var d=Rui.util.LDom,r=Rui.util.LDate,s=Rui.util.LEvent,o=Rui.ui.calendar.LCalendar;function n(e,t,i){1==arguments.length&&"object"==typeof e&&(e=t=(i=e).applyTo||e.renderTo||Rui.id()),i=Rui.applyIf(i,Rui.getConfig().getFirst("$.ext.calendarGroup.defaultProperties")),0<arguments.length&&this.init.call(this,e,t,i),i&&(i.applyTo||i.renderTo)&&this.render()}(n._DEFAULT_CONFIG=o._DEFAULT_CONFIG).PAGES={key:"pages",value:2};var f=n._DEFAULT_CONFIG;n.prototype={today:null,init:function(e,t,i){var s=this._parseArgs(arguments);e=s.id,t=s.container,i=s.config,this.oDomContainer=d.get(t),this.oDomContainer.id||(this.oDomContainer.id=d.generateId()),e=e||this.oDomContainer.id+"_t",this.id=e,this.containerId=this.oDomContainer.id,this.initEvents(),this.initStyles(),this.pages=[],d.addClass(this.oDomContainer,n.CSS_CONTAINER),d.addClass(this.oDomContainer,n.CSS_MULTI_UP),d.addClass(this.oDomContainer,"L-fixed"),this.cfg=new Rui.ui.LConfig(this),this.Options={},this.Locale={},!this.today&&i&&i.today&&(this.today=i.today),this.setupConfig(),i&&this.cfg.applyConfig(i,!0),this.cfg.fireQueue(),Rui.browser.opera&&(this.renderEvent.on(this._fixWidth,this,!0),this.showEvent.on(this._fixWidth,this,!0))},setupConfig:function(){var e=this.cfg;e.addProperty(f.PAGES.key,{value:f.PAGES.value,validator:e.checkNumber,handler:this.configPages}),e.addProperty(f.PAGEDATE.key,{value:new Date,handler:this.configPageDate}),e.addProperty(f.SELECTED.key,{value:[],handler:this.configSelected}),e.addProperty(f.TITLE.key,{value:f.TITLE.value,handler:this.configTitle}),e.addProperty(f.CLOSE.key,{value:f.CLOSE.value,handler:this.configClose}),e.addProperty(f.IFRAME.key,{value:f.IFRAME.value,handler:this.configIframe,validator:e.checkBoolean}),e.addProperty(f.MINDATE.key,{value:f.MINDATE.value,handler:this.delegateConfig}),e.addProperty(f.MAXDATE.key,{value:f.MAXDATE.value,handler:this.delegateConfig}),e.addProperty(f.MULTI_SELECT.key,{value:f.MULTI_SELECT.value,handler:this.delegateConfig,validator:e.checkBoolean}),e.addProperty(f.START_WEEKDAY.key,{value:f.START_WEEKDAY.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.SHOW_WEEKDAYS.key,{value:f.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:e.checkBoolean}),e.addProperty(f.SHOW_WEEK_HEADER.key,{value:f.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:e.checkBoolean}),e.addProperty(f.SHOW_WEEK_FOOTER.key,{value:f.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:e.checkBoolean}),e.addProperty(f.HIDE_BLANK_WEEKS.key,{value:f.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:e.checkBoolean}),e.addProperty(f.NAV_ARROW_LEFT.key,{value:f.NAV_ARROW_LEFT.value,handler:this.delegateConfig}),e.addProperty(f.NAV_ARROW_RIGHT.key,{value:f.NAV_ARROW_RIGHT.value,handler:this.delegateConfig}),e.addProperty(f.MONTHS_SHORT.key,{value:f.MONTHS_SHORT.value,handler:this.delegateConfig}),e.addProperty(f.MONTHS_LONG.key,{value:f.MONTHS_LONG.value,handler:this.delegateConfig}),e.addProperty(f.WEEKDAYS_1CHAR.key,{value:f.WEEKDAYS_1CHAR.value,handler:this.delegateConfig}),e.addProperty(f.WEEKDAYS_SHORT.key,{value:f.WEEKDAYS_SHORT.value,handler:this.delegateConfig}),e.addProperty(f.WEEKDAYS_MEDIUM.key,{value:f.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig}),e.addProperty(f.WEEKDAYS_LONG.key,{value:f.WEEKDAYS_LONG.value,handler:this.delegateConfig}),e.addProperty(f.LOCALE_MONTHS.key,{value:f.LOCALE_MONTHS.value,handler:this.delegateConfig}),e.addProperty(f.LOCALE_WEEKDAYS.key,{value:f.LOCALE_WEEKDAYS.value,handler:this.delegateConfig}),e.addProperty(f.DATE_DELIMITER.key,{value:f.DATE_DELIMITER.value,handler:this.delegateConfig}),e.addProperty(f.DATE_FIELD_DELIMITER.key,{value:f.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig}),e.addProperty(f.DATE_RANGE_DELIMITER.key,{value:f.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig}),e.addProperty(f.MY_MONTH_POSITION.key,{value:f.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MY_YEAR_POSITION.key,{value:f.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MD_MONTH_POSITION.key,{value:f.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MD_DAY_POSITION.key,{value:f.MD_DAY_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MDY_MONTH_POSITION.key,{value:f.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MDY_DAY_POSITION.key,{value:f.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MDY_YEAR_POSITION.key,{value:f.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MY_LABEL_MONTH_POSITION.key,{value:f.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MY_LABEL_YEAR_POSITION.key,{value:f.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:e.checkNumber}),e.addProperty(f.MY_LABEL_MONTH_SUFFIX.key,{value:f.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig}),e.addProperty(f.MY_LABEL_YEAR_SUFFIX.key,{value:f.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig}),e.addProperty(f.NAV.key,{value:f.NAV.value,handler:this.configNavigator}),e.addProperty(f.STRINGS.key,{value:f.STRINGS.value,handler:this.configStrings,validator:function(e){return Rui.isObject(e)},supercedes:f.STRINGS.supercedes})},initEvents:function(){function e(e,t,i){for(var s=0;s<n.pages.length;++s){n.pages[s][this.type+"Event"].on(e,t,i)}}function t(e,t){for(var i=0;i<n.pages.length;++i){n.pages[i][this.type+"Event"].unOn(e,t)}}var n=this,i=Rui.util.LCustomEvent,s=o._EVENT_TYPES;n.beforeSelectEvent=new i(s.BEFORE_SELECT),n.beforeSelectEvent.on=e,n.beforeSelectEvent.unOn=t,n.selectEvent=new i(s.SELECT),n.selectEvent.on=e,n.selectEvent.unOn=t,n.beforeDeselectEvent=new i(s.BEFORE_DESELECT),n.beforeDeselectEvent.on=e,n.beforeDeselectEvent.unOn=t,n.deselectEvent=new i(s.DESELECT),n.deselectEvent.on=e,n.deselectEvent.unOn=t,n.beforeChangePageEvent=new i(s.BEFORE_CHANGE_PAGE),n.beforeChangePageEvent.on=e,n.beforeChangePageEvent.unOn=t,n.changePageEvent=new i(s.CHANGE_PAGE),n.changePageEvent.on=e,n.changePageEvent.unOn=t,n.beforeRenderEvent=new i(s.BEFORE_RENDER),n.beforeRenderEvent.on=e,n.beforeRenderEvent.unOn=t,n.renderEvent=new i(s.RENDER),n.renderEvent.on=e,n.renderEvent.unOn=t,n.resetEvent=new i(s.RESET),n.resetEvent.on=e,n.resetEvent.unOn=t,n.clearEvent=new i(s.CLEAR),n.clearEvent.on=e,n.clearEvent.unOn=t,n.beforeShowEvent=new i(s.BEFORE_SHOW),n.showEvent=new i(s.SHOW),n.beforeHideEvent=new i(s.BEFORE_HIDE),n.hideEvent=new i(s.HIDE),n.beforeShowNavEvent=new i(s.BEFORE_SHOW_NAV),n.showNavEvent=new i(s.SHOW_NAV),n.beforeHideNavEvent=new i(s.BEFORE_HIDE_NAV),n.hideNavEvent=new i(s.HIDE_NAV),n.beforeRenderNavEvent=new i(s.BEFORE_RENDER_NAV),n.renderNavEvent=new i(s.RENDER_NAV),n.beforeDestroyEvent=new i(s.BEFORE_DESTROY),n.destroyEvent=new i(s.DESTROY)},configPages:function(e,t,i){for(var s,n=t[0],r=f.PAGEDATE.key,o=null,a=0;a<n;++a){var l=this.id+"_"+a,h=this.containerId+"_"+a,u=this.cfg.getConfig();u.close=!1,u.title=!1,u.navigator=null,0<a&&(s=new Date(o),this._setMonthOnDate(s,s.getMonth()+a),u.pageDate=s);var c=this.constructChild(l,h,u);d.removeClass(c.oDomContainer,this.Style.CSS_SINGLE),d.addClass(c.oDomContainer,"groupcal"),0===a&&(o=c.cfg.getProperty(r),d.addClass(c.oDomContainer,"first-of-type")),a==n-1&&d.addClass(c.oDomContainer,"last-of-type"),c.parent=this,c.index=a,this.pages[this.pages.length]=c}},configPageDate:function(e,t,i){for(var s,n=t[0],r=f.PAGEDATE.key,o=0;o<this.pages.length;++o){var a,l=this.pages[o];0===o?(s=l._parsePageDate(n),l.cfg.setProperty(r,s)):(a=new Date(s),this._setMonthOnDate(a,a.getMonth()+o),l.cfg.setProperty(r,a))}},configSelected:function(e,t,i){var s=f.SELECTED.key;this.delegateConfig(e,t,i);var n=0<this.pages.length?this.pages[0].cfg.getProperty(s):[];this.cfg.setProperty(s,n,!0)},delegateConfig:function(e,t,i){for(var s=t[0],n=0;n<this.pages.length;n++)this.pages[n].cfg.setProperty(e,s)},setProperty:function(e,t){this.cfg.setProperty(e,t)},setChildFunction:function(e,t){for(var i=this.cfg.getProperty(f.PAGES.key),s=0;s<i;++s)this.pages[s][e]=t},callChildFunction:function(e,t){for(var i=this.cfg.getProperty(f.PAGES.key),s=0;s<i;++s){var n=this.pages[s];n[e]&&n[e].call(n,t)}},constructChild:function(e,t,i){var s=document.getElementById(t);return s||((s=document.createElement("div")).id=t,this.oDomContainer.appendChild(s)),this.today&&(i.today=this.today),new o(e,t,i)},setMonth:function(e){var t;e=parseInt(e,10);for(var i=f.PAGEDATE.key,s=0;s<this.pages.length;++s){var n=this.pages[s],r=n.cfg.getProperty(i);0===s?t=r.getFullYear():r.setFullYear(t),this._setMonthOnDate(r,e+s),n.cfg.setProperty(i,r)}},setYear:function(e){var t=f.PAGEDATE.key;e=parseInt(e,10);for(var i=0;i<this.pages.length;++i){var s=this.pages[i];s.cfg.getProperty(t).getMonth()+1==1&&0<i&&(e+=1),s.setYear(e)}},render:function(){this.renderHeader();for(var e=0;e<this.pages.length;++e){this.pages[e].render()}this.renderFooter()},select:function(e){for(var t=0;t<this.pages.length;++t){this.pages[t].select(e)}return this.getSelectedDates()},selectCell:function(e){for(var t=0;t<this.pages.length;++t){this.pages[t].selectCell(e)}return this.getSelectedDates()},deselect:function(e){for(var t=0;t<this.pages.length;++t){this.pages[t].deselect(e)}return this.getSelectedDates()},deselectAll:function(){for(var e=0;e<this.pages.length;++e){this.pages[e].deselectAll()}return this.getSelectedDates()},deselectCell:function(e){for(var t=0;t<this.pages.length;++t){this.pages[t].deselectCell(e)}return this.getSelectedDates()},reset:function(){for(var e=0;e<this.pages.length;++e){this.pages[e].reset()}},clear:function(){for(var e=0;e<this.pages.length;++e){this.pages[e].clear()}this.cfg.setProperty(f.SELECTED.key,[]),this.cfg.setProperty(f.PAGEDATE.key,new Date(this.pages[0].today.getTime())),this.render()},nextMonth:function(){for(var e=0;e<this.pages.length;++e){this.pages[e].nextMonth()}},previousMonth:function(){for(var e=this.pages.length-1;0<=e;--e){this.pages[e].previousMonth()}},nextYear:function(){for(var e=0;e<this.pages.length;++e){this.pages[e].nextYear()}},previousYear:function(){for(var e=0;e<this.pages.length;++e){this.pages[e].previousYear()}},getSelectedDates:function(){for(var e=[],t=this.cfg.getProperty(f.SELECTED.key),i=0;i<t.length;++i){var s=t[i],n=r.getDate(s[0],s[1]-1,s[2]);e.push(n)}return e.sort(function(e,t){return e-t}),e},addRenderer:function(e,t){for(var i=0;i<this.pages.length;++i){this.pages[i].addRenderer(e,t)}},addMonthRenderer:function(e,t){for(var i=0;i<this.pages.length;++i){this.pages[i].addMonthRenderer(e,t)}},addWeekdayRenderer:function(e,t){for(var i=0;i<this.pages.length;++i){this.pages[i].addWeekdayRenderer(e,t)}},removeRenderers:function(){this.callChildFunction("removeRenderers")},renderHeader:function(){},renderFooter:function(){},addMonths:function(e){this.callChildFunction("addMonths",e)},subtractMonths:function(e){this.callChildFunction("subtractMonths",e)},addYears:function(e){this.callChildFunction("addYears",e)},subtractYears:function(e){this.callChildFunction("subtractYears",e)},getCalendarPage:function(e){var t=null;if(e)for(var i=e.getFullYear(),s=e.getMonth(),n=this.pages,r=0;r<n.length;++r){var o=n[r].cfg.getProperty("pagedate");if(o.getFullYear()===i&&o.getMonth()===s){t=n[r];break}}return t},_setMonthOnDate:function(e,t){var i;Rui.browser.webkit&&Rui.browser.webkit<420&&(t<0||11<t)?(i=r.add(e,r.MONTH,t-e.getMonth()),e.setTime(i.getTime())):e.setMonth(t)},_fixWidth:function(){for(var e=0,t=0;t<this.pages.length;++t){e+=this.pages[t].oDomContainer.offsetWidth}0<e&&(this.oDomContainer.style.width=e+"px")},toString:function(){return"LCalendarGroup "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var e=this;e.navigator&&e.navigator.destroy(),e.cfg&&e.cfg.destroy(),s.purgeElement(e.oDomContainer,!0),d.removeClass(e.oDomContainer,n.CSS_CONTAINER),d.removeClass(e.oDomContainer,n.CSS_MULTI_UP);for(var t=0,i=e.pages.length;t<i;t++)e.pages[t].destroy(),e.pages[t]=null;e.oDomContainer.innerHTML="",e.oDomContainer=null,this.destroyEvent.fire()}}},n.CSS_CONTAINER="L-calcontainer",n.CSS_MULTI_UP="L-multi",n.CSS_2UPTITLE="L-title",n.CSS_2UPCLOSE="close-icon",Rui.applyPrototype(n,o,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configStrings","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser"),Rui.ui.calendar.LCalendarGroup=n}(),Rui.ui.calendar.LCalendarNavigator=function(e){this.init(e)},function(){var e=Rui.ui.calendar.LCalendarNavigator;e.CLASSES={NAV:"L-cal-nav",NAV_VISIBLE:"L-cal-nav-visible",MASK:"L-cal-nav-mask",YEAR:"L-cal-nav-y",MONTH:"L-cal-nav-m",BUTTONS:"L-cal-nav-b",BUTTON:"L-cal-nav-btn",ERROR:"L-cal-nav-e",YEAR_CTRL:"L-cal-nav-yc",MONTH_CTRL:"L-cal-nav-mc",INVALID:"L-invalid",DEFAULT:"L-default"},e._DEFAULT_CFG=null,e.ID_SUFFIX="_nav",e.MONTH_SUFFIX="_month",e.YEAR_SUFFIX="_year",e.ERROR_SUFFIX="_error",e.CANCEL_SUFFIX="_cancel",e.SUBMIT_SUFFIX="_submit",e.YR_MAX_DIGITS=4,e.YR_MINOR_INC=1,e.YR_MAJOR_INC=10,e.UPDATE_DELAY=50,e.YR_PATTERN=/^\d+$/,e.TRIM=/^\s*(.*?)\s*$/}(),Rui.ui.calendar.LCalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:!1,init:function(e){var t=e.oDomContainer;this.cal=e,this.id=t.id+Rui.ui.calendar.LCalendarNavigator.ID_SUFFIX,this._doc=t.ownerDocument;var i=Rui.browser.msie;this.__isIEQuirks=i&&(i<=6||"BackCompat"==this._doc.compatMode)},show:function(){var e=Rui.ui.calendar.LCalendarNavigator.CLASSES;this.cal.beforeShowNavEvent.fire()&&(this.__rendered||this.render(),this.clearErrors(),this._updateMonthUI(),this._updateYearUI(),this._show(this.monthComboEl,!!Rui.isUndefined(Rui.ui.calendar.LMonthCalendar)||!(this.cal instanceof Rui.ui.calendar.LMonthCalendar)),this._show(this.navEl,!0),this.setInitialFocus(),this.showMask(),Rui.util.LDom.addClass(this.cal.oDomContainer,e.NAV_VISIBLE),this.cal.showNavEvent.fire())},hide:function(){var e=Rui.ui.calendar.LCalendarNavigator.CLASSES;this.cal.beforeHideNavEvent.fire()&&(this._show(this.navEl,!1),this.hideMask(),Rui.util.LDom.removeClass(this.cal.oDomContainer,e.NAV_VISIBLE),this.cal.hideNavEvent.fire())},showMask:function(){this._show(this.maskEl,!0),this.__isIEQuirks&&this._syncMask()},hideMask:function(){this._show(this.maskEl,!1)},getMonth:function(){return this._month},getYear:function(){return this._year},setMonth:function(e){0<=e&&e<12&&(this._month=e),this._updateMonthUI()},setYear:function(e){var t=Rui.ui.calendar.LCalendarNavigator.YR_PATTERN;Rui.isNumber(e)&&t.test(e+"")&&(this._year=e),this._updateYearUI()},render:function(){this.cal.beforeRenderNavEvent.fire(),this.__rendered||(this.createNav(),this.createMask(),this.applyListeners(),this.__rendered=!0),this.cal.renderNavEvent.fire()},createNav:function(){var e=Rui.ui.calendar.LCalendarNavigator,t=this._doc,i=t.createElement("div");i.className=e.CLASSES.NAV;var s=this.renderNavContents([]);i.innerHTML=s.join(""),this.cal.oDomContainer.appendChild(i),this.navEl=i,this.monthComboEl=i.childNodes[0],this.yearEl=t.getElementById(this.id+e.YEAR_SUFFIX),this.monthEl=t.getElementById(this.id+e.MONTH_SUFFIX),this.errorEl=t.getElementById(this.id+e.ERROR_SUFFIX),this.submitEl=t.getElementById(this.id+e.SUBMIT_SUFFIX),this.cancelEl=t.getElementById(this.id+e.CANCEL_SUFFIX),Rui.browser.gecko&&this.yearEl&&"text"==this.yearEl.type&&this.yearEl.setAttribute("autocomplete","off"),this._setFirstLastElements()},createMask:function(){var e=Rui.ui.calendar.LCalendarNavigator.CLASSES,t=this._doc.createElement("div");t.className=e.MASK,this.cal.oDomContainer.appendChild(t),this.maskEl=t},_syncMask:function(){var e,t=this.cal.oDomContainer;t&&this.maskEl&&(e=Rui.util.LDom.getRegion(t),Rui.util.LDom.setStyle(this.maskEl,"width",e.right-e.left+"px"),Rui.util.LDom.setStyle(this.maskEl,"height",e.bottom-e.top+"px"))},renderNavContents:function(e){var t=Rui.ui.calendar.LCalendarNavigator,i=t.CLASSES,s=e;return s[s.length]='<div class="'+i.MONTH+'">',this.renderMonth(s),s[s.length]="</div>",s[s.length]='<div class="'+i.YEAR+'">',this.renderYear(s),s[s.length]="</div>",s[s.length]='<div class="'+i.BUTTONS+'">',this.renderButtons(s),s[s.length]="</div>",s[s.length]='<div class="'+i.ERROR+'" id="'+this.id+t.ERROR_SUFFIX+'"></div>',s},renderMonth:function(e){var t=Rui.ui.calendar.LCalendarNavigator,i=t.CLASSES,s=this.id+t.MONTH_SUFFIX,n=this.__getCfg("monthFormat"),r=this.cal.cfg.getProperty(n==Rui.ui.calendar.LCalendar.SHORT?"MONTHS_SHORT":"MONTHS_LONG"),o=e;if(r&&0<r.length){o[o.length]='<label for="'+s+'">',o[o.length]=this.__getCfg("month",!0),o[o.length]="</label>",o[o.length]='<select name="'+s+'" id="'+s+'" class="'+i.MONTH_CTRL+'">';for(var a=0;a<r.length;a++)o[o.length]='<option value="'+a+'">',o[o.length]=r[a],o[o.length]="</option>";o[o.length]="</select>"}return o},renderYear:function(e){var t=Rui.ui.calendar.LCalendarNavigator,i=t.CLASSES,s=this.id+t.YEAR_SUFFIX,n=t.YR_MAX_DIGITS,r=e;return r[r.length]='<label for="'+s+'">',r[r.length]=this.__getCfg("year",!0),r[r.length]="</label>",r[r.length]='<input type="text" name="'+s+'" id="'+s+'" class="'+i.YEAR_CTRL+'" maxlength="'+n+'"/>',r},renderButtons:function(e){var t=Rui.ui.calendar.LCalendarNavigator.CLASSES,i=e;return i[i.length]='<span class="'+t.BUTTON+" "+t.DEFAULT+'">',i[i.length]='<button type="button" id="'+this.id+'_submit">',i[i.length]=this.__getCfg("submit",!0),i[i.length]="</button>",i[i.length]="</span>",i[i.length]='<span class="'+t.BUTTON+'">',i[i.length]='<button type="button" id="'+this.id+'_cancel">',i[i.length]=this.__getCfg("cancel",!0),i[i.length]="</button>",i[i.length]="</span>",i},applyListeners:function(){var e=Rui.util.LEvent;e.on(this.submitEl,"click",this.submit,this,!0),e.on(this.cancelEl,"click",this.cancel,this,!0),e.on(this.yearEl,"blur",function(){this.validate()&&this.setYear(this._getYearFromUI())},this,!0),e.on(this.monthEl,"change",function(){this.setMonth(this._getMonthFromUI())},this,!0),this.__isIEQuirks&&Rui.util.LEvent.on(this.cal.oDomContainer,"resize",this._syncMask,this,!0),this.applyKeyListeners()},purgeListeners:function(){var e=Rui.util.LEvent;e.removeListener(this.submitEl,"click",this.submit),e.removeListener(this.cancelEl,"click",this.cancel),e.removeListener(this.yearEl,"blur"),e.removeListener(this.monthEl,"change"),this.__isIEQuirks&&e.removeListener(this.cal.oDomContainer,"resize",this._syncMask),this.purgeKeyListeners()},applyKeyListeners:function(){var e=Rui.util.LEvent,t=Rui.browser,i=t.ie||t.webkit?"keydown":"keypress",s=t.ie||t.opera||t.webkit?"keydown":"keypress";e.on(this.yearEl,"keypress",this._handleEnterKey,this,!0),e.on(this.yearEl,i,this._handleDirectionKeys,this,!0),e.on(this.lastCtrl,s,this._handleTabKey,this,!0),e.on(this.firstCtrl,s,this._handleShiftTabKey,this,!0)},purgeKeyListeners:function(){var e=Rui.util.LEvent,t=Rui.browser,i=t.ie||t.webkit?"keydown":"keypress",s=t.ie||t.opera||t.webkit?"keydown":"keypress";e.removeListener(this.yearEl,"keypress",this._handleEnterKey),e.removeListener(this.yearEl,i,this._handleDirectionKeys),e.removeListener(this.lastCtrl,s,this._handleTabKey),e.removeListener(this.firstCtrl,s,this._handleShiftTabKey)},submit:function(){var e,t,i;this.validate()&&(this.hide(),this.setMonth(this._getMonthFromUI()),this.setYear(this._getYearFromUI()),e=this.cal,0<(t=Rui.ui.calendar.LCalendarNavigator.UPDATE_DELAY)?(i=this,window.setTimeout(function(){i._update(e)},t)):this._update(e))},_update:function(e){e.setYear(this.getYear()),e.setMonth(this.getMonth()),e.render()},cancel:function(){this.hide()},validate:function(){return null!==this._getYearFromUI()?(this.clearErrors(),!0):(this.setYearError(),this.setError(this.__getCfg("invalidYear",!0)),!1)},setError:function(e){this.errorEl&&(this.errorEl.innerHTML=e,this._show(this.errorEl,!0))},clearError:function(){this.errorEl&&(this.errorEl.innerHTML="",this._show(this.errorEl,!1))},setYearError:function(){Rui.util.LDom.addClass(this.yearEl,Rui.ui.calendar.LCalendarNavigator.CLASSES.INVALID)},clearYearError:function(){Rui.util.LDom.removeClass(this.yearEl,Rui.ui.calendar.LCalendarNavigator.CLASSES.INVALID)},clearErrors:function(){this.clearError(),this.clearYearError()},setInitialFocus:function(){var e=this.submitEl,t=this.__getCfg("initialFocus");if(t&&t.toLowerCase)if("year"==(t=t.toLowerCase())){e=this.yearEl;try{this.yearEl.select()}catch(e){}}else"month"==t&&(e=this.monthEl);if(e&&Rui.isFunction(e.focus))try{e.focus()}catch(e){}},erase:function(){var e,t;this.__rendered&&(this.purgeListeners(),this.yearEl=null,this.monthEl=null,this.errorEl=null,this.submitEl=null,this.cancelEl=null,this.firstCtrl=null,this.lastCtrl=null,this.navEl&&(this.navEl.innerHTML=""),(e=this.navEl.parentNode)&&e.removeChild(this.navEl),this.navEl=null,(t=this.maskEl.parentNode)&&t.removeChild(this.maskEl),this.maskEl=null,this.__rendered=!1)},destroy:function(){this.erase(),this._doc=null,this.cal=null,this.id=null},_show:function(e,t){e&&Rui.util.LDom.setStyle(e,"display",t?"block":"none")},_getMonthFromUI:function(){return this.monthEl?this.monthEl.selectedIndex:0},_getYearFromUI:function(){var e,t=Rui.ui.calendar.LCalendarNavigator,i=null;return this.yearEl&&(e=(e=this.yearEl.value).replace(t.TRIM,"$1"),t.YR_PATTERN.test(e)&&(i=parseInt(e,10))),i},_updateYearUI:function(){this.yearEl&&null!==this._year&&(this.yearEl.value=this._year)},_updateMonthUI:function(){this.monthEl&&(this.monthEl.selectedIndex=this._month)},_setFirstLastElements:function(){this.firstCtrl=this.monthEl,this.lastCtrl=this.cancelEl,this.__isMac&&(Rui.browser.webkit&&Rui.browser.webkit<420&&(this.firstCtrl=this.monthEl,this.lastCtrl=this.yearEl),Rui.browser.gecko&&(this.firstCtrl=this.yearEl,this.lastCtrl=this.yearEl))},_handleEnterKey:function(e){var t=Rui.util.LKey.KEY;Rui.util.LEvent.getCharCode(e)==t.ENTER&&(Rui.util.LEvent.preventDefault(e),this.submit())},_handleDirectionKeys:function(e){var t=Rui.util.LEvent,i=Rui.util.LKey.KEY,s=Rui.ui.calendar.LCalendarNavigator,n=this.yearEl.value?parseInt(this.yearEl.value,10):null;if(isFinite(n)){var r=!1;switch(t.getCharCode(e)){case i.UP:this.yearEl.value=n+s.YR_MINOR_INC,r=!0;break;case i.DOWN:this.yearEl.value=Math.max(n-s.YR_MINOR_INC,0),r=!0;break;case i.PAGE_UP:this.yearEl.value=n+s.YR_MAJOR_INC,r=!0;break;case i.PAGE_DOWN:this.yearEl.value=Math.max(n-s.YR_MAJOR_INC,0),r=!0}if(r){t.preventDefault(e);try{this.yearEl.select()}catch(e){}}}},_handleTabKey:function(e){var t=Rui.util.LEvent,i=Rui.util.LKey.KEY;if(t.getCharCode(e)==i.TAB&&!e.shiftKey)try{t.preventDefault(e),this.firstCtrl.focus()}catch(e){}},_handleShiftTabKey:function(e){var t=Rui.util.LEvent,i=Rui.util.LKey.KEY;if(e.shiftKey&&t.getCharCode(e)==i.TAB)try{t.preventDefault(e),this.lastCtrl.focus()}catch(e){}},getDefaultCfg:function(){var e;return Rui.ui.calendar.LCalendarNavigator._DEFAULT_CFG||(e=Rui.getMessageManager(),Rui.ui.calendar.LCalendarNavigator._DEFAULT_CFG={strings:{month:e.get("$.core.calendarNavigatorLabelMonth"),year:e.get("$.core.calendarNavigatorLabelYear"),submit:e.get("$.base.msg044"),cancel:e.get("$.base.msg121"),invalidYear:"Year needs to be a number"},monthFormat:Rui.ui.calendar.LCalendar.LONG,initialFocus:"year"}),Rui.ui.calendar.LCalendarNavigator._DEFAULT_CFG},__getCfg:function(e,t){var i=this.getDefaultCfg(),s=this.cal.cfg.getProperty("navigator");return t?!0!==s&&s.strings&&s.strings[e]?s.strings[e]:i.strings[e]:!0!==s&&s[e]?s[e]:i[e]},__isMac:-1!=navigator.userAgent.toLowerCase().indexOf("macintosh")},Rui.namespace("Rui.ui.form"),Rui.ui.form.LForm=function(e,t){this.id=e,t=t||{},t=Rui.applyIf(t,Rui.getConfig().getFirst("$.ext.form.defaultProperties")),Rui.ui.form.LForm.superclass.constructor.call(this,t),this.validatorManager=null,Rui.applyObject(this,t,!0),null==this.validatorManager&&t.validators&&(this.validatorManager=new Rui.validate.LValidatorManager({validators:t.validators})),this.dm=new Rui.data.LDataSetManager(this.dataSetManagerOptions),this.dm.on("upload",this.onUpload,this,!0),this.dm.on("success",this.onSuccess,this,!0),this.dm.on("failure",this.onFailure,this,!0),this.createEvent("beforesubmit"),this.createEvent("invalid"),this.createEvent("success"),this.createEvent("failure"),this.createEvent("reset")},Rui.extend(Rui.ui.form.LForm,Rui.ui.LUIComponent,{otype:"Rui.ui.form.LForm",initComponent:function(e){var t=Rui.select("form[name="+this.id+"]");0<t.length?this.el=t.getAt(0):this.el=Rui.get(this.id)},setValidatorManager:function(e){this.validatorManager=e},submit:function(){if(0!=this.fireEvent("beforesubmit",this))return!!this.validate()&&(this.dm.updateForm({url:this.el.dom.action,form:this.id}),!0)},onSuccess:function(e){this.fireEvent("success",e)},onFailure:function(e){this.fireEvent("failure",e)},onUpload:function(e){this.fireEvent("success",e)},onReset:function(){},reset:function(){this.el.dom.reset(),this.fireEvent("reset",{target:this})},validate:function(){if(null==this.validatorManager)return!0;var e,t=this.validatorManager.validateGroup(this.id);return 0==t&&(e=this.validatorManager.getInvalidList(),this.fireEvent("invalid",{target:this,invalidList:e,isValid:t})),t},clearInvalid:function(){var e=this._getChildList();Rui.util.LArray.each(e,function(e){Rui.get(e).valid()},this)},enable:function(e){e=Rui.isUndefined(e)?this._getChildList():e,Rui.util.LArray.each(e,function(e){var t=Rui.get(e);t&&t.enable()},this)},disable:function(e){e=Rui.isUndefined(e)?this._getChildList():e,Rui.util.LArray.each(e,function(e){var t=Rui.get(e);t&&t.disable()},this)},isDisable:function(e){var i=!1;return e=Rui.isUndefined(e)?this._getChildList():e,Rui.util.LArray.each(e,function(e){var t=Rui.get(e);t&&(i=t.isDisable())},this),i},getValues:function(){var r={},e=this._getChildList();return Rui.util.LArray.each(e,function(e){var t=Rui.get(e),i=t.dom,s=i.name||i.id,n=t.get("value");("checkbox"!=i.type&&"radio"!=i.type||!0===i.checked)&&(r[s]=n)},this),r},setValues:function(r){var e=this._getChildList();Rui.util.LArray.each(e,function(e){var t=Rui.get(e),i=t.dom,s=i.name||i.id,n=r[s];n&&("radio"==i.type||"checkbox"==i.type?i.checked=i.value==n:t.setValue(n))},this)},findField:function(i){var s=null,e=this._getChildList();return Rui.util.LArray.each(e,function(e){var t=Rui.get(e);if(t.dom.id==i||t.dom.name==i)return s=t.dom,!1},this),s},isValid:function(){var t=!0,e=this._getChildList();return Rui.util.LArray.each(e,function(e){if(0==Rui.get(e).isValid())return t=!1},this),t},destroy:function(){this.unOnAll()},updateRecord:function(e){var t=e.getValues();this.setValues(t)},loadRecord:function(e){var t=this.getValues();return e.setValues(t),e},_getChildList:function(){return Rui.util.LDomSelector.query("input,select,textarea",this.el.dom)}}),function(){var i=Rui.util.LEvent;Rui.ui.LActionMenuSupport=function(e){},Rui.ui.LActionMenuSupport={createActionMenu:function(e){if(0!=e.useActionMenu){var t=new Rui.ui.grid.LActionMenuGrid({gridPanel:e});return e.el.on("touchstart",function(e){e.touches&&e.touches.length<3||this.showTabletViewer()},e,!0),e.on("cellMouseDown",t.onCellMouseDown,t,!0,{system:!0}),t.el.setAttribute("data-menu-type","left"),e.on("cellclick",function(e){t.setXY([i.getPageX(e.event),i.getPageY(e.event)])}),t}}}}(),function(){var s=Rui.util.LEvent;Rui.ui.LActionMenu=function(e){Rui.applyObject(this,e,!0),this.createContainer(),this.gridPanel.on("cellClick",this.onCellClick,this,!0)},Rui.ui.LActionMenu.prototype={createContainer:function(){var e=new Rui.LTemplate('<div class="L-{cssBase} L-hide-display">',"<ul>{menuList}</ul>","</div>"),t=Rui.getMessageManager(),i="";i+=new Rui.LTemplate('<li class="L-action-menu-li L-menu-type-left L-hide-display L-mobile-menu"><span class="L-action-menu-item L-fn-on-dbl-click L-ignore-blur">{menuName}</span></li>','<li class="L-action-menu-li L-menu-type-left L-hide-display L-mobile-menu L-tablet-mode-{tabletMode}"><span class="L-action-menu-item L-fn-on-tablet-click L-ignore-blur">{tabletName}</span></li>','<li class="L-action-menu-li-hr L-menu-type-left L-hide-display L-mobile-menu"> </li>','<li class="L-action-menu-li L-menu-type-right"><span class="L-action-menu-item L-fn-on-sum-click L-ignore-blur">{sumName}</span></li>','<li class="L-action-menu-li-hr L-menu-type-left"> </li>','<li class="L-action-menu-li L-menu-type-right"><span class="L-action-menu-item L-fn-on-clipboard-copy L-ignore-blur">{clipboardCopy}</span></li>','<li class="L-action-menu-li-hr L-menu-type-left"> </li>','<li class="L-action-menu-li L-menu-type-right"><span class="L-action-menu-item L-fn-on-clipboard-paste L-ignore-blur">{clipboardPaste}</span></li>').apply({tabletMode:this.gridPanel.tabletMode,menuName:"Cell Double Click",tabletName:"Tablet Mode",sumName:t.get("$.base.msg139"),clipboardCopy:t.get("$.base.msg128"),clipboardPaste:t.get("$.base.msg129")}),this.el=Rui.createElements(e.apply({cssBase:this.CSS_BASE,menuList:i})).getAt(0),this.el.on("click",this.invokeClick,this,!0),Rui.util.LEvent.addListener(Rui.browser.msie?document.body:document,"mousedown",this.deferOnBlur,this,!0),Rui.getBody().appendChild(this.el),Rui.platform.isMobile&&this.el.select(".L-mobile-menu").show()},deferOnBlur:function(e){Rui.util.LFunction.defer(this.checkBlur,10,this,[e])},checkBlur:function(e){var t;1!=e.deferCancelBubble&&!0===this.isFocus&&(t=e.target,this.gridPanel.el.isAncestor(t)||this.el.isAncestor(t)||this.hideActionMenu())},hideActionMenu:function(e){this.el.hide()},setXY:function(e){e[0]-=70,e[1]-=100,this.el.setXY(e)},onCellClick:function(e){var t,i;Rui.platform.isMobile&&(this.el.setAttribute("data-menu-type","left"),t=s.getPageX(e.event),i=s.getPageY(e.event),this.el.show(),this.setXY([t,i]))},onCellMouseDown:function(e){var t=this.gridPanel;2!==e.event.button&&3!==e.event.button||!t.useRightActionMenu||(this.el.setAttribute("data-menu-type","right"),this.el.show(),this.setXY([s.getPageX(e.event),s.getPageY(e.event)]))},invokeClick:function(e){Rui.util.LDom.invokeFn(e.target,this,e)},onDblClick:function(e){},onTabletClick:function(e){this.gridPanel.showTabletViewer()}}}();