/*
 * @(#) rui_fx-min.js
 * 
 * DevOn RUI
 * Build Version : 2.8
 * 
 * Copyright ⓒ LG CNS, Inc. All rights reserved.
 *
 * DevOn RUI의 모든 저작물은 LG CNS 의 지적재산입니다.
 * LG CNS로 부터 허가 받지 않은 경우 사용, 열람, 복사, 수정, 재배포 할 수 없으며 외부로의 유출을 금지합니다.
 * 특히 소스 코드를 수정하는 경우 기술 지원의 대상이 되지 않을 수 있습니다.
 * 자세한 사항은 계약사항에 따릅니다. 기타 사항은 devon@lgcns.com 으로 문의 하십시오.
 *
 * Do Not Erase This Comment!!! (이 주석문을 지우지 말것)
 *
 * rui/license.txt를 반드시 읽어보고 사용하시기 바랍니다. License.txt파일은 절대로 삭제하시면 안됩니다. 
 *
 * 1. 사내 사용시 KAMS를 통해 요청하여 사용허가를 받으셔야 소프트웨어 라이센스 계약서에 동의하는 것으로 간주됩니다.
 * 2. DevOn RUI가 포함된 제품을 판매하실 경우에도 KAMS를 통해 요청하여 사용허가를 받으셔야 합니다.
 * 3. KAMS를 통해 사용허가를 받지 않은 경우 소프트웨어 라이센스 계약을 위반한 것으로 간주됩니다.
 * 4. 별도로 판매될 경우는 LGCNS의 소프트웨어 판매정책을 따릅니다.
 */
Rui.namespace("Rui.fx"),Rui.fx.LAnim=function(t){(t=t||{}).applyTo&&(t.el=t.applyTo),this.init(t),this.createEvent("start"),this.createEvent("tween"),this.createEvent("complete")},Rui.extend(Rui.fx.LAnim,Rui.util.LEventProvider,{otype:"Rui.fx.LAnim",patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(t,i,e){return this.method(this.currentFrame,i,e-i,this.totalFrames)},setAttribute:function(t,i,e){this.patterns.noNegatives.test(t)&&(i=0<i?i:0),Rui.util.LDom.setStyle(this.getEl(),t,i+e)},getAttribute:function(t){var i=this.getEl(),e=Rui.util.LDom.getStyle(i,t);if("auto"!==e&&!this.patterns.offsetUnit.test(e))return parseFloat(e);var n=this.patterns.offsetAttribute.exec(t)||[],r=!!n[3];return e=!!n[2]||"absolute"==Rui.util.LDom.getStyle(i,"position")&&r?i["offset"+n[0].charAt(0).toUpperCase()+n[0].substr(1)]:0},getDefaultUnit:function(t){return this.patterns.defaultUnit.test(t)?"px":""},setRuntimeAttribute:function(t){var i,e,n=this.attributes;this.runtimeAttributes[t]={};function r(t){return void 0!==t}if(!r(n[t].to)&&!r(n[t].by))return!1;if(i=r(n[t].from)?n[t].from:this.getAttribute(t),r(n[t].to))e=n[t].to;else if(r(n[t].by))if(i.constructor==Array){e=[];for(var s=0,u=i.length;s<u;++s)e[s]=i[s]+ +n[t].by[s]}else e=i+ +n[t].by;return this.runtimeAttributes[t].start=i,this.runtimeAttributes[t].end=e,this.runtimeAttributes[t].unit=r(n[t].unit)?n[t].unit:this.getDefaultUnit(t),!0},init:function(t){var e=!1,n=null,r=0,i=t.el?Rui.util.LDom.get(t.el):null;this.attributes=t.attributes||{},this.duration=Rui.isUndefined(t.duration)?1:t.duration,this.method=t.method||Rui.fx.LEasing.easeNone,this.useSeconds=!0,this.currentFrame=0,this.totalFrames=Rui.fx.LAnimManager.fps,this.setEl=function(t){i=Rui.util.LDom.get(t)},this.getEl=function(){return i},this.isAnimated=function(){return e},this.getStartTime=function(){return n},this.runtimeAttributes={},this.animate=function(){return!(this.isAnimated()||!i)&&(this.currentFrame=0,this.totalFrames=this.useSeconds?Math.ceil(Rui.fx.LAnimManager.fps*this.duration):this.duration,0===this.duration&&this.useSeconds&&(this.totalFrames=1),Rui.fx.LAnimManager.registerElement(this),!0)},this.stop=function(t){if(!this.isAnimated())return!1;t&&(this.currentFrame=this.totalFrames,this.tween()),Rui.fx.LAnimManager.stop(this)},this.start=function(){for(var t in this.fireEvent("start"),this.runtimeAttributes={},this.attributes)this.setRuntimeAttribute(t);e=!0,r=0,n=new Date},this.tween=function(){var t={duration:new Date-this.getStartTime(),currentFrame:this.currentFrame,toString:function(){return"duration: "+t.duration+", currentFrame: "+t.currentFrame}};this.fireEvent("tween",t);var i=this.runtimeAttributes;for(var e in i)this.setAttribute(e,this.doMethod(e,i[e].start,i[e].end),i[e].unit);r+=1},this.complete=function(){var t=(new Date-n)/1e3,i={duration:t,frames:r,fps:r/t,toString:function(){return"duration: "+i.duration+", frames: "+i.frames+", fps: "+i.fps}};e=!1,r=0,this.fireEvent("complete",i)}},toString:function(){var t=this.getEl()||{},i=t.id||t.tagName;return this.otype+": "+i}}),Rui.fx.LAnimManager=new function(){var n=null,r=[],s=0;this.fps=1e3,this.delay=1,this.registerElement=function(t){r[r.length]=t,s+=1,t.start(),this.start()},this.unRegister=function(t,i){return i=i||e(t),!(!t.isAnimated()||-1==i)&&(t.complete(),r.splice(i,1),--s<=0&&this.stop(),!0)},this.start=function(){null===n&&(n=setInterval(this.run,this.delay))},this.stop=function(t){if(t)this.unRegister(t);else{clearInterval(n);for(var i=0,e=r.length;i<e;++i)this.unRegister(r[0],0);r=[],n=null,s=0}},this.run=function(){for(var t=0,i=r.length;t<i;++t){var e=r[t];e&&e.isAnimated()&&(e.currentFrame<e.totalFrames||null===e.totalFrames?(e.currentFrame+=1,e.useSeconds&&u(e),e.tween()):Rui.fx.LAnimManager.stop(e,t))}};var e=function(t){for(var i=0,e=r.length;i<e;++i)if(r[i]==t)return i;return-1},u=function(t){var i=t.totalFrames,e=t.currentFrame,n=t.currentFrame*t.duration*1e3/t.totalFrames,r=new Date-t.getStartTime(),s=0;0<(s=r<1e3*t.duration?Math.round((r/n-1)*t.currentFrame):i-(e+1))&&isFinite(s)&&(t.currentFrame+s>=i&&(s=i-(e+1)),t.currentFrame+=s)}},Rui.fx.LEasing={easeNone:function(t,i,e,n){return e*t/n+i},easeIn:function(t,i,e,n){return e*(t/=n)*t+i},easeOut:function(t,i,e,n){return-e*(t/=n)*(t-2)+i},easeBoth:function(t,i,e,n){return(t/=n/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i},easeInStrong:function(t,i,e,n){return e*(t/=n)*t*t*t+i},easeOutStrong:function(t,i,e,n){return-e*((t=t/n-1)*t*t*t-1)+i},easeBothStrong:function(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t*t+i:-e/2*((t-=2)*t*t*t-2)+i},elasticIn:function(t,i,e,n,r,s){return 0==t?i:1==(t/=n)?i+e:(s=s||.3*n,u=!r||r<Math.abs(e)?(r=e,s/4):s/(2*Math.PI)*Math.asin(e/r),-(r*Math.pow(2,10*--t)*Math.sin((t*n-u)*(2*Math.PI)/s))+i);var u},elasticOut:function(t,i,e,n,r,s){return 0==t?i:1==(t/=n)?i+e:(s=s||.3*n,u=!r||r<Math.abs(e)?(r=e,s/4):s/(2*Math.PI)*Math.asin(e/r),r*Math.pow(2,-10*t)*Math.sin((t*n-u)*(2*Math.PI)/s)+e+i);var u},elasticBoth:function(t,i,e,n,r,s){return 0==t?i:2==(t/=n/2)?i+e:(s=s||n*(.3*1.5),u=!r||r<Math.abs(e)?(r=e,s/4):s/(2*Math.PI)*Math.asin(e/r),t<1?r*Math.pow(2,10*--t)*Math.sin((t*n-u)*(2*Math.PI)/s)*-.5+i:r*Math.pow(2,-10*--t)*Math.sin((t*n-u)*(2*Math.PI)/s)*.5+e+i);var u},backIn:function(t,i,e,n,r){return void 0===r&&(r=1.70158),e*(t/=n)*t*((r+1)*t-r)+i},backOut:function(t,i,e,n,r){return void 0===r&&(r=1.70158),e*((t=t/n-1)*t*((r+1)*t+r)+1)+i},backBoth:function(t,i,e,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?e/2*(t*t*((1+(r*=1.525))*t-r))+i:e/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+i},bounceIn:function(t,i,e,n){return e-Rui.fx.LEasing.bounceOut(n-t,0,e,n)+i},bounceOut:function(t,i,e,n){return(t/=n)<1/2.75?e*(7.5625*t*t)+i:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i},bounceBoth:function(t,i,e,n){return t<n/2?.5*Rui.fx.LEasing.bounceIn(2*t,0,e,n)+i:.5*Rui.fx.LEasing.bounceOut(2*t-n,0,e,n)+.5*e+i}},Rui.fx.LBezier=new function(){this.getPosition=function(t,i){for(var e=t.length,n=[],r=0;r<e;++r)n[r]=[t[r][0],t[r][1]];for(var s=1;s<e;++s)for(r=0;r<e-s;++r)n[r][0]=(1-i)*n[r][0]+i*n[parseInt(r+1,10)][0],n[r][1]=(1-i)*n[r][1]+i*n[parseInt(r+1,10)][1];return[n[0][0],n[0][1]]}},Rui.fx.LMotionAnim=function(t){((t=t||{}).el||t.applyTo)&&Rui.fx.LMotionAnim.superclass.constructor.call(this,t),this.patterns.points=/^points$/i},Rui.extend(Rui.fx.LMotionAnim,Rui.fx.LAnim,{otype:"Rui.fx.LMotionAnim",setAttribute:function(t,i,e){this.patterns.points.test(t)?(e=e||"px",Rui.fx.LMotionAnim.superclass.setAttribute.call(this,"left",i[0],e),i[1]&&Rui.fx.LMotionAnim.superclass.setAttribute.call(this,"top",i[1],e)):Rui.fx.LMotionAnim.superclass.setAttribute.call(this,t,i,e)},getAttribute:function(t){var i=this.patterns.points.test(t)?[Rui.fx.LMotionAnim.superclass.getAttribute.call(this,"left"),Rui.fx.LMotionAnim.superclass.getAttribute.call(this,"top")]:Rui.fx.LMotionAnim.superclass.getAttribute.call(this,t);return i},doMethod:function(t,i,e){var n;return this.patterns.points.test(t)?(n=this.method(this.currentFrame,0,100,this.totalFrames)/100,Rui.fx.LBezier.getPosition(this.runtimeAttributes[t],n)):Rui.fx.LMotionAnim.superclass.doMethod.call(this,t,i,e)},setRuntimeAttribute:function(t){if(this.patterns.points.test(t)){var i,e,n=this.getEl(),r=this.attributes,s=r.points.control||[],u=Rui.util.LDom;if(0<s.length&&!(s[0]instanceof Array))s=[s];else{for(var o=[],a=0,h=s.length;a<h;++a)o[a]=s[a];s=o}if("static"==u.getStyle(n,"position")&&u.setStyle(n,"position","relative"),this.isset(r.points.from)?u.setXY(n,r.points.from):u.setXY(n,u.getXY(n)),i=this.getAttribute("points"),this.isset(r.points.to))for(e=this.translateValues(r.points.to,i),a=0,h=s.length;a<h;++a)s[a]=this.translateValues(s[a],i);else if(this.isset(r.points.by))for(e=[i[0]+r.points.by[0],i[1]+r.points.by[1]],a=0,h=s.length;a<h;++a)s[a]=[i[0]+s[a][0],i[1]+s[a][1]];this.runtimeAttributes[t]=[i],0<s.length&&(this.runtimeAttributes[t]=this.runtimeAttributes[t].concat(s)),this.runtimeAttributes[t][this.runtimeAttributes[t].length]=e}else Rui.fx.LMotionAnim.superclass.setRuntimeAttribute.call(this,t)},translateValues:function(t,i){var e=Rui.util.LDom.getXY(this.getEl());return t=[t[0]-e[0]+i[0],t[1]-e[1]+i[1]]},isset:function(t){return void 0!==t}}),Rui.fx.LColorAnim=function(t){Rui.fx.LColorAnim.superclass.constructor.call(this,t),this.patterns.color=/color$/i,this.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,this.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,this.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,this.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/},Rui.extend(Rui.fx.LColorAnim,Rui.fx.LAnim,{otype:"Rui.fx.LColorAnim",DEFAULT_BGCOLOR:"#fff",parseColor:function(t){if(3==t.length)return t;var i=this.patterns.hex.exec(t);return i&&4==i.length?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=this.patterns.rgb.exec(t))&&4==i.length?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=this.patterns.hex3.exec(t))&&4==i.length?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:null},getAttribute:function(t){var i,e,n,r=this.getEl(),s=Rui.util.LDom;return this.patterns.color.test(t)?(n=s.getStyle(r,t),(i=this).patterns.transparent.test(n)&&(e=s.getAncestorBy(r,function(t){return!i.patterns.transparent.test(n)}),n=e?s.getStyle(e,t):this.DEFAULT_BGCOLOR)):n=Rui.fx.LColorAnim.superclass.getAttribute.call(this,t),n},doMethod:function(t,i,e){var n;if(this.patterns.color.test(t)){n=[];for(var r=0,s=i.length;r<s;++r)n[r]=Rui.fx.LColorAnim.superclass.doMethod.call(this,t,i[r],e[r]);n="rgb("+Math.floor(n[0])+","+Math.floor(n[1])+","+Math.floor(n[2])+")"}else n=Rui.fx.LColorAnim.superclass.doMethod.call(this,t,i,e);return n},setRuntimeAttribute:function(t){if(Rui.fx.LColorAnim.superclass.setRuntimeAttribute.call(this,t),this.patterns.color.test(t)){var i=this.attributes,e=this.parseColor(this.runtimeAttributes[t].start),n=this.parseColor(this.runtimeAttributes[t].end);if(void 0===i[t].to&&void 0!==i[t].by){n=this.parseColor(i[t].by);for(var r=0,s=e.length;r<s;++r)n[r]=e[r]+n[r]}this.runtimeAttributes[t].start=e,this.runtimeAttributes[t].end=n}}}),Rui.fx.LScrollAnim=function(t){((t=t||{}).el||t.applyTo)&&Rui.fx.LScrollAnim.superclass.constructor.call(this,t)},Rui.extend(Rui.fx.LScrollAnim,Rui.fx.LAnim,{otype:"Rui.fx.LScrollAnim",getAttribute:function(t){var i=this.getEl();return"scroll"==t?[i.scrollLeft,i.scrollTop]:Rui.fx.LScrollAnim.superclass.getAttribute.call(this,t)},setAttribute:function(t,i,e){var n=this.getEl();"scroll"==t?(n.scrollLeft=i[0],n.scrollTop=i[1]):Rui.fx.LScrollAnim.superclass.setAttribute.call(this,t,i,e)},doMethod:function(t,i,e){return"scroll"==t?[this.method(this.currentFrame,i[0],e[0]-i[0],this.totalFrames),this.method(this.currentFrame,i[1],e[1]-i[1],this.totalFrames)]:Rui.fx.LScrollAnim.superclass.doMethod.call(this,t,i,e)}});