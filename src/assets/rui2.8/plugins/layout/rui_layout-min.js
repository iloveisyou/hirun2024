/*
 * @(#) rui_layout-min.js
 * 
 * DevOn RUI
 * Build Version : 2.8
 * 
 * Copyright ⓒ LG CNS, Inc. All rights reserved.
 *
 * DevOn RUI의 모든 저작물은 LG CNS 의 지적재산입니다.
 * LG CNS로 부터 허가 받지 않은 경우 사용, 열람, 복사, 수정, 재배포 할 수 없으며 외부로의 유출을 금지합니다.
 * 특히 소스 코드를 수정하는 경우 기술 지원의 대상이 되지 않을 수 있습니다.
 * 자세한 사항은 계약사항에 따릅니다. 기타 사항은 devon@lgcns.com 으로 문의 하십시오.
 *
 * Do Not Erase This Comment!!! (이 주석문을 지우지 말것)
 *
 * rui/license.txt를 반드시 읽어보고 사용하시기 바랍니다. License.txt파일은 절대로 삭제하시면 안됩니다. 
 *
 * 1. 사내 사용시 KAMS를 통해 요청하여 사용허가를 받으셔야 소프트웨어 라이센스 계약서에 동의하는 것으로 간주됩니다.
 * 2. DevOn RUI가 포함된 제품을 판매하실 경우에도 KAMS를 통해 요청하여 사용허가를 받으셔야 합니다.
 * 3. KAMS를 통해 사용허가를 받지 않은 경우 소프트웨어 라이센스 계약을 위반한 것으로 간주됩니다.
 * 4. 별도로 판매될 경우는 LGCNS의 소프트웨어 판매정책을 따릅니다.
 */
Rui.namespace("Rui.ui.layout"),function(){var t,r=Rui.util.LDom,s=Rui.util.LEvent,h=function(t,e){Rui.isObject(t)&&!t.tagName&&(e=t,t=null),e=e||{},e=Rui.applyIf(e,Rui.getConfig().getFirst("$.base.layout.defaultProperties")),Rui.isString(t)&&r.get(t)&&(t=r.get(t));var i={element:t=t||document.body,attributes:e||{}};h.superclass.constructor.call(this,i.element,i.attributes)};h._instances={},h.getLayoutById=function(t){return!!h._instances[t]&&h._instances[t]},Rui.extend(h,Rui.LElement,{browser:((t=Rui.browser).standardsMode=!1,t.secure=!1,t),_units:null,_rendered:null,_zIndex:null,_sizes:null,_setBodySize:function(t){var e=0,i=0;t=!1!==t,this._isBody?(e=r.getClientHeight(),i=r.getClientWidth()):(e=parseInt(this.getStyle("height"),10),i=parseInt(this.getStyle("width"),10),isNaN(i)&&(i=this.get("element").clientWidth),isNaN(e)&&(e=this.get("element").clientHeight)),this.get("minWidth")&&i<this.get("minWidth")&&(i=this.get("minWidth")),this.get("minHeight")&&e<this.get("minHeight")&&(e=this.get("minHeight")),t&&(r.setStyle(this._doc,"height",e+"px"),r.setStyle(this._doc,"width",i+"px")),this._sizes.doc={h:e,w:i},this._setSides(t)},_setSides:function(t){var e=this._units.top?this._units.top.get("height"):0,i=this._units.bottom?this._units.bottom.get("height"):0,s=this._sizes.doc.h,h=this._sizes.doc.w;t=!1!==t,this._sizes.top={h:e,w:this._units.top?h:0,t:0},this._sizes.bottom={h:i,w:this._units.bottom?h:0};var o=s-(e+i);this._sizes.left={h:o,w:this._units.left?this._units.left.get("width"):0},this._sizes.right={h:o,w:this._units.right?this._units.right.get("width"):0,l:this._units.right?h-this._units.right.get("width"):0,t:this._units.top?this._sizes.top.h:0},this._units.right&&t&&(this._units.right.set("top",this._sizes.right.t),this._units.right._collapsing||this._units.right.set("left",this._sizes.right.l),this._units.right.set("height",this._sizes.right.h,!0)),this._units.left&&(this._sizes.left.l=0,this._units.top?this._sizes.left.t=this._sizes.top.h:this._sizes.left.t=0,t&&(this._units.left.set("top",this._sizes.left.t),this._units.left.set("height",this._sizes.left.h,!0),this._units.left.set("left",0))),this._units.bottom&&(this._sizes.bottom.t=this._sizes.top.h+this._sizes.left.h,t&&(this._units.bottom.set("top",this._sizes.bottom.t),this._units.bottom.set("width",this._sizes.bottom.w,!0))),this._units.top&&t&&this._units.top.set("width",this._sizes.top.w,!0),this._setCenter(t)},_setCenter:function(t){t=!1!==t;var e=this._sizes.left.h,i=this._sizes.doc.w-(this._sizes.left.w+this._sizes.right.w);t&&(this._units.center.set("height",e,!0),this._units.center.set("width",i,!0),this._units.center.set("top",this._sizes.top.h),this._units.center.set("left",this._sizes.left.w)),this._sizes.center={h:e,w:i,t:this._sizes.top.h,l:this._sizes.left.w}},getSizes:function(){return this._sizes},getUnitByPosition:function(t){return!!t&&(t=t.toLowerCase(),!!this._units[t]&&this._units[t])},removeUnit:function(t){delete this._units[t.get("position")],this.resize()},addUnit:function(t){if(!t.position)return!1;if(this._units[t.position])return!1;var e,i=null,s=null;t.id&&r.get(t.id)&&(i=r.get(t.id),delete t.id),t.element&&(i=t.element),s||(s=document.createElement("div"),e=r.generateId(),s.id=e),i=i||document.createElement("div"),r.addClass(i,"L-layout-wrap"),this.browser.msie&&!this.browser.standardsMode&&(s.style.zoom=1,i.style.zoom=1),s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),this._doc.appendChild(s);var h=!1,o=!1;t.height&&(h=parseInt(t.height,10)),t.width&&(o=parseInt(t.width,10));var l={};Rui.applyObject(l,t),l.parent=this,l.wrap=i,l.height=h,l.width=o;var n=new Rui.ui.layout.LLayout(s,l);return n.on("heightChange",this.resize,this,!0),n.on("widthChange",this.resize,this,!0),n.on("gutterChange",this.resize,this,!0),this._units[t.position]=n,this._rendered&&this.resize(),n},_createUnits:function(){var t=this.get("units");for(var e in t)Rui.hasOwnProperty(t,e)&&this.addUnit(t[e])},resize:function(t){return(t=!1!==t)&&(!1===this.fireEvent("beforeResize",{target:this})&&(t=!1),this.browser.msie&&(this._isBody?(r.removeClass(document.documentElement,"L-layout"),r.addClass(document.documentElement,"L-layout")):(this.removeClass("L-layout"),this.addClass("L-layout")))),this._setBodySize(t),t&&this.fireEvent("resize",{target:this,sizes:this._sizes}),this},_setupBodyElements:function(){this._doc=r.get("layout-doc"),this._doc||(this._doc=document.createElement("div"),this._doc.id="layout-doc",document.body.firstChild?document.body.insertBefore(this._doc,document.body.firstChild):document.body.appendChild(this._doc)),this._createUnits(),this._setBodySize(),s.on(window,"resize",this.resize,this,!0),r.addClass(this._doc,"L-layout-doc")},_setupElements:function(){this._doc=this.getElementsByClassName("L-layout-doc")[0],this._doc||(this._doc=document.createElement("div"),this.get("element").appendChild(this._doc)),this._createUnits(),this._setBodySize(),r.addClass(this._doc,"L-layout-doc")},_isBody:null,_doc:null,init:function(t,e){this._zIndex=0,h.superclass.init.call(this,t,e),this.get("parent")&&(this._zIndex=this.get("parent")._zIndex+10),this._sizes={},this._units={};var i=t;Rui.isString(i)||(i=r.generateId(i)),h._instances[i]=this},render:function(){this._stamp();var t=this.get("element");return t&&t.tagName&&"body"==t.tagName.toLowerCase()?(this._isBody=!0,r.addClass(document.body,"L-layout"),r.hasClass(document.body,"L-skin-sam")&&(r.addClass(document.documentElement,"L-skin-sam"),r.removeClass(document.body,"L-skin-sam")),this._setupBodyElements()):(this._isBody=!1,this.addClass("L-layout"),this._setupElements()),this.resize(),this._rendered=!0,this.fireEvent("render",{target:this},{isCE:!0}),this},_stamp:function(){"CSS1Compat"==document.compatMode&&(this.browser.standardsMode=!0),0===window.location.href.toLowerCase().indexOf("https")&&(r.addClass(document.documentElement,"secure"),this.browser.secure=!0)},initAttributes:function(t){h.superclass.initAttributes.call(this,t),this.setAttributeConfig("units",{writeOnce:!0,validator:Rui.isArray,value:t.units||[]}),this.setAttributeConfig("minHeight",{value:t.minHeight||!1,validator:Rui.isNumber}),this.setAttributeConfig("minWidth",{value:t.minWidth||!1,validator:Rui.isNumber}),this.setAttributeConfig("height",{value:t.height||!1,validator:Rui.isNumber,method:function(t){this.setStyle("height",t+"px")}}),this.setAttributeConfig("width",{value:t.width||!1,validator:Rui.isNumber,method:function(t){this.setStyle("width",t+"px")}}),this.setAttributeConfig("parent",{writeOnce:!0,value:t.parent||!1,method:function(t){t&&t.on("resize",this.resize,this,!0)}})},destroy:function(){var t=this.get("parent");for(var e in t&&t.removeListener("resize",this.resize,this),s.removeListener(window,"resize",this.resize),this.unOnAll(),this._units)Rui.hasOwnProperty(this._units,e)&&this._units[e]&&this._units[e].destroy(!0);for(var i in s.purgeElement(this.get("element")),this.get("parentNode").removeChild(this.get("element")),delete Rui.ui.layout.LLayoutManager._instances[this.get("id")],this)Rui.hasOwnProperty(this,i)&&(this[i]=null,delete this[i]);t&&t.resize()},toString:function(){return this.get?"LLayoutManager #"+this.get("id"):"LLayoutManager"}}),Rui.ui.layout.LLayoutManager=h}(),function(){var a=Rui.util.LDom,e=Rui.util.Selector,s=Rui.util.LEvent,l=function(t,e){var i={element:t,attributes:e||{}};l.superclass.constructor.call(this,i.element,i.attributes)};l._instances={},l.getLayoutUnitById=function(t){return!!l._instances[t]&&l._instances[t]},Rui.extend(l,Rui.LElement,{STR_CLOSE:"Click to close this pane.",STR_COLLAPSE:"Click to collapse this pane.",STR_EXPAND:"Click to expand this pane.",LOADING_CLASSNAME:"loading",browser:null,_sizes:null,_anim:null,_resize:null,_clip:null,_gutter:null,header:null,body:null,footer:null,_collapsed:null,_collapsing:null,_lastWidth:null,_lastHeight:null,_lastTop:null,_lastLeft:null,_lastScroll:null,_lastCenterScroll:null,_lastScrollTop:null,resize:function(t){var e,i,s,h,o,l,n,r;return!1===this.fireEvent("beforeResize",{target:this})||this._collapsing&&!0!==t||(e=this.get("scroll"),this.set("scroll",!1),i=this._getBoxSize(this.header),s=this._getBoxSize(this.footer),o=(h=[this.get("height"),this.get("width")])[0]-i[0]-s[0]-(this._gutter.top+this._gutter.bottom),l=h[1]-(this._gutter.left+this._gutter.right),n=o+(i[0]+s[0]),r=l,this._collapsed&&!this._collapsing?(this._setHeight(this._clip,n),this._setWidth(this._clip,r),a.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px"),a.setStyle(this._clip,"left",this.get("left")+this._gutter.left+"px")):(!this._collapsed||this._collapsed&&this._collapsing)&&(n=this._setHeight(this.get("wrap"),n),r=this._setWidth(this.get("wrap"),r),this._sizes.wrap.h=n,this._sizes.wrap.w=r,a.setStyle(this.get("wrap"),"top",this._gutter.top+"px"),a.setStyle(this.get("wrap"),"left",this._gutter.left+"px"),this._sizes.header.w=this._setWidth(this.header,r),this._sizes.header.h=i[0],this._sizes.footer.w=this._setWidth(this.footer,r),this._sizes.footer.h=s[0],a.setStyle(this.footer,"bottom","0px"),this._sizes.body.h=this._setHeight(this.body,n-(i[0]+s[0])),this._sizes.body.w=this._setWidth(this.body,r),a.setStyle(this.body,"top",i[0]+"px"),this.set("scroll",e),this.fireEvent("resize",{target:this,sizes:this._sizes},{isCE:!0}))),this},_setWidth:function(t,e){var i;return t&&(e-=(i=this._getBorderSizes(t))[1]+i[3],(e=this._fixQuirks(t,e,"w"))<0&&(e=0),a.setStyle(t,"width",e+"px")),e},_setHeight:function(t,e){var i;return t&&(e-=(i=this._getBorderSizes(t))[0]+i[2],(e=this._fixQuirks(t,e,"h"))<0&&(e=0),a.setStyle(t,"height",e+"px")),e},_fixQuirks:function(t,e,i){var s,h,o=0,l=2;return"w"==i&&(o=1,l=3),this.browser.msie&&!this.browser.standardsMode&&(s=this._getBorderSizes(t),h=this._getBorderSizes(t.parentNode),0===s[o]&&0===s[l]?0!==h[o]&&0!==h[l]&&(e-=h[o]+h[l]):0===h[o]&&0===h[l]&&(e+=s[o]+s[l])),e},_getBoxSize:function(t){var e,i=[0,0];return t&&(this.browser.msie&&!this.browser.standardsMode&&(t.style.zoom=1),e=this._getBorderSizes(t),i[0]=t.clientHeight+(e[0]+e[2]),i[1]=t.clientWidth+(e[1]+e[3])),i},_getBorderSizes:function(t){var e=[];t=t||this.get("element"),this.browser.msie&&!this.browser.standardsMode&&(t.style.zoom=1),e[0]=parseInt(a.getStyle(t,"borderTopWidth"),10),e[1]=parseInt(a.getStyle(t,"borderRightWidth"),10),e[2]=parseInt(a.getStyle(t,"borderBottomWidth"),10),e[3]=parseInt(a.getStyle(t,"borderLeftWidth"),10);for(var i=0;i<e.length;i++)isNaN(e[i])&&(e[i]=0);return e},_createClip:function(){var t;this._clip||(this._clip=document.createElement("div"),this._clip.className="L-layout-clip L-layout-clip-"+this.get("position"),this._clip.innerHTML='<div class="collapse"></div>',(t=this._clip.firstChild).title=this.STR_EXPAND,s.on(t,"click",this.expand,this,!0),this.get("element").parentNode.appendChild(this._clip))},_toggleClip:function(){if(this._collapsed)a.setStyle(this._clip,"display","none");else{var t=this._getBoxSize(this.header),e=this._getBoxSize(this.footer),i=[this.get("height"),this.get("width")],s=i[0]-t[0]-e[0]-(this._gutter.top+this._gutter.bottom),h=i[1]-(this._gutter.left+this._gutter.right),o=s+(t[0]+e[0]);switch(this.get("position")){case"top":case"bottom":this._setWidth(this._clip,h),this._setHeight(this._clip,this.get("collapseSize")),a.setStyle(this._clip,"left",this._lastLeft+this._gutter.left+"px"),"bottom"==this.get("position")?a.setStyle(this._clip,"top",this._lastTop+this._lastHeight-(this.get("collapseSize")-this._gutter.top)+"px"):a.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px");break;case"left":case"right":this._setWidth(this._clip,this.get("collapseSize")),this._setHeight(this._clip,o),a.setStyle(this._clip,"top",this.get("top")+this._gutter.top+"px"),"right"==this.get("position")?a.setStyle(this._clip,"left",this._lastLeft+this._lastWidth-this.get("collapseSize")-this._gutter.left+"px"):a.setStyle(this._clip,"left",this.get("left")+this._gutter.left+"px")}a.setStyle(this._clip,"display","block"),this.setStyle("display","none")}},getSizes:function(){return this._sizes},toggle:function(){return this._collapsed?this.expand():this.collapse(),this},expand:function(){if(!this._collapsed)return this;if(!1===this.fireEvent("beforeExpand",{target:this}))return this;if(this._collapsing=!0,this.setStyle("zIndex",this.get("parent")._zIndex+1),this._anim){this.setStyle("display","none");var t,e={};switch(this.get("position")){case"left":case"right":this.set("width",this._lastWidth,!0),this.setStyle("width",this._lastWidth+"px"),this.get("parent").resize(!1),t=this.get("parent").getSizes()[this.get("position")],this.set("height",t.h,!0);var i=t.l,e={left:{to:i}};"left"==this.get("position")&&(e.left.from=i-t.w,this.setStyle("left",i-t.w+"px"));break;case"top":case"bottom":this.set("height",this._lastHeight,!0),this.setStyle("height",this._lastHeight+"px"),this.get("parent").resize(!1),t=this.get("parent").getSizes()[this.get("position")],this.set("width",t.w,!0);var s=t.t;e={top:{to:s}},"top"==this.get("position")&&(this.setStyle("top",s-t.h+"px"),e.top.from=s-t.h)}this._anim.attributes=e;var h=function(){this.setStyle("display","block"),this.resize(!0),this._anim.unOn(h,this,!0)},o=function(){this._collapsing=!1,this.setStyle("zIndex",this.get("parent")._zIndex),this.set("width",this._lastWidth),this.set("height",this._lastHeight),this._collapsed=!1,this.resize(),this.set("scroll",this._lastScroll),0<this._lastScrollTop&&(this.body.scrollTop=this._lastScrollTop),this._anim.unOn("complete",o,this,!0),this.fireEvent("expand",{target:this})};this._anim.on("start",h,this,!0),this._anim.on("complete",o,this,!0),this._anim.animate(),this._toggleClip()}else this._collapsing=!1,this._toggleClip(),this._collapsed=!1,this.setStyle("zIndex",this.get("parent")._zIndex),this.setStyle("display","block"),this.set("width",this._lastWidth),this.set("height",this._lastHeight),this.resize(),this.set("scroll",this._lastScroll),0<this._lastScrollTop&&(this.body.scrollTop=this._lastScrollTop),this.fireEvent("expand",{target:this},{isCE:!0});return this},collapse:function(){if(this._collapsed)return this;if(!1===this.fireEvent("beforeCollapse",{target:this},{isCE:!0}))return this;this._clip||this._createClip(),this._collapsing=!0;var t=this.get("width"),e=this.get("height"),i={};this._lastWidth=t,this._lastHeight=e,this._lastScroll=this.get("scroll"),this._lastScrollTop=this.body.scrollTop,this.set("scroll",!1,!0),this._lastLeft=parseInt(this.get("element").style.left,10),this._lastTop=parseInt(this.get("element").style.top,10),isNaN(this._lastTop)&&(this._lastTop=0,this.set("top",0)),isNaN(this._lastLeft)&&(this._lastLeft=0,this.set("left",0)),this.setStyle("zIndex",this.get("parent")._zIndex+1);var s,h=this.get("position");switch(h){case"top":case"bottom":this.set("height",this.get("collapseSize")+(this._gutter.top+this._gutter.bottom)),i={top:{to:this.get("top")-e}},"bottom"==h&&(i.top.to=this.get("top")+e);break;case"left":case"right":this.set("width",this.get("collapseSize")+(this._gutter.left+this._gutter.right)),i={left:{to:-this._lastWidth}},"right"==h&&(i.left={to:this.get("left")+t})}return this._anim?(this._anim.attributes=i,s=function(){this._collapsing=!1,this._toggleClip(),this.setStyle("zIndex",this.get("parent")._zIndex),this._collapsed=!0,this.get("parent").resize(),this._anim.unOn("complete",s,this,!0),this.fireEvent("collapse",{target:this})},this._anim.on("complete",s,this,!0),this._anim.animate()):(this._collapsing=!1,this.setStyle("display","none"),this._toggleClip(),this.setStyle("zIndex",this.get("parent")._zIndex),this.get("parent").resize(),this._collapsed=!0,this.fireEvent("collapse",{target:this},{isCE:!0})),this},close:function(){return this.setStyle("display","none"),this.get("parent").removeUnit(this),this.fireEvent("close",{target:this},{isCE:!0}),this._clip&&(this._clip.parentNode.removeChild(this._clip),this._clip=null),this.get("parent")},bodyHtml:function(t){this.body.innerHTML=t,this.resize(!0)},init:function(t,e){this._gutter={left:0,right:0,top:0,bottom:0},this._sizes={wrap:{h:0,w:0},header:{h:0,w:0},body:{h:0,w:0},footer:{h:0,w:0}},l.superclass.init.call(this,t,e),this.browser=this.get("parent").browser;var i=t;Rui.isString(i)||(i=a.generateId(i)),(l._instances[i]=this).setStyle("position","absolute"),this.addClass("L-layout-unit"),this.addClass("L-layout-unit-"+this.get("position"));var s=this.getElementsByClassName("L-layout-hd","div")[0];s&&(this.header=s);var h=this.getElementsByClassName("L-layout-bd","div")[0];h&&(this.body=h);var o=this.getElementsByClassName("L-layout-ft","div")[0];o&&(this.footer=o),this.on("contentChange",this.resize,this,!0),this._lastScrollTop=0,this.set("animate",this.get("animate"))},initAttributes:function(t){l.superclass.initAttributes.call(this,t),this.setAttributeConfig("wrap",{value:t.wrap||null,method:function(t){var e;t&&(e=a.generateId(t),l._instances[e]=this)}}),this.setAttributeConfig("grids",{value:t.grids||!1}),this.setAttributeConfig("top",{value:t.top||0,validator:Rui.isNumber,method:function(t){this._collapsing||this.setStyle("top",t+"px")}}),this.setAttributeConfig("left",{value:t.left||0,validator:Rui.isNumber,method:function(t){this._collapsing||this.setStyle("left",t+"px")}}),this.setAttributeConfig("minWidth",{value:t.minWidth||!1,validator:Rui.isNumber}),this.setAttributeConfig("maxWidth",{value:t.maxWidth||!1,validator:Rui.isNumber}),this.setAttributeConfig("minHeight",{value:t.minHeight||!1,validator:Rui.isNumber}),this.setAttributeConfig("maxHeight",{value:t.maxHeight||!1,validator:Rui.isNumber}),this.setAttributeConfig("height",{value:t.height,validator:Rui.isNumber,method:function(t){this._collapsing||(t<0&&(t=0),this.setStyle("height",t+"px"))}}),this.setAttributeConfig("width",{value:t.width,validator:Rui.isNumber,method:function(t){this._collapsing||(t<0&&(t=0),this.setStyle("width",t+"px"))}}),this.setAttributeConfig("zIndex",{value:t.zIndex||!1,method:function(t){this.setStyle("zIndex",t)}}),this.setAttributeConfig("position",{value:t.position}),this.setAttributeConfig("gutter",{value:t.gutter||0,validator:Rui.isString,method:function(t){var e=t.split(" ");e.length&&(this._gutter.top=parseInt(e[0],10),e[1]?this._gutter.right=parseInt(e[1],10):this._gutter.right=this._gutter.top,e[2]?this._gutter.bottom=parseInt(e[2],10):this._gutter.bottom=this._gutter.top,e[3]?this._gutter.left=parseInt(e[3],10):e[1]?this._gutter.left=this._gutter.right:this._gutter.left=this._gutter.top)}}),this.setAttributeConfig("parent",{writeOnce:!0,value:t.parent||!1,method:function(t){t&&t.on("resize",this.resize,this,!0)}}),this.setAttributeConfig("collapseSize",{value:t.collapseSize||25,validator:Rui.isNumber}),this.setAttributeConfig("duration",{value:t.duration||.5}),this.setAttributeConfig("easing",{value:t.easing||(Rui.util&&Rui.util.LEasing?Rui.util.LEasing.BounceIn:"false")}),this.setAttributeConfig("animate",{value:!1!==t.animate,validator:function(){return!!Rui.util.LAnim},method:function(t){this._anim=!!t&&new Rui.util.LAnim({el:this.get("element"),attributes:{},duration:this.get("duration"),method:this.get("easing")})}}),this.setAttributeConfig("header",{value:t.header||!1,method:function(t){var e,i;!1===t?this.header&&(a.addClass(this.body,"L-layout-bd-nohd"),this.header.parentNode.removeChild(this.header),this.header=null):(this.header||(e=(e=this.getElementsByClassName("L-layout-hd","div")[0])||this._createHeader(),this.header=e),(i=this.header.getElementsByTagName("h2")[0])||(i=document.createElement("h2"),this.header.appendChild(i)),i.innerHTML=t,this.body&&a.removeClass(this.body,"L-layout-bd-nohd")),this.fireEvent("contentChange",{target:"header"},{isCE:!0})}}),this.setAttributeConfig("proxy",{writeOnce:!0,value:!1!==t.proxy}),this.setAttributeConfig("body",{value:t.body||!1,method:function(t){var e;this.body||((e=this.getElementsByClassName("L-layout-bd","div")[0])?this.body=e:((e=document.createElement("div")).className="L-layout-bd",this.body=e,this.get("wrap").appendChild(e))),this.header||a.addClass(this.body,"L-layout-bd-nohd"),a.addClass(this.body,"L-layout-bd-noft");var i,s=null;Rui.isString(t)?s=a.get(t):t&&t.tagName&&(s=t),s?(i=a.generateId(s),(l._instances[i]=this).body.appendChild(s)):this.body.innerHTML=t,this._cleanGrids(),this.fireEvent("contentChange",{target:"body"},{isCE:!0})}}),this.setAttributeConfig("footer",{value:t.footer||!1,method:function(t){var e,i;!1===t?this.footer&&(a.addClass(this.body,"L-layout-bd-noft"),this.footer.parentNode.removeChild(this.footer),this.footer=null):(this.footer||((e=this.getElementsByClassName("L-layout-ft","div")[0])?this.footer=e:((e=document.createElement("div")).className="L-layout-ft",this.footer=e,this.get("wrap").appendChild(e))),i=null,Rui.isString(t)?i=a.get(t):t&&t.tagName&&(i=t),i?this.footer.appendChild(i):this.footer.innerHTML=t,a.removeClass(this.body,"L-layout-bd-noft")),this.fireEvent("contentChange",{target:"footer"},{isCE:!0})}}),this.setAttributeConfig("close",{value:t.close||!1,method:function(t){if("center"==this.get("position"))return!1;this.header||this._createHeader();var e=a.getElementsByClassName("close","div",this.header)[0];t?(this.get("header")||this.set("header","&nbsp;"),e||((e=document.createElement("div")).className="close",this.header.appendChild(e),s.on(e,"click",this.close,this,!0)),e.title=this.STR_CLOSE):e&&(s.purgeElement(e),e.parentNode.removeChild(e)),this._configs.close.value=t,this.set("collapse",this.get("collapse"))}}),this.setAttributeConfig("collapse",{value:t.collapse||!1,method:function(t){if("center"==this.get("position"))return!1;this.header||this._createHeader();var e=a.getElementsByClassName("collapse","div",this.header)[0];t?(this.get("header")||this.set("header","&nbsp;"),e||(e=document.createElement("div"),this.header.appendChild(e),s.on(e,"click",this.collapse,this,!0)),e.title=this.STR_COLLAPSE,e.className="collapse"+(this.get("close")?" collapse-close":"")):e&&(s.purgeElement(e),e.parentNode.removeChild(e))}}),this.setAttributeConfig("scroll",{value:(!0===t.scroll||!1===t.scroll||null===t.scroll)&&t.scroll,method:function(t){!1!==t||this._collapsed||this.body&&0<this.body.scrollTop&&(this._lastScrollTop=this.body.scrollTop),!0===t?(this.addClass("L-layout-scroll"),this.removeClass("L-layout-noscroll"),0<this._lastScrollTop&&this.body&&(this.body.scrollTop=this._lastScrollTop)):!1===t?(this.removeClass("L-layout-scroll"),this.addClass("L-layout-noscroll")):null===t&&(this.removeClass("L-layout-scroll"),this.removeClass("L-layout-noscroll"))}}),this.setAttributeConfig("hover",{writeOnce:!0,value:t.hover||!1,validator:Rui.isBoolean}),this.setAttributeConfig("useShim",{value:t.useShim||!1,validator:Rui.isBoolean,method:function(t){this._resize&&this._resize.set("useShim",t)}}),this.setAttributeConfig("resize",{value:t.resize||!1,validator:function(t){return!(!Rui.util||!Rui.util.LResize)},method:function(t){if(t&&!this._resize){if("center"==this.get("position"))return!1;var e=!1;switch(this.get("position")){case"top":e="b";break;case"bottom":e="t";break;case"right":e="l";break;case"left":e="r"}this.setStyle("position","absolute"),e&&(this._resize=new Rui.util.LResize({el:this.get("element"),attributes:{proxy:this.get("proxy"),hover:this.get("hover"),status:!1,autoRatio:!1,handles:[e],minWidth:this.get("minWidth"),maxWidth:this.get("maxWidth"),minHeight:this.get("minHeight"),maxHeight:this.get("maxHeight"),height:this.get("height"),width:this.get("width"),setSize:!1,useShim:this.get("useShim"),wrap:!1}}),this._resize._handles[e].innerHTML='<div class="L-layout-resize-knob"></div>',this.get("proxy")&&(this._resize.getProxyEl().innerHTML='<div class="L-layout-handle-'+e+'"></div>'),this._resize.on("startResize",function(t){var e;this._lastScroll=this.get("scroll"),this.set("scroll",!1),this.get("parent")&&(this.get("parent").fireEvent("startResize",{target:this}),e=this.get("parent").getUnitByPosition("center"),this._lastCenterScroll=e.get("scroll"),e.addClass(this._resize.CSS_RESIZING),e.set("scroll",!1)),this.fireEvent("startResize",{target:this})},this,!0),this._resize.on("resize",function(t){this.set("height",t.height),this.set("width",t.width)},this,!0),this._resize.on("endResize",function(t){var e;this.set("scroll",this._lastScroll),this.get("parent")&&((e=this.get("parent").getUnitByPosition("center")).set("scroll",this._lastCenterScroll),e.removeClass(this._resize.CSS_RESIZING)),this.resize(),this.fireEvent("endResize",{target:this})},this,!0))}else this._resize&&this._resize.destroy()}}),this.setAttributeConfig("dataSrc",{value:t.dataSrc}),this.setAttributeConfig("loadMethod",{value:t.loadMethod||"GET",validator:Rui.isString}),this.setAttributeConfig("dataLoaded",{value:!1,validator:Rui.isBoolean,writeOnce:!0}),this.setAttributeConfig("dataTimeout",{value:t.dataTimeout||null,validator:Rui.isNumber})},_cleanGrids:function(){var t;this.get("grids")&&((t=e.query("div.L-b",this.body,!0))&&a.removeClass(t,"L-b"),s.onAvailable("L-main",function(){a.setStyle(e.query("#L-main"),"margin-left","0"),a.setStyle(e.query("#L-main"),"margin-right","0")}))},_createHeader:function(){var t=document.createElement("div");return t.className="L-layout-hd",this.get("firstChild")?this.get("wrap").insertBefore(t,this.get("wrap").firstChild):this.get("wrap").appendChild(t),this.header=t},destroy:function(t){this._resize&&this._resize.destroy();var e=this.get("parent");for(var i in this.setStyle("display","none"),this._clip&&(this._clip.parentNode.removeChild(this._clip),this._clip=null),t||e.removeUnit(this),e&&e.removeListener("resize",this.resize,this),s.purgeElement(this.get("element")),this.get("parentNode").removeChild(this.get("element")),delete Rui.ui.layout.LLayout._instances[this.get("id")],this)Rui.hasOwnProperty(this,i)&&(this[i]=null,delete this[i]);return e},toString:function(){return this.get?"LLayout #"+this.get("id")+" ("+this.get("position")+")":"LLayout"}}),Rui.ui.layout.LLayout=l}();